/*! For license information please see main.js.LICENSE.txt */
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[792],{208:(t,e,n)=>{n.d(e,{A:()=>c});var r=n(354),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([t.id,'html, body, #root {\n    height: 100%;\n}\n\nbody {\n    font-family: sans-serif;\n    color: #666;\n    margin: 0;\n}\n\n#root {\n    display: flex;\n    flex-direction: column;\n}\n#root > div.graph {\n    flex: 1;\n    overflow: auto;\n    position: relative;\n}\n\n.toolbar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 4px 10px;\n    background-color: #f0f0f0;\n    border-bottom: 1px solid #cccccc;\n}\n\n.toolbar > div {\n    display: flex;\n    align-items: center;\n}\n\n.toolbar button {\n    padding: 5px 8px;\n    margin: 0 2px;\n    cursor: pointer;\n}\n\n.toolbar button:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n}\n\n/* Drag mode toggle button styles */\n.toolbar button.mode-toggle {\n    position: relative;\n    border: 1px solid #8f9fc9;\n    width: 40px;\n    min-height: 28px;\n    background: linear-gradient(to bottom, #abb8db, #8f9fc9);\n    border-color: #8f9fc9;\n    color: white;\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, .2);\n}\n\n.toolbar button.mode-toggle:hover {\n    background: linear-gradient(to bottom, #bcc7e0, #abb8db);\n    border-color: #abb8db;\n}\n\n.toolbar button.mode-toggle.select-mode:active {\n    background: linear-gradient(to bottom, #8f9fc9, #7a8bb5);\n}\n\n/* Pan mode and active toggle - darker blue */\n.toolbar button.mode-toggle.pan-mode,\n.toolbar button.active-toggle {\n    background: linear-gradient(to bottom, #4a90e2, #357abd);\n    border-color: #2968a3;\n    box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);\n}\n\n.toolbar button.mode-toggle.pan-mode:hover,\n.toolbar button.active-toggle:hover {\n    background: linear-gradient(to bottom, #5ba0f2, #4585c7);\n}\n\n.toolbar button.mode-toggle.pan-mode:active {\n    background: linear-gradient(to bottom, #357abd, #2968a3);\n    box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);\n}\n\n/* Toggle buttons when inactive - gray styling */\n.toolbar button.inactive-toggle {\n    background: #c1c1c1;\n    color: #999;\n    border-color: #c1c1c1;\n    box-shadow: none;\n}\n\n.toolbar button.inactive-toggle:hover {\n    background: #b1b1b1;\n}\n\n.toolbar button.inactive-toggle:active {\n    background: #a1a1a1;\n}\n\n/* Toggle buttons when disabled and not active - gray like other disabled buttons */\n.toolbar button.mode-toggle:disabled:not(.pan-mode):not(.active-toggle),\n.toolbar button.active-toggle:disabled:not(.active-toggle) {\n    background: #c1c1c1;\n    color: #999;\n    border-color: #c1c1c1;\n    box-shadow: none;\n}\n\n/* Ensure Font Awesome icons are sized appropriately if not already handled */\n.toolbar button .fas {\n    font-size: 1em;\n    vertical-align: middle;\n}\n\n/* Zoom percentage display */\n.toolbar button.zoom-display {\n    font-family: \'SF Mono\', Monaco, \'Roboto Mono\', Consolas, monospace;\n    font-size: 11px;\n    font-weight: 600;\n    min-width: 50px;  /* Wider to prevent size change between 99% and 100% */\n    padding: 6px 8px;\n    text-align: center;\n}\n\n.toolbar-group {\n    display: flex;\n    align-items: center;\n    margin-right: 25px; /* Large space between groups */\n}\n\n.toolbar-group:last-child {\n    margin-right: 0; /* Remove right margin from the last group (help button) */\n}\n\nbutton {\n    border: none;\n    background: linear-gradient(to bottom, #4a90e2, #357abd);\n    border-color: #2968a3;\n    border-radius: 3px;\n    padding: 6px 10px;\n    color: #fff;\n    outline: none;\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, .2);\n    margin-right: 5px;\n    min-width: 32px;\n    min-height: 28px;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 14px;\n    line-height: 1;\n    font-family: "Segoe UI", "Segoe UI Symbol", "Segoe UI Emoji", system-ui, -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;\n    position: relative;\n}\n\nbutton:hover {\n    background: linear-gradient(to bottom, #5ba0f2, #4585c7);\n}\n\nbutton:active {\n    background: linear-gradient(to bottom, #357abd, #2968a3);\n}\n\nbutton:last-child {\n    margin-right: 0;\n}\n\n/* Save button when no changes - gray */\nbutton.action {\n    background: #c1c1c1;\n    color: #999;\n}\n\nbutton.action:active {\n    background: #b1b1b1;\n}\n\n/* Save button when there are changes - orange */\nbutton.grp {\n    background: linear-gradient(to bottom, #ee9564, #de7d48);\n    margin-right: 0;\n}\n\nbutton.grp:active {\n    background: #d67540;\n}\n\nselect {\n    border: 1px solid #ccc;\n    background: white;\n    border-radius: 3px;\n    padding: 3px 7px;\n    color: #666;\n    outline: none;\n    margin-right: 5px;\n    font-size: 12px;\n}\n\nselect:disabled {\n    background: #f5f5f5;\n    color: #999;\n}\n\nbutton:disabled {\n    background: #c1c1c1;\n    color: #999;\n}\n\n#root > div > svg {\n    position: absolute;\n    user-select: none;\n}\n\n\n.node.selected .nodeBorder, .edge.selected path, .edge.selected rect {\n    stroke: #29c229;\n}\n.edge .v-dot {\n    fill: transparent;\n    stroke: transparent;\n    stroke-width: 3px;\n    cursor: pointer;\n    transition: stroke 0.15s ease;\n}\n.edge .v-dot:hover {\n    stroke: #999;\n    fill: rgba(153, 153, 153, 0.1);\n}\n.edge .v-dot.selected {\n    stroke: #29c229;\n    fill: rgba(41, 194, 41, 0.1);\n}\n.edge .v-dot.selected:hover {\n    stroke: #29c229;\n    fill: rgba(41, 194, 41, 0.2);\n}\n.edge .v-dot.auto.selected {\n    stroke: #777;\n    fill: rgba(119, 119, 119, 0.1);\n}\n.edge .v-dot.auto.selected:hover {\n    stroke: #777;\n    fill: rgba(119, 119, 119, 0.2);\n}\ncircle#prj {\n    fill: none;\n    stroke: #777;\n}\n\n.nodeShadow {\n    fill: none;\n    stroke-width: 4px;\n    stroke: rgba(0, 0, 0, 0.13);\n}\n\ng.node {\n    user-select: none;\n    cursor: default;\n}\n\ng.node text {\n    pointer-events: none;\n}\n\n.icon {\n    fill: #aaa;\n    stroke: #fff;\n}\n#icon-cube {\n    fill: #aaa;\n}\n\n/* Ensure all button icons are uncolored */\nbutton .icon,\nbutton svg,\nbutton path {\n    fill: currentColor !important;\n    stroke: none !important;\n}\n\n/* Font Awesome icon styling in buttons */\nbutton i {\n    font-size: 12px;\n    color: inherit;\n}\n\nrect.elastic {\n    pointer-events: none;\n    stroke: none;\n    fill: #3bd8281f;\n    display: none;\n}\nrect.elastic.on {\n    display: block;\n}\n\n.popover {\n    position: absolute;\n    top: 50px;\n    bottom: 10px;\n    overflow: auto;\n    right: 10px;\n    background: ghostwhite;\n    padding: 30px;\n    box-shadow: 3px 3px 5px rgba(0,0,0, .2);\n    border: solid 1px #eee;\n}\n\n.popover th {\n    text-align: left;\n    padding: 20px 0px 10px;\n}\n.popover td {\n    padding-right: 20px;\n    font-size: 14px;\n}\n\n/* Simple tooltip system with smart positioning */\n[data-tooltip] {\n    position: relative;\n}\n\n[data-tooltip]:hover::after {\n    content: attr(data-tooltip);\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    background: rgba(0, 0, 0, 0.9);\n    color: white;\n    padding: 6px 12px;\n    border-radius: 4px;\n    font-size: 12px;\n    white-space: nowrap;\n    z-index: 1000;\n    pointer-events: none;\n    margin-top: 5px;\n    animation: tooltip-appear 0.1s ease-out;\n    min-width: 120px;\n    max-width: calc(100vw - 20px);\n    box-sizing: border-box;\n}\n\n[data-tooltip]:hover::before {\n    content: \'\';\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    border: 4px solid transparent;\n    border-bottom-color: rgba(0, 0, 0, 0.9);\n    z-index: 1000;\n    pointer-events: none;\n    margin-top: 1px;\n    animation: tooltip-appear 0.1s ease-out;\n}\n\n/* Special handling for rightmost elements that might overflow */\n.toolbar-group:nth-last-child(-n+2) button[data-tooltip]:hover::after {\n    /* Apply to last 2 toolbar groups (save and help buttons) */\n    left: auto;\n    right: 0;\n    transform: none;\n}\n\n.toolbar-group:nth-last-child(-n+2) button[data-tooltip]:hover::before {\n    /* Apply to last 2 toolbar groups (save and help buttons) */\n    left: auto;\n    right: 16px;\n    transform: none;\n}\n\n@keyframes tooltip-appear {\n    from {\n        opacity: 0;\n        transform: translateX(-50%) translateY(-5px);\n    }\n    to {\n        opacity: 1;\n        transform: translateX(-50%) translateY(0);\n    }\n}\n\nselect {\n    position: relative;\n}',"",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"AAAA;IACI,YAAY;AAChB;;AAEA;IACI,uBAAuB;IACvB,WAAW;IACX,SAAS;AACb;;AAEA;IACI,aAAa;IACb,sBAAsB;AAC1B;AACA;IACI,OAAO;IACP,cAAc;IACd,kBAAkB;AACtB;;AAEA;IACI,aAAa;IACb,8BAA8B;IAC9B,mBAAmB;IACnB,iBAAiB;IACjB,yBAAyB;IACzB,gCAAgC;AACpC;;AAEA;IACI,aAAa;IACb,mBAAmB;AACvB;;AAEA;IACI,gBAAgB;IAChB,aAAa;IACb,eAAe;AACnB;;AAEA;IACI,YAAY;IACZ,mBAAmB;AACvB;;AAEA,mCAAmC;AACnC;IACI,kBAAkB;IAClB,yBAAyB;IACzB,WAAW;IACX,gBAAgB;IAChB,wDAAwD;IACxD,qBAAqB;IACrB,YAAY;IACZ,yCAAyC;AAC7C;;AAEA;IACI,wDAAwD;IACxD,qBAAqB;AACzB;;AAEA;IACI,wDAAwD;AAC5D;;AAEA,6CAA6C;AAC7C;;IAEI,wDAAwD;IACxD,qBAAqB;IACrB,2CAA2C;AAC/C;;AAEA;;IAEI,wDAAwD;AAC5D;;AAEA;IACI,wDAAwD;IACxD,2CAA2C;AAC/C;;AAEA,gDAAgD;AAChD;IACI,mBAAmB;IACnB,WAAW;IACX,qBAAqB;IACrB,gBAAgB;AACpB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,mBAAmB;AACvB;;AAEA,mFAAmF;AACnF;;IAEI,mBAAmB;IACnB,WAAW;IACX,qBAAqB;IACrB,gBAAgB;AACpB;;AAEA,6EAA6E;AAC7E;IACI,cAAc;IACd,sBAAsB;AAC1B;;AAEA,4BAA4B;AAC5B;IACI,kEAAkE;IAClE,eAAe;IACf,gBAAgB;IAChB,eAAe,GAAG,sDAAsD;IACxE,gBAAgB;IAChB,kBAAkB;AACtB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,kBAAkB,EAAE,+BAA+B;AACvD;;AAEA;IACI,eAAe,EAAE,0DAA0D;AAC/E;;AAEA;IACI,YAAY;IACZ,wDAAwD;IACxD,qBAAqB;IACrB,kBAAkB;IAClB,iBAAiB;IACjB,WAAW;IACX,aAAa;IACb,yCAAyC;IACzC,iBAAiB;IACjB,eAAe;IACf,gBAAgB;IAChB,oBAAoB;IACpB,mBAAmB;IACnB,uBAAuB;IACvB,eAAe;IACf,cAAc;IACd,+IAA+I;IAC/I,kBAAkB;AACtB;;AAEA;IACI,wDAAwD;AAC5D;;AAEA;IACI,wDAAwD;AAC5D;;AAEA;IACI,eAAe;AACnB;;AAEA,uCAAuC;AACvC;IACI,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,mBAAmB;AACvB;;AAEA,gDAAgD;AAChD;IACI,wDAAwD;IACxD,eAAe;AACnB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,sBAAsB;IACtB,iBAAiB;IACjB,kBAAkB;IAClB,gBAAgB;IAChB,WAAW;IACX,aAAa;IACb,iBAAiB;IACjB,eAAe;AACnB;;AAEA;IACI,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,kBAAkB;IAClB,iBAAiB;AACrB;;;AAGA;IACI,eAAe;AACnB;AACA;IACI,iBAAiB;IACjB,mBAAmB;IACnB,iBAAiB;IACjB,eAAe;IACf,6BAA6B;AACjC;AACA;IACI,YAAY;IACZ,8BAA8B;AAClC;AACA;IACI,eAAe;IACf,4BAA4B;AAChC;AACA;IACI,eAAe;IACf,4BAA4B;AAChC;AACA;IACI,YAAY;IACZ,8BAA8B;AAClC;AACA;IACI,YAAY;IACZ,8BAA8B;AAClC;AACA;IACI,UAAU;IACV,YAAY;AAChB;;AAEA;IACI,UAAU;IACV,iBAAiB;IACjB,2BAA2B;AAC/B;;AAEA;IACI,iBAAiB;IACjB,eAAe;AACnB;;AAEA;IACI,oBAAoB;AACxB;;AAEA;IACI,UAAU;IACV,YAAY;AAChB;AACA;IACI,UAAU;AACd;;AAEA,0CAA0C;AAC1C;;;IAGI,6BAA6B;IAC7B,uBAAuB;AAC3B;;AAEA,yCAAyC;AACzC;IACI,eAAe;IACf,cAAc;AAClB;;AAEA;IACI,oBAAoB;IACpB,YAAY;IACZ,eAAe;IACf,aAAa;AACjB;AACA;IACI,cAAc;AAClB;;AAEA;IACI,kBAAkB;IAClB,SAAS;IACT,YAAY;IACZ,cAAc;IACd,WAAW;IACX,sBAAsB;IACtB,aAAa;IACb,uCAAuC;IACvC,sBAAsB;AAC1B;;AAEA;IACI,gBAAgB;IAChB,sBAAsB;AAC1B;AACA;IACI,mBAAmB;IACnB,eAAe;AACnB;;AAEA,iDAAiD;AACjD;IACI,kBAAkB;AACtB;;AAEA;IACI,2BAA2B;IAC3B,kBAAkB;IAClB,SAAS;IACT,SAAS;IACT,2BAA2B;IAC3B,8BAA8B;IAC9B,YAAY;IACZ,iBAAiB;IACjB,kBAAkB;IAClB,eAAe;IACf,mBAAmB;IACnB,aAAa;IACb,oBAAoB;IACpB,eAAe;IACf,uCAAuC;IACvC,gBAAgB;IAChB,6BAA6B;IAC7B,sBAAsB;AAC1B;;AAEA;IACI,WAAW;IACX,kBAAkB;IAClB,SAAS;IACT,SAAS;IACT,2BAA2B;IAC3B,6BAA6B;IAC7B,uCAAuC;IACvC,aAAa;IACb,oBAAoB;IACpB,eAAe;IACf,uCAAuC;AAC3C;;AAEA,gEAAgE;AAChE;IACI,2DAA2D;IAC3D,UAAU;IACV,QAAQ;IACR,eAAe;AACnB;;AAEA;IACI,2DAA2D;IAC3D,UAAU;IACV,WAAW;IACX,eAAe;AACnB;;AAEA;IACI;QACI,UAAU;QACV,4CAA4C;IAChD;IACA;QACI,UAAU;QACV,yCAAyC;IAC7C;AACJ;;AAEA;IACI,kBAAkB;AACtB",sourcesContent:['html, body, #root {\n    height: 100%;\n}\n\nbody {\n    font-family: sans-serif;\n    color: #666;\n    margin: 0;\n}\n\n#root {\n    display: flex;\n    flex-direction: column;\n}\n#root > div.graph {\n    flex: 1;\n    overflow: auto;\n    position: relative;\n}\n\n.toolbar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 4px 10px;\n    background-color: #f0f0f0;\n    border-bottom: 1px solid #cccccc;\n}\n\n.toolbar > div {\n    display: flex;\n    align-items: center;\n}\n\n.toolbar button {\n    padding: 5px 8px;\n    margin: 0 2px;\n    cursor: pointer;\n}\n\n.toolbar button:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n}\n\n/* Drag mode toggle button styles */\n.toolbar button.mode-toggle {\n    position: relative;\n    border: 1px solid #8f9fc9;\n    width: 40px;\n    min-height: 28px;\n    background: linear-gradient(to bottom, #abb8db, #8f9fc9);\n    border-color: #8f9fc9;\n    color: white;\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, .2);\n}\n\n.toolbar button.mode-toggle:hover {\n    background: linear-gradient(to bottom, #bcc7e0, #abb8db);\n    border-color: #abb8db;\n}\n\n.toolbar button.mode-toggle.select-mode:active {\n    background: linear-gradient(to bottom, #8f9fc9, #7a8bb5);\n}\n\n/* Pan mode and active toggle - darker blue */\n.toolbar button.mode-toggle.pan-mode,\n.toolbar button.active-toggle {\n    background: linear-gradient(to bottom, #4a90e2, #357abd);\n    border-color: #2968a3;\n    box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);\n}\n\n.toolbar button.mode-toggle.pan-mode:hover,\n.toolbar button.active-toggle:hover {\n    background: linear-gradient(to bottom, #5ba0f2, #4585c7);\n}\n\n.toolbar button.mode-toggle.pan-mode:active {\n    background: linear-gradient(to bottom, #357abd, #2968a3);\n    box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);\n}\n\n/* Toggle buttons when inactive - gray styling */\n.toolbar button.inactive-toggle {\n    background: #c1c1c1;\n    color: #999;\n    border-color: #c1c1c1;\n    box-shadow: none;\n}\n\n.toolbar button.inactive-toggle:hover {\n    background: #b1b1b1;\n}\n\n.toolbar button.inactive-toggle:active {\n    background: #a1a1a1;\n}\n\n/* Toggle buttons when disabled and not active - gray like other disabled buttons */\n.toolbar button.mode-toggle:disabled:not(.pan-mode):not(.active-toggle),\n.toolbar button.active-toggle:disabled:not(.active-toggle) {\n    background: #c1c1c1;\n    color: #999;\n    border-color: #c1c1c1;\n    box-shadow: none;\n}\n\n/* Ensure Font Awesome icons are sized appropriately if not already handled */\n.toolbar button .fas {\n    font-size: 1em;\n    vertical-align: middle;\n}\n\n/* Zoom percentage display */\n.toolbar button.zoom-display {\n    font-family: \'SF Mono\', Monaco, \'Roboto Mono\', Consolas, monospace;\n    font-size: 11px;\n    font-weight: 600;\n    min-width: 50px;  /* Wider to prevent size change between 99% and 100% */\n    padding: 6px 8px;\n    text-align: center;\n}\n\n.toolbar-group {\n    display: flex;\n    align-items: center;\n    margin-right: 25px; /* Large space between groups */\n}\n\n.toolbar-group:last-child {\n    margin-right: 0; /* Remove right margin from the last group (help button) */\n}\n\nbutton {\n    border: none;\n    background: linear-gradient(to bottom, #4a90e2, #357abd);\n    border-color: #2968a3;\n    border-radius: 3px;\n    padding: 6px 10px;\n    color: #fff;\n    outline: none;\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, .2);\n    margin-right: 5px;\n    min-width: 32px;\n    min-height: 28px;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 14px;\n    line-height: 1;\n    font-family: "Segoe UI", "Segoe UI Symbol", "Segoe UI Emoji", system-ui, -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;\n    position: relative;\n}\n\nbutton:hover {\n    background: linear-gradient(to bottom, #5ba0f2, #4585c7);\n}\n\nbutton:active {\n    background: linear-gradient(to bottom, #357abd, #2968a3);\n}\n\nbutton:last-child {\n    margin-right: 0;\n}\n\n/* Save button when no changes - gray */\nbutton.action {\n    background: #c1c1c1;\n    color: #999;\n}\n\nbutton.action:active {\n    background: #b1b1b1;\n}\n\n/* Save button when there are changes - orange */\nbutton.grp {\n    background: linear-gradient(to bottom, #ee9564, #de7d48);\n    margin-right: 0;\n}\n\nbutton.grp:active {\n    background: #d67540;\n}\n\nselect {\n    border: 1px solid #ccc;\n    background: white;\n    border-radius: 3px;\n    padding: 3px 7px;\n    color: #666;\n    outline: none;\n    margin-right: 5px;\n    font-size: 12px;\n}\n\nselect:disabled {\n    background: #f5f5f5;\n    color: #999;\n}\n\nbutton:disabled {\n    background: #c1c1c1;\n    color: #999;\n}\n\n#root > div > svg {\n    position: absolute;\n    user-select: none;\n}\n\n\n.node.selected .nodeBorder, .edge.selected path, .edge.selected rect {\n    stroke: #29c229;\n}\n.edge .v-dot {\n    fill: transparent;\n    stroke: transparent;\n    stroke-width: 3px;\n    cursor: pointer;\n    transition: stroke 0.15s ease;\n}\n.edge .v-dot:hover {\n    stroke: #999;\n    fill: rgba(153, 153, 153, 0.1);\n}\n.edge .v-dot.selected {\n    stroke: #29c229;\n    fill: rgba(41, 194, 41, 0.1);\n}\n.edge .v-dot.selected:hover {\n    stroke: #29c229;\n    fill: rgba(41, 194, 41, 0.2);\n}\n.edge .v-dot.auto.selected {\n    stroke: #777;\n    fill: rgba(119, 119, 119, 0.1);\n}\n.edge .v-dot.auto.selected:hover {\n    stroke: #777;\n    fill: rgba(119, 119, 119, 0.2);\n}\ncircle#prj {\n    fill: none;\n    stroke: #777;\n}\n\n.nodeShadow {\n    fill: none;\n    stroke-width: 4px;\n    stroke: rgba(0, 0, 0, 0.13);\n}\n\ng.node {\n    user-select: none;\n    cursor: default;\n}\n\ng.node text {\n    pointer-events: none;\n}\n\n.icon {\n    fill: #aaa;\n    stroke: #fff;\n}\n#icon-cube {\n    fill: #aaa;\n}\n\n/* Ensure all button icons are uncolored */\nbutton .icon,\nbutton svg,\nbutton path {\n    fill: currentColor !important;\n    stroke: none !important;\n}\n\n/* Font Awesome icon styling in buttons */\nbutton i {\n    font-size: 12px;\n    color: inherit;\n}\n\nrect.elastic {\n    pointer-events: none;\n    stroke: none;\n    fill: #3bd8281f;\n    display: none;\n}\nrect.elastic.on {\n    display: block;\n}\n\n.popover {\n    position: absolute;\n    top: 50px;\n    bottom: 10px;\n    overflow: auto;\n    right: 10px;\n    background: ghostwhite;\n    padding: 30px;\n    box-shadow: 3px 3px 5px rgba(0,0,0, .2);\n    border: solid 1px #eee;\n}\n\n.popover th {\n    text-align: left;\n    padding: 20px 0px 10px;\n}\n.popover td {\n    padding-right: 20px;\n    font-size: 14px;\n}\n\n/* Simple tooltip system with smart positioning */\n[data-tooltip] {\n    position: relative;\n}\n\n[data-tooltip]:hover::after {\n    content: attr(data-tooltip);\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    background: rgba(0, 0, 0, 0.9);\n    color: white;\n    padding: 6px 12px;\n    border-radius: 4px;\n    font-size: 12px;\n    white-space: nowrap;\n    z-index: 1000;\n    pointer-events: none;\n    margin-top: 5px;\n    animation: tooltip-appear 0.1s ease-out;\n    min-width: 120px;\n    max-width: calc(100vw - 20px);\n    box-sizing: border-box;\n}\n\n[data-tooltip]:hover::before {\n    content: \'\';\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    border: 4px solid transparent;\n    border-bottom-color: rgba(0, 0, 0, 0.9);\n    z-index: 1000;\n    pointer-events: none;\n    margin-top: 1px;\n    animation: tooltip-appear 0.1s ease-out;\n}\n\n/* Special handling for rightmost elements that might overflow */\n.toolbar-group:nth-last-child(-n+2) button[data-tooltip]:hover::after {\n    /* Apply to last 2 toolbar groups (save and help buttons) */\n    left: auto;\n    right: 0;\n    transform: none;\n}\n\n.toolbar-group:nth-last-child(-n+2) button[data-tooltip]:hover::before {\n    /* Apply to last 2 toolbar groups (save and help buttons) */\n    left: auto;\n    right: 16px;\n    transform: none;\n}\n\n@keyframes tooltip-appear {\n    from {\n        opacity: 0;\n        transform: translateX(-50%) translateY(-5px);\n    }\n    to {\n        opacity: 1;\n        transform: translateX(-50%) translateY(0);\n    }\n}\n\nselect {\n    position: relative;\n}'],sourceRoot:""}]);const c=a},334:(t,e,n)=>{n.d(e,{SA:()=>i,sy:()=>o});var r=function(){if("undefined"==typeof navigator)return!1;if("userAgentData"in navigator&&navigator.userAgentData){var t=navigator.userAgentData.platform;if(t&&t.toLowerCase().includes("mac"))return!0}var e=navigator.userAgent.toLowerCase();if(e.includes("mac os")||e.includes("macintosh"))return!0;if(navigator.platform){var n=navigator.platform.toLowerCase();if(n.includes("mac")||n.includes("darwin"))return!0}try{if(void 0!==new KeyboardEvent("keydown",{metaKey:!0}).metaKey)return/mac|darwin|os x/i.test(navigator.userAgent)}catch(t){}return!1},o=function(){return r()?"Cmd":"Ctrl"},i=function(t){return r()?t.metaKey:t.ctrlKey}},344:(t,e,n)=>{n.r(e),n.d(e,{ADD_LABEL_VERTEX:()=>s,ADD_VERTEX:()=>l,ALIGN_HORIZONTAL:()=>T,ALIGN_VERTICAL:()=>j,AUTO_LAYOUT:()=>P,BOX_SELECT:()=>B,DEL_VERTEX:()=>u,DESELECT:()=>m,DISTRIBUTE_HORIZONTAL:()=>D,DISTRIBUTE_VERTICAL:()=>L,HELP:()=>M,Help:()=>q,MOVE_DOWN:()=>b,MOVE_DOWN_FINE:()=>C,MOVE_ELEMENTS:()=>O,MOVE_LEFT:()=>y,MOVE_LEFT_FINE:()=>x,MOVE_RIGHT:()=>A,MOVE_RIGHT_FINE:()=>w,MOVE_UP:()=>v,MOVE_UP_FINE:()=>E,MULTI_SELECT:()=>I,PAN_VIEW:()=>S,REDO:()=>c,RESET_POSITION:()=>N,SAVE:()=>i,SELECT_ALL:()=>g,SELECT_ELEMENT:()=>k,SNAP_ALL_TO_GRID:()=>z,TOGGLE_DRAG_MODE:()=>_,TOGGLE_GRID:()=>V,TOGGLE_SNAP_TO_GRID:()=>G,UNDO:()=>a,ZOOM_100:()=>p,ZOOM_FIT:()=>h,ZOOM_IN:()=>d,ZOOM_OUT:()=>f,findShortcut:()=>U});var r=n(540),o=n(334),i="save",a="undo",c="redo",l="add-vertex",s="add-label-vertex",u="del-vertex",d="zoom-in",f="zoom-out",h="zoom-fit",p="zoom-100",g="select-all",m="deselect",y="move-left",A="move-right",v="move-up",b="move-down",x="move-left-fine",w="move-right-fine",E="move-up-fine",C="move-down-fine",S="pan-view",k="select-element",I="multi-select",B="box-select",O="move-elements",M="help",_="toggle_drag_mode",T="align_horizontal",j="align_vertical",D="distribute_horizontal",L="distribute_vertical",P="auto_layout",N="reset_position",V="toggle_grid",G="toggle_snap_to_grid",z="snap_all_to_grid",R=[{name:"Help",list:[{id:M,help:"Show/hide this help",combinations:[{key:"?",shift:!0},{key:"F1",shift:!0}]}]},{name:"File",list:[{id:i,help:"Save",combinations:[{key:"s",ctrl:!0}]}]},{name:"History",list:[{id:a,help:"Undo",combinations:[{ctrl:!0,key:"z"}]},{id:c,help:"Redo",combinations:[{ctrl:!0,shift:!0,key:"z"},{ctrl:!0,key:"y"}]}]},{name:"Relationship editing",list:[{id:l,help:"Add relationship vertex",combinations:[{alt:!0,click:!0}]},{id:s,help:"Add label anchor relationship vertex",combinations:[{alt:!0,shift:!0,click:!0}]},{id:u,help:"Remove relationship vertex",combinations:[{key:"DELETE"},{key:"BACKSPACE"}]}]},{name:"Zoom",list:[{id:d,help:"Zoom in",combinations:[{ctrl:!0,key:"="}]},{id:f,help:"Zoom out",combinations:[{ctrl:!0,key:"-"}]},{id:h,help:"Zoom - fit",combinations:[{ctrl:!0,key:"9"}]},{id:p,help:"Zoom 100%",combinations:[{ctrl:!0,key:"0"}]},{id:"wheel_zoom",help:"Zoom in/out with mouse wheel",combinations:[{wheel:!0}]}]},{name:"Mouse Interactions",list:[{id:S,help:"Pan view (drag empty space)",combinations:[{click:!0}]},{id:k,help:"Select element",combinations:[{click:!0}]},{id:I,help:"Add/remove from selection",combinations:[{shift:!0,click:!0}]},{id:B,help:"Box selection (drag empty space)",combinations:[{shift:!0,click:!0}]},{id:O,help:"Move selected elements",combinations:[{click:!0}]}]},{name:"Select",list:[{id:g,help:"Select All",combinations:[{ctrl:!0,key:"a"}]},{id:m,help:"Deselect",combinations:[{key:"ESC"}]}]},{name:"Move",list:[{id:v,help:"Move up (grid increment)",combinations:[{key:"UP"}]},{id:E,help:"Move up (1 pixel)",combinations:[{key:"UP",shift:!0}]},{id:A,help:"Move right (grid increment)",combinations:[{key:"RIGHT"}]},{id:w,help:"Move right (1 pixel)",combinations:[{key:"RIGHT",shift:!0}]},{id:b,help:"Move down (grid increment)",combinations:[{key:"DOWN"}]},{id:C,help:"Move down (1 pixel)",combinations:[{key:"DOWN",shift:!0}]},{id:y,help:"Move left (grid increment)",combinations:[{key:"LEFT"}]},{id:x,help:"Move left (1 pixel)",combinations:[{key:"LEFT",shift:!0}]}]},{name:"View",list:[{id:_,help:"Toggle between pan and select mode",combinations:[{key:"t"}]},{id:N,help:"Reset position and view",combinations:[{key:"Home",ctrl:!0}]}]},{name:"Alignment",list:[{id:T,help:"Align selected elements horizontally",combinations:[{key:"h",ctrl:!0,shift:!0}]},{id:j,help:"Align selected elements vertically",combinations:[{key:"a",ctrl:!0,shift:!0}]},{id:D,help:"Distribute selected elements horizontally",combinations:[{key:"h",ctrl:!0,alt:!0}]},{id:L,help:"Distribute selected elements vertically",combinations:[{key:"v",ctrl:!0,alt:!0}]}]},{name:"Layout",list:[{id:P,help:"Auto layout all elements",combinations:[{key:"l",ctrl:!0}]}]},{name:"Grid",list:[{id:V,help:"Toggle grid visibility",combinations:[{key:"g",ctrl:!0}]},{id:G,help:"Toggle snap to grid",combinations:[{key:"g",ctrl:!0,shift:!0}]},{id:z,help:"Snap all elements to grid",combinations:[{key:"g",ctrl:!0,alt:!0}]}]}],F=R.reduce(function(t,e){return t.concat(e.list)},[]).reduce(function(t,e){return t[e.id]=e,t},{}),U=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object.keys(F).filter(function(r){return function(t,e,n,r){return e.combinations.some(function(e){if(Boolean(e.shift)!=t.shiftKey)return!1;if(e.ctrl&&!(0,o.SA)(t))return!1;if(Boolean(e.alt)!=t.altKey)return!1;if(n)return e.click;if(r)return e.wheel;if(e.key){var i=t;return"DELETE"==e.key?"Delete"==i.key:"BACKSPACE"==e.key?"Backspace"==i.key:"ESC"==e.key?"Escape"==i.key:"UP"==e.key?"ArrowUp"==i.key:"DOWN"==e.key?"ArrowDown"==i.key:"LEFT"==e.key?"ArrowLeft"==i.key:"RIGHT"==e.key?"ArrowRight"==i.key:e.key&&i.key&&e.key.toLowerCase()==i.key.toLowerCase()}return!1})}(t,F[r],e,n)});if(0!==r.length)return 1===r.length?r[0]:r.sort(function(t,e){var n=F[t],r=F[e],o=n.combinations[0],i=r.combinations[0],a=(o.shift?1:0)+(o.ctrl?1:0)+(o.alt?1:0);return(i.shift?1:0)+(i.ctrl?1:0)+(i.alt?1:0)-a})[0]},W=function(t){return[t.ctrl&&(0,o.sy)().toUpperCase(),t.shift&&"SHIFT",t.alt&&"ALT",t.key&&(t.key.length>1?t.key:'"'.concat(t.key.toUpperCase(),'"')),t.click&&"CLICK",t.wheel&&"WHEEL"].filter(Boolean).join(" + ")},q=function(){return r.createElement("div",{className:"popover"},r.createElement("h1",null,"Shortcuts"),r.createElement("table",null,r.createElement("tbody",null,R.map(function(t){return r.createElement(r.Fragment,null,r.createElement("tr",null,r.createElement("th",{colSpan:2},t.name)),t.list.map(function(t){return r.createElement("tr",null,r.createElement("td",null,t.combinations.map(W).join(", ")),r.createElement("td",null,t.help))}))}))))}},372:(t,e,n)=>{var r=n(338),o=n(540),i=n(876),a=n(72),c=n.n(a),l=n(825),s=n.n(l),u=n(659),d=n.n(u),f=n(56),h=n.n(f),p=n(159),g=n.n(p),m=n(113),y=n.n(m),A=n(208),v={};function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach(function(e){k(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function S(t,e,n){return e&&C(t.prototype,e),n&&C(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function k(t,e,n){return(e=I(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t){var e=function(t){if("object"!=b(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}v.styleTagTransform=y(),v.setAttributes=h(),v.insert=d().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=g(),c()(A.A,v),A.A&&A.A.locals&&A.A.locals,n(400);var B=function(){return S(function t(e){var n=this;E(this,t),k(this,"running",!1),k(this,"timeoutId",null),this.callback=e,this.handler=function(){n.running=!1,n.timeoutId=null,n.callback()}},[{key:"start",value:function(t){this.running&&this.stop(),this.timeoutId=setTimeout(this.handler,t),this.running=!0}},{key:"stop",value:function(){this.running&&null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.running=!1,this.timeoutId=null)}},{key:"isRunning",value:function(){return this.running}}])}(),O=function(){function t(e,n){var r=this;E(this,t),k(this,"socket",null),k(this,"connectionDesired",!1),k(this,"disconnectionReason",""),this.fileChangeHandler=e,this.options=w(w({},t.DEFAULT_OPTIONS),n),this.uri="ws://localhost:35729/livereload",this.nextDelay=this.options.minDelay,this.handshakeTimeout=new B(function(){return r.handleHandshakeTimeout()}),this.reconnectTimer=new B(function(){return r.attemptReconnection()})}return S(t,[{key:"connect",value:function(){this.connectionDesired=!0,this.isSocketConnected()||(this.prepareForConnection(),this.createWebSocket())}},{key:"disconnect",value:function(){this.connectionDesired=!1,this.reconnectTimer.stop(),this.isSocketConnected()&&(this.disconnectionReason="manual",this.socket.close())}},{key:"isSocketConnected",value:function(){return null!==this.socket&&this.socket.readyState===WebSocket.OPEN}},{key:"prepareForConnection",value:function(){this.reconnectTimer.stop(),this.disconnectionReason="cannot-connect"}},{key:"createWebSocket",value:function(){var t=this;this.socket=new WebSocket(this.uri),this.socket.onopen=function(){return t.handleOpen()},this.socket.onclose=function(){return t.handleClose()},this.socket.onmessage=function(e){return t.handleMessage(e)},this.socket.onerror=function(){return t.handleError()}}},{key:"handleOpen",value:function(){this.disconnectionReason="handshake-failed",this.startHandshake()}},{key:"handleClose",value:function(){console.log("WebSocket disconnected: ".concat(this.disconnectionReason,". Retry in ").concat(this.nextDelay,"ms")),this.scheduleReconnection()}},{key:"handleMessage",value:function(t){try{var e=JSON.parse(t.data);this.processMessage(e)}catch(t){console.error("Failed to parse WebSocket message:",t)}}},{key:"handleError",value:function(){}},{key:"processMessage",value:function(t){switch(t.command){case"hello":this.handleHelloMessage();break;case"reload":this.handleReloadMessage(t);break;default:console.log("Unknown WebSocket message received:",t)}}},{key:"handleHelloMessage",value:function(){this.handshakeTimeout.stop(),this.nextDelay=this.options.minDelay}},{key:"handleReloadMessage",value:function(t){this.reconnectTimer.stop(),this.connect(),t.path&&this.fileChangeHandler(t.path)}},{key:"startHandshake",value:function(){var e={command:"hello",protocols:t.LIVERELOAD_PROTOCOLS,ver:"3.3.1"};this.sendCommand(e),this.handshakeTimeout.start(this.options.handshakeTimeout)}},{key:"handleHandshakeTimeout",value:function(){this.isSocketConnected()&&(this.disconnectionReason="handshake-timeout",this.socket.close())}},{key:"attemptReconnection",value:function(){this.connectionDesired&&this.connect()}},{key:"scheduleReconnection",value:function(){this.connectionDesired&&(this.reconnectTimer.isRunning()||(this.reconnectTimer.start(this.nextDelay),this.nextDelay=Math.min(this.options.maxDelay,2*this.nextDelay)))}},{key:"sendCommand",value:function(t){this.isSocketConnected()&&this.socket.send(JSON.stringify(t))}}])}();function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function _(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return T(s,"_invoke",function(n,r,o){var i,c,l,s=0,u=o||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,l=t,f.n=n,a}};function h(n,r){for(c=n,l=r,e=0;!d&&s&&!o&&e<u.length;e++){var o,i=u[e],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,c=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,p){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),c=u,l=p;(e=c<2?t:l)||!d;){i||(c?c<3?(c>1&&(f.n=-1),h(c,l)):f.n=l:f.v=l);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(e){i=t,c=1,l=e}finally{s=1}}return{value:e,done:d}}}(n,o,i),!0),s}var a={};function c(){}function l(){}function s(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(T(e={},r,function(){return this}),e),d=s.prototype=c.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,T(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=s,T(d,"constructor",s),T(s,"constructor",l),l.displayName="GeneratorFunction",T(s,o,"GeneratorFunction"),T(d),T(d,o,"Generator"),T(d,r,function(){return this}),T(d,"toString",function(){return"[object Generator]"}),(_=function(){return{w:i,m:f}})()}function T(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}T=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){T(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},T(t,e,n,r)}function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach(function(e){L(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function L(t,e,n){return(e=function(t){var e=function(t){if("object"!=M(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==M(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return V(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}k(O,"DEFAULT_OPTIONS",{minDelay:1e3,maxDelay:6e4,handshakeTimeout:5e3}),k(O,"LIVERELOAD_PROTOCOLS",["http://livereload.com/protocols/official-9","http://livereload.com/protocols/2.x-remote-control"]);var G=(0,o.lazy)(function(){return Promise.resolve().then(n.bind(n,876)).then(function(t){return{default:t.Root}})}),z=function(){var t=N((0,o.useState)({data:null,error:null,loading:!0}),2),e=t[0],n=t[1],r=function(){var t,e=(t=_().m(function t(){var e,r,o,i,a,c,l,s,u;return _().w(function(t){for(;;)switch(t.p=t.n){case 0:return n(function(t){return D(D({},t),{},{loading:!0,error:null})}),t.p=1,t.n=2,Promise.all([fetch("data/model.json"),fetch("data/layout.json")]);case 2:if(e=t.v,r=N(e,2),o=r[0],i=r[1],o.ok){t.n=3;break}throw new Error("Failed to fetch model: ".concat(o.statusText));case 3:if(i.ok){t.n=4;break}throw new Error("Failed to fetch layout: ".concat(i.statusText));case 4:return t.n=5,Promise.all([o.json(),i.json()]);case 5:a=t.v,c=N(a,2),l=c[0],s=c[1],n({data:{model:l,layout:s},error:null,loading:!1}),t.n=7;break;case 6:t.p=6,u=t.v,console.error("Failed to load data:",u),n({data:null,error:u instanceof Error?u.message:"Unknown error occurred",loading:!1});case 7:return t.a(2)}},t,null,[[1,6]])}),function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){P(i,r,o,a,c,"next",t)}function c(t){P(i,r,o,a,c,"throw",t)}a(void 0)})});return function(){return e.apply(this,arguments)}}(),a=function(t){t.endsWith(".svg")||(console.log("File changed:",t),(0,i.refreshGraph)(),r())};return(0,o.useEffect)(function(){return new O(a).connect(),r(),function(){}},[]),e.loading?o.createElement(R,null):e.error?o.createElement(F,{error:e.error,onRetry:r}):e.data?o.createElement(o.Suspense,{fallback:o.createElement(R,null)},o.createElement(G,{model:e.data.model,layout:e.data.layout})):o.createElement(F,{error:"No data available",onRetry:r})},R=function(){return o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontFamily:"Arial, sans-serif"}},o.createElement("div",null,"Loading..."))},F=function(t){var e=t.error,n=t.onRetry;return o.createElement("div",{style:{padding:"20px",color:"red",fontFamily:"monospace",whiteSpace:"pre-wrap",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh"}},o.createElement("h2",null,"Error loading application"),o.createElement("p",null,e),o.createElement("button",{onClick:n,style:{padding:"10px 20px",fontSize:"16px",cursor:"pointer",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px"}},"Retry"))},U=document.getElementById("root");if(!U)throw new Error("Root container not found");(0,r.createRoot)(U).render(o.createElement(z,null))},719:(t,e,n)=>{function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{jg:()=>lt,Qy:()=>At,ZG:()=>dt,IX:()=>vt,F_:()=>Bt,Kp:()=>It,a_:()=>xt});var o=function(t,e,n){var o=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return document.body.appendChild(t),{measure:function(e,n){var r=document.createElementNS("http://www.w3.org/2000/svg","text");for(var o in r.setAttribute("x","0"),r.setAttribute("y","0"),n)r.setAttribute(o,n[o]);r.appendChild(document.createTextNode(e)),t.appendChild(r);var i=r.getBBox(),a=i.width,c=i.height;return t.removeChild(r),{width:a,height:c}},clean:function(){document.body.removeChild(t)}}}(),i=0,a=t.trim().split("\n").map(function(t){var a=t.trim().split(/\s+/),c=[],l=[];return a.forEach(function(t){if(o.measure(t,n).width>e){l.length>0&&(c.push(l.join(" ")),l=[]);for(var a=function(t,e,n,r){for(var o=[],i="",a=0;a<t.length;a++){var c=i+t[a];r.measure(c,n).width>e&&i.length>0?(o.push(i),i=t[a]):i=c}return i.length>0&&o.push(i),o}(t,e,n,o),s=0;s<a.length-1;s++)c.push(a[s]),i=Math.max(i,o.measure(a[s],n).width);a.length>0&&(l=[a[a.length-1]])}else{var u=[].concat(function(t){if(Array.isArray(t))return r(t)}(f=l)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(f)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t]),d=o.measure(u.join(" "),n);d.width>e&&l.length>0?(c.push(l.join(" ")),l=[t]):(i=Math.max(i,d.width),l=u)}var f}),l.length>0&&c.push(l.join(" ")),c}).reduce(function(t,e){return t.concat(e)},[]);return o.clean(),{lines:a,maxW:i}};function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){l(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function l(t,e,n){return(e=function(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var u={element:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=document.createElementNS("http://www.w3.org/2000/svg",t);return Object.entries(e).forEach(function(t){var e,n,o=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,n)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return r.setAttribute(i,String(a))}),n&&r.classList.add(n),r},use:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.element("use",e);return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+t),n},path:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return this.element("path",c(c({},e),{},{d:t}),n)},text:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.element("text",e);return t&&(n.textContent=t),n},textArea:function(t,e,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",u={"font-size":"".concat(n,"px"),"font-weight":r?"bold":"normal"},d=o(t,e,u),f=d.lines,h=d.maxW,p=this.text("",{x:0,y:l,"text-anchor":s||void 0});return f.forEach(function(t,e){var r=i.element("tspan",c({x:a,dy:"".concat(n+2,"px")},u));r.textContent=t,p.append(r)}),{txt:p,dy:(f.length+1)*(n+2),maxW:h}},rect:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0;return this.element("rect",{x:n,y:r,rx:o,ry:o,width:t,height:e},i)},icon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.use(t,{x:e,y:n})},expand:function(t,e,n){var r=this.element("g",{transform:"translate(".concat(t,",").concat(e,")")},"expand");return r.append(this.rect(19,19,0,0,1),this.text(n?"-":"+",{x:10,y:14,"text-anchor":"middle"})),r}};function d(t,e,n){t.setAttribute("transform","translate(".concat(e,",").concat(n,")"))}function f(t,e){return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?t.x>e.x&&t.x<e.x+e.width&&t.y>e.y&&t.y<e.y+e.height:t.x>e.x-e.width/2&&t.x<e.x+e.width/2&&t.y>e.y-e.height/2&&t.y<e.y+e.height/2}function h(t,e,n){var r=n.width/2,o=n.height/2;return[{p:{x:n.x-r,y:n.y-o},q:{x:n.x-r,y:n.y+o}},{p:{x:n.x-r,y:n.y-o},q:{x:n.x+r,y:n.y-o}},{p:{x:n.x+r,y:n.y-o},q:{x:n.x+r,y:n.y+o}},{p:{x:n.x-r,y:n.y+o},q:{x:n.x+r,y:n.y+o}}].map(function(n){return function(t,e,n,r){var o,i,a,c,l,s={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(o=(r.y-n.y)*(e.x-t.x)-(r.x-n.x)*(e.y-t.y))||(i=t.y-n.y,a=t.x-n.x,c=(r.x-n.x)*i-(r.y-n.y)*a,l=(e.x-t.x)*i-(e.y-t.y)*a,i=c/o,a=l/o,s.x=t.x+i*(e.x-t.x),s.y=t.y+i*(e.y-t.y),i>0&&i<1&&(s.onLine1=!0),a>=0&&a<=1&&(s.onLine2=!0)),s}(t,e,n.p,n.q)}).filter(function(t){return t.onLine1&&t.onLine2})}function p(t,e){return f(e,t)?{x:t.x,y:t.y}:h(t,e,t)[0]||{x:t.x,y:t.y}}function g(t,e,n,r,o){var i={x:o.x-t.x,y:o.y-t.y},a=r.x-t.x,c=r.y-t.y;a==i.x&&(i.x+=1e-7);var l=(c-i.y)/(a-i.x),s=c-l*a,u=n*n+e*e*l*l,d=2*e*e*s*l,f=e*e*s*s-e*e*n*n,h=Math.sqrt(d*d-4*u*f),p=i.x>a?(-d+h)/(2*u):(-d-h)/(2*u),g={x:p,y:l*p+s};return g.x+=t.x,g.y+=t.y,g}function m(t,e,n){var r=n.x-e.x,o=n.y-e.y,i=r*r+o*o,a=(t.x-e.x)*r+(t.y-e.y)*o,c=Math.min(1,Math.max(0,a/i));return{x:e.x+r*c,y:e.y+o*c}}function y(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function b(t){var e=function(t){if("object"!=A(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:e+""}var x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._el=e}return e=t,(n=[{key:"node",value:function(){return this._el}},{key:"attr",value:function(t,e){return this._el.setAttribute(t,String(e)),this}},{key:"insert",value:function(e,n){var r=document.createElementNS("http://www.w3.org/2000/svg",e);return new t(this._el.insertBefore(r,this._el.querySelector(n)))}}])&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function w(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=t.insert("rect",":first-child").attr("rx",r?n.width/8:3).attr("ry",r?n.width/8:3).attr("x",-e.width/2).attr("y",-e.height/2).attr("width",e.width).attr("height",e.height);return n.intersect=function(t){return p(n,t)},o}function E(t,e,n,r,o){var i=t.insert("ellipse",":first-child").attr("cx",0).attr("cy",0).attr("rx",r).attr("ry",o).attr("width",n.width).attr("height",n.height);return n.intersect=function(t){return g(n,r,o,n,t)},i}function C(t,e,n){var r=n.width/8,o=n.width/14,i=t.insert("g",":first-child");return i.insert("path",":first-child").attr("d","M".concat(-n.width/2,",").concat(-n.height/2," l").concat(n.width,",0 M").concat(-n.width/2,",").concat(n.height/2," l").concat(n.width,",0")),i.insert("circle",":first-child").attr("cx",0).attr("cy",n.height/2+r/2).attr("r",.4*o),i.insert("rect",":first-child").attr("x",-o).attr("y",-n.height/2-r/2-.2*o).attr("width",2*o).attr("height",.4*o),i.insert("rect",":first-child").attr("rx",o).attr("ry",o).attr("x",-e.width/2).attr("y",-e.height/2-r).attr("width",e.width).attr("height",e.height+2*r),n.intersect=function(t){return p({x:n.x,y:n.y,width:n.width,height:n.height+2*r},t)},i}var S={box:function(t,e){return w(new x(t),e,e).node()},roundedbox:function(t,e){return w(new x(t),e,e,!0).node()},component:function(t,e){return function(t,e,n){var r=n.width/10,o=t.insert("g",":first-child");return o.insert("rect",":first-child").attr("rx",3).attr("ry",3).attr("x",-n.width/2-r).attr("y",-n.height/2+r).attr("width",2*r).attr("height",r),o.insert("rect",":first-child").attr("rx",3).attr("ry",3).attr("x",-n.width/2-r).attr("y",-n.height/2+2.5*r).attr("width",2*r).attr("height",r),o.insert("rect",":first-child").attr("rx",3).attr("ry",3).attr("x",-n.width/2).attr("y",-n.height/2).attr("width",n.width).attr("height",n.height),n.intersect=function(t){return p({x:n.x-r/2,y:n.y,width:n.width+r,height:n.height},t)},o}(new x(t),0,e).node()},cylinder:function(t,e){return function(t,e,n){var r=e.width,o=r/2,i=o/(5.5+r/70),a=e.height,c="M 0,".concat(i," a").concat(o,",").concat(i," 0,0,0 ").concat(r," 0 a ").concat(o,",").concat(i," 0,0,0 ").concat(-r," 0 l 0,").concat(a-2*i," a ").concat(o,",").concat(i," 0,0,0 ").concat(r," 0 l 0,").concat(2*i-a),l=t.attr("label-offset-y",2*i).insert("path",":first-child").attr("d",c).attr("transform","translate("+-r/2+","+-a/2+")");return n.intersect=function(t){var e=p(n,t),r=n.y+n.height/2-i;return e.y>r?g({x:n.x,y:r},o,i,n,t):(r=n.y-n.height/2+i,e.y<r?g({x:n.x,y:r},o,i,n,t):e)},l}(new x(t),e,e).node()},person:function(t,e){return function(t,e,n){var r=e.width,o=e.height,i="M ".concat(.38*r,",").concat(o/3," A").concat(r/2,",").concat(o/2," 0,0,0 0 ").concat(o/2,"\n\t\tL").concat(r/11,",").concat(o," L").concat(r-r/11,",").concat(o," L").concat(r,",").concat(o/2,"\n\t\tA").concat(r/2,",").concat(o/2," 0,0,0 ").concat(r-.38*r," ").concat(o/3," \n\t\tA").concat(r/6,",").concat(r/6," 0,1,0 ").concat(.38*r," ").concat(o/3),a=t.attr("label-offset-y",.4*o).insert("path",":first-child").attr("d",i).attr("transform","translate("+-r/2+","+-o/2+")");return n.intersect=function(t){return p(n,t)},a}(new x(t),e,e).node()},circle:function(t,e){return function(t,e,n){return E(t,0,n,n.width/2,n.width/2)}(new x(t),0,e).node()},ellipse:function(t,e){return function(t,e,n){return E(t,0,n,.55*n.width,.45*n.width)}(new x(t),0,e).node()},hexagon:function(t,e){return function(t,e,n){var r=n.width/2,o=t.insert("polygon",":first-child").attr("points",[.5,.866,1,0,.5,-.866,-.5,-.866,-1,-0,-.5,.866,.5,.866].map(function(t){return t*r}).join(",")).attr("width",n.width).attr("height",n.height);return n.intersect=function(t){return g(n,n.width/2,n.width/2,n,t)},o}(new x(t),0,e).node()},folder:function(t,e){return function(t,e,n){var r=n.width/20,o=t.attr("label-offset-y",2*r).insert("g",":first-child");return o.insert("rect",":first-child").attr("rx",3).attr("ry",3).attr("x",-n.width/2).attr("y",-n.height/2+2*r).attr("width",n.width).attr("height",n.height-2*r),o.insert("path",":first-child").attr("d","M0,".concat(-n.height/2+2*r," l").concat(r,",").concat(-2*r," h").concat(n.width/2-2*r," v").concat(2*r)),n.intersect=function(t){return p({x:n.x,y:n.y+r/2,width:n.width,height:n.height+r},t)},o}(new x(t),0,e).node()},mobiledevicelandscape:function(t,e){return function(t,e,n){var r=n.width/8,o=n.width/14,i=t.insert("g",":first-child");return i.insert("path",":first-child").attr("d","M".concat(-n.width/2,",").concat(-n.height/2," l0,").concat(n.height," M").concat(n.width/2,",").concat(-n.height/2," l0,").concat(n.height)),i.insert("circle",":first-child").attr("cx",-n.width/2-r/2).attr("cy",0).attr("r",.4*o),i.insert("rect",":first-child").attr("x",n.width/2+r/2-.2*o).attr("y",-o).attr("width",.4*o).attr("height",2*o),i.insert("rect",":first-child").attr("rx",o).attr("ry",o).attr("x",-e.width/2-r).attr("y",-e.height/2).attr("width",e.width+2*r).attr("height",e.height),n.intersect=function(t){return p({x:n.x,y:n.y,width:n.width+2*r,height:n.height},t)},i}(new x(t),e,e).node()},mobiledeviceportrait:function(t,e){return C(new x(t),e,e).node()},mobiledevice:function(t,e){return C(new x(t),e,e).node()},pipe:function(t,e){return function(t,e,n){var r=n.width,o=n.height,i=o/2,a=i/(2.5+r/70),c="M".concat(-a,",0\n\t\ta").concat(a,",").concat(i," 0,0,1 0,").concat(o,"\n\t\ta").concat(a,",").concat(i," 0,0,1 0,").concat(-o,"\n\t\tl").concat(r,",0\n\t\ta").concat(a,",").concat(i," 0,0,1 0,").concat(o,"\n\t\tl").concat(-r,",0"),l=t.insert("path",":first-child").attr("d",c).attr("transform","translate("+-r/2+","+-o/2+")");return n.intersect=function(t){return p({x:n.x-a,y:n.y,width:n.width+2*a,height:n.height},t)},l}(new x(t),0,e).node()},robot:function(t,e){return function(t,e,n){var r=.45*n.width,o=n.width/16,i=r/2-o,a=t.attr("label-offset-y",r).insert("g",":first-child").attr("transform","translate(0,"+r/4+")");return a.insert("rect",":first-child").attr("rx",o).attr("ry",o).attr("x",-r/2).attr("y",-n.height/2-r/2).attr("width",r).attr("height",r),a.insert("path",":first-child").attr("d","\n\t\t\tM".concat(-r/2,",").concat(-n.height/2+o/2," h-20 v-40 h20\n\t\t\tM").concat(r/2,",").concat(-n.height/2+o/2," h20 v-40 h-20\n\t\t")),a.insert("rect",":first-child").attr("rx",o).attr("ry",o).attr("x",-n.width/2).attr("y",-n.height/2+i).attr("width",n.width).attr("height",n.height-i),n.intersect=function(t){return p({x:n.x,y:n.y,width:n.width,height:n.height+r/2},t)},a}(new x(t),0,e).node()},webbrowser:function(t,e){return function(t,e,n){var r=n.height/8,o=t.attr("label-offset-y",r).insert("g",":first-child");return o.insert("path",":first-child").attr("d","\n\t\t\tM".concat(-n.width/2,",").concat(-n.height/2+r," h").concat(n.width,"\n\t\t\tM").concat(-n.width/2+r/4,",").concat(-n.height/2+r/4," h").concat(r/2," v").concat(r/2," h").concat(-r/2," z\n\t\t\tM").concat(-n.width/2+r,",").concat(-n.height/2+r/4," h").concat(n.width-r-r/4," v").concat(r/2," h").concat(-n.width+r+r/4," z\n\t\t")),o.insert("rect",":first-child").attr("rx",3).attr("ry",3).attr("x",-n.width/2).attr("y",-n.height/2).attr("width",n.width).attr("height",n.height),n.intersect=function(t){return p(n,t)},o}(new x(t),0,e).node()}};function k(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return I(s,"_invoke",function(n,r,o){var i,c,l,s=0,u=o||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,l=t,f.n=n,a}};function h(n,r){for(c=n,l=r,e=0;!d&&s&&!o&&e<u.length;e++){var o,i=u[e],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,c=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,p){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),c=u,l=p;(e=c<2?t:l)||!d;){i||(c?c<3?(c>1&&(f.n=-1),h(c,l)):f.n=l:f.v=l);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(e){i=t,c=1,l=e}finally{s=1}}return{value:e,done:d}}}(n,o,i),!0),s}var a={};function c(){}function l(){}function s(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(I(e={},r,function(){return this}),e),d=s.prototype=c.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,I(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=s,I(d,"constructor",s),I(s,"constructor",l),l.displayName="GeneratorFunction",I(s,o,"GeneratorFunction"),I(d),I(d,o,"Generator"),I(d,r,function(){return this}),I(d,"toString",function(){return"[object Generator]"}),(k=function(){return{w:i,m:f}})()}function I(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}I=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){I(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},I(t,e,n,r)}function B(t){return function(t){if(Array.isArray(t))return O(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return O(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function M(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function _(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o={nodeSpacing:null!==(t=n.nodeSpacing)&&void 0!==t?t:80,layerSpacing:null!==(e=n.layerSpacing)&&void 0!==e?e:100,componentSpacing:40,padding:50,groupMultiplier:.6};return r&&(o.nodeSpacing=Math.max(o.nodeSpacing*o.groupMultiplier,20),o.layerSpacing=Math.max(o.layerSpacing*o.groupMultiplier,25),o.componentSpacing=Math.max(o.componentSpacing*o.groupMultiplier,15),o.padding=Math.max(o.padding*o.groupMultiplier,15)),o}function T(t,e){var n=e.direction,r=void 0===n?"DOWN":n,o=e.compactLayout,i=void 0===o||o,a={"elk.algorithm":"layered","elk.direction":r,"elk.spacing.nodeNode":t.nodeSpacing.toString(),"elk.spacing.componentComponent":t.componentSpacing.toString(),"elk.padding":"[top=".concat(t.padding,",left=").concat(t.padding,",bottom=").concat(t.padding,",right=").concat(t.padding,"]"),"elk.layered.spacing.nodeNodeBetweenLayers":t.layerSpacing.toString(),"elk.layered.spacing.edgeNodeBetweenLayers":"40","elk.edgeRouting":"POLYLINE","elk.layered.edgeRouting.selfLoopDistribution":"EQUALLY","elk.layered.edgeRouting.selfLoopOrdering":"STACKED","elk.layered.nodePlacement.favorStraightEdges":"true","elk.layered.nodePlacement.linearSegmentsDeflectionDampening":"0.3","elk.layered.nodePlacement.strategy":"NETWORK_SIMPLEX","elk.layered.cycleBreaking.strategy":"GREEDY","elk.layered.crossingMinimization.strategy":"LAYER_SWEEP"};return i&&(a["elk.layered.compaction.postCompaction.strategy"]="EDGE_LENGTH",a["elk.layered.compaction.connectedComponents"]="true"),a}function j(t){return D.apply(this,arguments)}function D(){var t;return t=k().m(function t(e){var r,o,i,a,c,l,s,u,d,f,h,p,g,m,y,A,v,b,x=arguments;return k().w(function(t){for(;;)switch(t.p=t.n){case 0:return r=x.length>1&&void 0!==x[1]?x[1]:{},t.n=1,n.e(726).then(n.t.bind(n,954,23)).then(function(t){return t.default});case 1:return o=t.v,i=new o,a=_(r,!1),c={id:"root",layoutOptions:T(a,r),children:[],edges:[]},l=new Map,e.nodesMap.forEach(function(t){l.set(t.id,t),c.children.push({id:t.id,width:t.width,height:t.height})}),s=new Set,u=new Map,e.groupsMap.forEach(function(t){if(!s.has(t.id)){s.add(t.id);var e=_(r,!0),n={id:t.id,children:[],edges:[],layoutOptions:T(e,r)};t.nodes.forEach(function(e){if(!P(e)){u.set(e.id,t.id);var r=c.children.findIndex(function(t){return t.id===e.id});if(r>=0){var o=c.children.splice(r,1)[0];n.children.push(o)}}}),n.children.length>0&&c.children.push(n)}}),e.edges.forEach(function(t){var e,n=u.get(t.from.id),r=u.get(t.to.id),o={id:t.id,sources:[t.from.id],targets:[t.to.id],sections:null!==(e=t.vertices)&&void 0!==e&&e.length?[{startPoint:{x:t.vertices[0].x,y:t.vertices[0].y},endPoint:{x:t.vertices[t.vertices.length-1].x,y:t.vertices[t.vertices.length-1].y},bendPoints:t.vertices.slice(1,-1).map(function(t){return{x:t.x,y:t.y}})}]:void 0};if(n&&r&&n===r){var i=c.children.find(function(t){return t.id===n});i&&i.edges.push(o)}else c.edges.push(o)}),t.p=2,t.n=3,i.layout(c);case 3:return d=t.v,f=[],h=[],p=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;null===(e=t.children)||void 0===e||e.forEach(function(t){t.children?p(t,n+(t.x||0),r+(t.y||0)):f.push({id:t.id,x:n+(t.x||0)+(t.width||0)/2,y:r+(t.y||0)+(t.height||0)/2})})},g=function(t){var e,n;null===(e=t.edges)||void 0===e||e.forEach(function(t){var e,n=[];if(t.sections&&t.sections.length>0){var r=t.sections[0];if(r.startPoint&&n.push({x:r.startPoint.x,y:r.startPoint.y}),r.bendPoints&&r.bendPoints.forEach(function(t){n.push({x:t.x,y:t.y})}),r.endPoint&&n.push({x:r.endPoint.x,y:r.endPoint.y}),n.length>=2){var o=Math.floor(n.length/2);if(n.length%2==0){var i=n[o-1],a=n[o];e={x:(i.x+a.x)/2,y:(i.y+a.y)/2}}else e=n[o]}}h.push({id:t.id,vertices:n,label:e})}),null===(n=t.children)||void 0===n||n.forEach(function(t){t.edges&&g(t)})},p(d),g(d),f.length>0&&(m=Math.min.apply(Math,B(f.map(function(t){return t.x}))),y=Math.min.apply(Math,B(f.map(function(t){return t.y}))),A=50-m,v=50-y,f.forEach(function(t){t.x+=A,t.y+=v}),h.forEach(function(t){t.vertices.forEach(function(t){t.x+=A,t.y+=v}),t.label&&(t.label.x+=A,t.label.y+=v)})),t.a(2,{nodes:f,edges:h});case 4:return t.p=4,b=t.v,console.warn("ELK layout failed, using fallback:",b),t.a(2,L(e))}},t,null,[[2,4]])}),D=function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){M(i,r,o,a,c,"next",t)}function c(t){M(i,r,o,a,c,"throw",t)}a(void 0)})},D.apply(this,arguments)}function L(t){var e=[],n=[],r=0,o=0,i=Math.ceil(Math.sqrt(t.nodesMap.size)),a=0;return t.nodesMap.forEach(function(t){e.push({id:t.id,x:r,y:o}),++a>=i?(a=0,r=0,o+=300):r+=300}),t.edges.forEach(function(t){n.push({id:t.id,vertices:[]})}),{nodes:e,edges:n}}function P(t){return"nodes"in t}function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z(r.key),r)}}function G(t,e,n){return(e=z(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z(t){var e=function(t){if("object"!=N(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==N(e)?e:e+""}var R=function(){return t=function t(e,n,r){var o,i,a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),G(this,"versions",[]),G(this,"pos",0),G(this,"lastSavedPos",0),G(this,"tmpPreviousState",null),this.exportDoc=n,this.importDoc=r,this.change=(o=function(){return a.saveNow()},function(){var t=this;clearTimeout(i),i=setTimeout(function(){i=null,o.apply(t)},300)})},(e=[{key:"beforeChange",value:function(){this.tmpPreviousState||(this.tmpPreviousState=this.deepClone(this.exportDoc()))}},{key:"length",value:function(){return this.versions.length}},{key:"currentState",value:function(){return this.deepClone(this.versions[this.pos-1])}},{key:"saveNow",value:function(){if(!this.tmpPreviousState)throw Error("undo.change() was called without previously calling undo.beforeChange()!");this.versions[this.pos]=this.deepClone(this.exportDoc()),this.versions[this.pos-1]=this.tmpPreviousState,this.tmpPreviousState=null,this.pos+=1,this.versions.splice(this.pos)}},{key:"deepClone",value:function(t){return"undefined"!=typeof structuredClone?structuredClone(t):JSON.parse(JSON.stringify(t))}},{key:"undo",value:function(){if(!(this.pos<2)){this.pos-=1;var t=this.versions[this.pos-1];this.importDoc(this.deepClone(t))}}},{key:"redo",value:function(){if(!(this.pos>this.versions.length-1)){var t=this.versions[this.pos];this.importDoc(this.deepClone(t)),this.pos+=1}}},{key:"changed",value:function(){return this.pos!==this.lastSavedPos}},{key:"setSaved",value:function(){this.lastSavedPos=this.pos}}])&&V(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),F=n(344),U=20,W=function(t,e){Object.keys(e).forEach(function(n){var r=e[n];"number"==typeof r?t.style.setProperty(n,r.toString()):t.style.setProperty(n,r)})},q=function(t,e){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))};function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function Y(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return Z(s,"_invoke",function(n,r,o){var i,c,l,s=0,u=o||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,l=t,f.n=n,a}};function h(n,r){for(c=n,l=r,e=0;!d&&s&&!o&&e<u.length;e++){var o,i=u[e],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,c=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,p){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),c=u,l=p;(e=c<2?t:l)||!d;){i||(c?c<3?(c>1&&(f.n=-1),h(c,l)):f.n=l:f.v=l);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(e){i=t,c=1,l=e}finally{s=1}}return{value:e,done:d}}}(n,o,i),!0),s}var a={};function c(){}function l(){}function s(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(Z(e={},r,function(){return this}),e),d=s.prototype=c.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Z(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=s,Z(d,"constructor",s),Z(s,"constructor",l),l.displayName="GeneratorFunction",Z(s,o,"GeneratorFunction"),Z(d),Z(d,o,"Generator"),Z(d,r,function(){return this}),Z(d,"toString",function(){return"[object Generator]"}),(Y=function(){return{w:i,m:f}})()}function Z(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Z=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Z(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},Z(t,e,n,r)}function X(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function K(t){return function(t){if(Array.isArray(t))return Q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||J(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||J(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){if(t){if("string"==typeof t)return Q(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach(function(e){rt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ot(r.key),r)}}function rt(t,e,n){return(e=ot(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ot(t){var e=function(t){if("object"!=H(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==H(e)?e:e+""}var it,at={thickness:3,color:"#999",opacity:1,fontSize:22,dashed:!0},ct={width:280,height:180,background:"rgba(255, 255, 255, .9)",color:"#666",opacity:.9,stroke:"#999",fontSize:22,shape:"Box"},lt=function(){return t=function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),rt(this,"_gridVisible",!0),rt(this,"_snapToGrid",!0),rt(this,"_gridSize",25),rt(this,"_skipAutoFit",!1),this.id=e,this.name=n,this.edges=[],this.edgeVertices=new Map,this.nodesMap=new Map,this.groupsMap=new Map,this._undo=new R(this.id,function(){return r.exportLayout(!0)},function(t){return r.importLayout(t,!0)}),window.graph=this},e=[{key:"init",value:function(t){var e=this;t&&this.importLayout(t),this._undo=new R(this.id,function(){return e.exportLayout(!0)},function(t){return e.importLayout(t,!0)}),this._undo.length()&&this.importLayout(this._undo.currentState())}},{key:"addNode",value:function(t,e,n,r,o){if(this.nodesMap.has(t))throw Error("duplicate node: "+t);var i,a,c=o.shape||"Box",l="person"===c.toLowerCase();c.toLowerCase(),l?(i=200,a=240):(i=280,a=180);var s=et({},o);delete s.width,delete s.height;var u={id:t,title:e,sub:n,description:r,style:et(et({},ct),s),x:0,y:0,width:i,height:a,intersect:null};this.nodesMap.set(u.id,u)}},{key:"nodes",value:function(){return Array.from(this.nodesMap.values())}},{key:"addEdge",value:function(t,e,n,r,o,i){var a=this;o&&o.forEach(function(e,n){var r=e;r.id="v-".concat(t,"-").concat(n),a.edgeVertices.set(r.id,r)});var c={id:t,from:this.nodesMap.get(e),to:this.nodesMap.get(n),label:r,vertices:null,style:et(et({},at),i),initVertex:function(t){var e=t;return e.id||(e.id="v-".concat(Math.round(1e10*Math.random()).toString(36)),a.edgeVertices.set(e.id,e)),e.edge=c,t}};this.edges.push(c),o&&(c.vertices=o.map(function(t){return c.initVertex(t)}))}},{key:"addGroup",value:function(t,e,n,r){var o=this;if(this.groupsMap.has(t))console.error("Group exists: ".concat(t," ").concat(e));else{var i={id:t,name:e,x:null,y:null,width:null,height:null,nodes:n.map(function(n){var r=o.nodesMap.get(n)||o.groupsMap.get(n);return r||console.error("Node or group ".concat(n," not found for group ").concat(t,' "').concat(e,'"')),r}).filter(Boolean),style:r};this.groupsMap.set(t,i)}}},{key:"setNodeSelected",value:function(t,e){t.selected=e,e?t.ref.classList.add("selected"):t.ref.classList.remove("selected"),this.updateEdgesSel()}},{key:"updateEdgesSel",value:function(){this.edges.forEach(function(t){t.to.selected||t.from.selected?t.ref.classList.add("selected"):t.ref.classList.remove("selected")})}},{key:"moveNode",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(t){if(this._snapToGrid&&!r){var i=this.snapToGrid(e,n);e=i.x,n=i.y}t.x==e&&t.y==n||(o||this._undo.beforeChange(),t.x=e,t.y=n,d(t.ref,e,n),this.redrawEdges(t),this.redrawGroups(t),o||this._undo.change())}}},{key:"moveEdgeVertex",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this._snapToGrid&&!r){var i=this.snapToGrid(e,n);e=i.x,n=i.y}t.x==e&&t.y==n||(o||this._undo.beforeChange(),t.x=e,t.y=n,this.redrawEdge(t.edge),o||this._undo.change())}},{key:"moveSelected",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.nodes().forEach(function(o){return o.selected&&n.moveNode(o,o.x+t,o.y+e,r,!1)}),this.edgeVertices.forEach(function(o){return o.selected&&n.moveEdgeVertex(o,o.x+t,o.y+e,r,!1)})}},{key:"insertEdgeVertex",value:function(t,e,n,r){this._undo.beforeChange();var o=t.initVertex(e);o.selected=!0,r&&(t.vertices.forEach(function(t){return t.label=!1}),o.label=!0),t.vertices.splice(n-1,0,o),this.redrawEdge(t),this._undo.change()}},{key:"deleteEdgeVertex",value:function(t){this._undo.beforeChange(),t.auto?t.auto=!0:(t.edge.vertices.splice(t.edge.vertices.indexOf(t),1),this.edgeVertices.delete(t.id)),this.redrawEdge(t.edge),this._undo.change()}},{key:"changed",value:function(){return this._undo.changed()}},{key:"undo",value:function(){this._undo.undo()}},{key:"redo",value:function(){this._undo.redo()}},{key:"alignTopLeft",value:function(){var t=this,e=this.calculateContentBounds(),n=100-e.x,r=100-e.y;this._skipAutoFit=!0,this._undo.beforeChange(),this.nodesMap.forEach(function(e){t.moveNode(e,e.x+n,e.y+r,!0,!0)}),this.edgeVertices.forEach(function(e){t.moveEdgeVertex(e,e.x+n,e.y+r,!0,!0)}),this._undo.change()}},{key:"resetPanTransform",value:function(){var t,e,n,r,o=vt(),i=st.querySelector("g.zoom");i&&(i.setAttribute("transform","scale(".concat(o,") translate(0, 0)")),t=this.calculateContentBounds(),e=vt(),n=Math.max(st.parentElement.clientWidth/e,t.x+t.width+U),r=Math.max(st.parentElement.clientHeight/e,t.y+t.height+U),st.setAttribute("width",String(n*e)),st.setAttribute("height",String(r*e))),Ot(this.id),this._skipAutoFit=!1}},{key:"shouldSkipAutoFit",value:function(){return this._skipAutoFit}},{key:"resetView",value:function(){var t=st.querySelector("g.zoom");t&&(t.setAttribute("transform","scale(1) translate(0, 0)"),Et()),Ot(this.id)}},{key:"redrawEdges",value:function(t){var e=this;this.edges.forEach(function(n){return(t==n.from||t==n.to)&&e.redrawEdge(n)}),this.updateEdgesSel()}},{key:"redrawEdge",value:function(t){var e=t.ref.parentElement;e.removeChild(t.ref),t.ref=ht(this,t),e.append(t.ref)}},{key:"redrawGroups",value:function(t){this.groupsMap.forEach(function(t){var e=t.ref.parentElement;e.removeChild(t.ref),pt(t),e.append(t.ref)})}},{key:"exportSVG",value:function(){var t=document.querySelector("svg#graph"),e=(t.querySelector("rect.elastic"),t.cloneNode(!0)),n=e.querySelector("rect.elastic");n&&n.remove();var r=this.calculateContentBounds(),o=r.width+100,i=r.height+100,a=50-r.x,c=50-r.y,l=e.querySelector("g.zoom");l&&l.setAttribute("transform","scale(1) translate(".concat(a,", ").concat(c,")")),e.setAttribute("viewBox","0 0 ".concat(o," ").concat(i)),e.setAttribute("width",String(o)),e.setAttribute("height",String(i)),e.setAttribute("xmlns","http://www.w3.org/2000/svg");var s=document.createElement("script");return s.setAttribute("type","application/json"),this.metadata.layout=this.exportLayout(),s.append("<![CDATA["+JSON.stringify(this.metadata,null,2).replace(/]]>/g,"]]]>]><![CDATA[")+"]]>"),e.insertBefore(s,e.firstChild),e.outerHTML}},{key:"calculateContentBounds",value:function(){var t=1/0,e=1/0,n=-1/0,r=-1/0;return this.nodes().forEach(function(o){var i=o.x-o.width/2,a=o.x+o.width/2,c=o.y-o.height/2,l=o.y+o.height/2;t=Math.min(t,i),n=Math.max(n,a),e=Math.min(e,c),r=Math.max(r,l)}),this.edgeVertices.forEach(function(o){t=Math.min(t,o.x-5),n=Math.max(n,o.x+5),e=Math.min(e,o.y-5),r=Math.max(r,o.y+5)}),this.groupsMap.forEach(function(o){var i=o.x-o.width/2,a=o.x+o.width/2,c=o.y-o.height/2,l=o.y+o.height/2;t=Math.min(t,i),n=Math.max(n,a),e=Math.min(e,c),r=Math.max(r,l)}),this.edges.forEach(function(o){if(t=Math.min(t,o.from.x-10,o.to.x-10),n=Math.max(n,o.from.x+10,o.to.x+10),e=Math.min(e,o.from.y-10,o.to.y-10),r=Math.max(r,o.from.y+10,o.to.y+10),o.vertices&&o.vertices.forEach(function(o){t=Math.min(t,o.x-10),n=Math.max(n,o.x+10),e=Math.min(e,o.y-10),r=Math.max(r,o.y+10)}),o.label&&o.label.trim()){var i=(o.from.x+o.to.x)/2,a=(o.from.y+o.to.y)/2,c=10*o.label.length+50;t=Math.min(t,i-c),n=Math.max(n,i+c),e=Math.min(e,a-25),r=Math.max(r,a+25)}}),t===1/0?{x:0,y:0,width:100,height:100}:{x:t,y:e,width:n-t,height:r-e}}},{key:"exportLayout",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={};return this.nodes().forEach(function(t){return e[t.id]={x:t.x,y:t.y}}),this.edges.forEach(function(n){if(n.vertices){var r=n.vertices.filter(function(t){return!t.auto}).map(function(t){return{x:t.x,y:t.y,label:t.label}});(r.length||t)&&(e["e-".concat(n.id)]=r)}}),e}},{key:"setSaved",value:function(){this._undo.setSaved()}},{key:"importLayout",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];Object.entries(t).forEach(function(t){var e=$(t,2),n=e[0],o=e[1];n.startsWith("e-")||void 0===o.x||void 0===o.y?n.startsWith("e-")&&Array.isArray(o)&&o.forEach(function(t){void 0!==t.x&&void 0!==t.y&&r.push({x:t.x,y:t.y})}):r.push({x:o.x,y:o.y})});var o=0,i=0;if(r.length>0){var a=Math.min.apply(Math,K(r.map(function(t){return t.x}))),c=Math.min.apply(Math,K(r.map(function(t){return t.y})));(a<-100||c<-100||Math.max.apply(Math,K(r.map(function(t){return t.x})))>3e3||Math.max.apply(Math,K(r.map(function(t){return t.y})))>2e3)&&(o=50-a,i=50-c)}Object.entries(t).forEach(function(t){var n=$(t,2),r=n[0],a=n[1],c=e.nodesMap.get(r);if(c)c.x=a.x+o,c.y=a.y+i;else if(r.startsWith("e-")){var l=e.edges.find(function(t){return t.id==r.slice(2)});if(!l)return;return l.vertices&&l.vertices.forEach(function(t){return e.edgeVertices.delete(t.id)}),void(l.vertices=a.map(function(t){var e={x:t.x+o,y:t.y+i};return Object.assign(e,t,{x:t.x+o,y:t.y+i}),l.initVertex(e)}))}}),n&&(this.nodes().forEach(function(t){return d(t.ref,t.x,t.y)}),this.edges.forEach(function(t){return e.redrawEdge(t)}),this.updateEdgesSel(),this.redrawGroups(null))}},{key:"autoLayout",value:(n=Y().m(function t(e){var n,r,o=this;return Y().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,j(this,e);case 1:n=t.v,this._undo.beforeChange(),n.nodes.forEach(function(t){var e=o.nodesMap.get(t.id);e&&o.moveNode(e,t.x,t.y,!1,!0)}),this.edgeVertices.clear(),n.edges.forEach(function(t){var e=o.edges.find(function(e){return e.id==t.id});if(e){if(e.vertices=[],t.vertices&&t.vertices.length>0&&(e.vertices=t.vertices.map(function(t){var n=e.initVertex(t);return n.auto=!0,n})),t.label){var n=e.initVertex(t.label);n.label=!0,n.auto=!0,e.vertices.push(n)}o.redrawEdge(e)}}),this.fitToView(),this._undo.change(),t.n=3;break;case 2:t.p=2,r=t.v,console.error("Auto layout failed:",r);case 3:return t.a(2)}},t,this,[[0,2]])}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){X(i,r,o,a,c,"next",t)}function c(t){X(i,r,o,a,c,"throw",t)}a(void 0)})},function(t){return r.apply(this,arguments)})},{key:"alignSelectionV",value:function(){var t=this,e=this.nodes().filter(function(t){return t.selected});e.push.apply(e,K(Array.from(this.edgeVertices.values()).filter(function(t){return t.selected})));var n=Math.min.apply(Math,K(e.map(function(t){return t.y})));this.nodesMap.forEach(function(e){return e.selected&&t.moveNode(e,e.x,n,!1,!1)}),this.edgeVertices.forEach(function(e){return e.selected&&t.moveEdgeVertex(e,e.x,n,!1,!1)})}},{key:"alignSelectionH",value:function(){var t=this,e=this.nodes().filter(function(t){return t.selected});e.push.apply(e,K(Array.from(this.edgeVertices.values()).filter(function(t){return t.selected})));var n=Math.min.apply(Math,K(e.map(function(t){return t.x})));this.nodesMap.forEach(function(e){return e.selected&&t.moveNode(e,n,e.y,!1,!1)}),this.edgeVertices.forEach(function(e){return e.selected&&t.moveEdgeVertex(e,n,e.y,!1,!1)})}},{key:"distributeSelectionH",value:function(){var t=this,e=this.nodes().filter(function(t){return t.selected}),n=Array.from(this.edgeVertices.values()).filter(function(t){return t.selected});if(!(e.length+n.length<3)){this._undo.beforeChange();var r=[].concat(K(e),K(n));r.sort(function(t,e){return t.x-e.x});var o=r[0].x,i=(r[r.length-1].x-o)/(r.length-1);r.forEach(function(e,n){var r=o+n*i;"title"in e?t.moveNode(e,r,e.y,!1,!0):t.moveEdgeVertex(e,r,e.y,!1,!0)}),this._undo.change()}}},{key:"distributeSelectionV",value:function(){var t=this,e=this.nodes().filter(function(t){return t.selected}),n=Array.from(this.edgeVertices.values()).filter(function(t){return t.selected});if(!(e.length+n.length<3)){this._undo.beforeChange();var r=[].concat(K(e),K(n));r.sort(function(t,e){return t.y-e.y});var o=r[0].y,i=(r[r.length-1].y-o)/(r.length-1);r.forEach(function(e,n){var r=o+n*i;"title"in e?t.moveNode(e,e.x,r,!1,!0):t.moveEdgeVertex(e,e.x,r,!1,!0)}),this._undo.change()}}},{key:"setEdgeSelected",value:function(t,e){e&&(this.setNodeSelected(t.from,!0),this.setNodeSelected(t.to,!0)),this.updateEdgesSel()}},{key:"fitToView",value:function(){var t,e,n=this.calculateContentBounds();if(0!==n.width&&0!==n.height){var r=(null===(t=st.parentElement)||void 0===t?void 0:t.clientWidth)||800,o=(null===(e=st.parentElement)||void 0===e?void 0:e.clientHeight)||600,i=(r-80)/n.width,a=(o-80)/n.height,c=Math.min(i,a),l=Math.max(Math.min(c,2),.1),s=r/2-(n.x+n.width/2)*l,u=o/2-(n.y+n.height/2)*l,d=st.querySelector("g.zoom");d&&d.setAttribute("transform","translate(".concat(s,", ").concat(u,") scale(").concat(l,")")),Et(),It(this.id)}}},{key:"saveLayoutState",value:function(){return this.exportLayout(!0)}},{key:"restoreLayoutState",value:function(t){this.importLayout(t,!0)}},{key:"isGridVisible",value:function(){return this._gridVisible}},{key:"isSnapToGrid",value:function(){return this._snapToGrid}},{key:"getGridSize",value:function(){return this._gridSize}},{key:"toggleGrid",value:function(){this._gridVisible=!this._gridVisible,this.updateGridDisplay(),window.dispatchEvent(new CustomEvent("gridStateChanged"))}},{key:"toggleSnapToGrid",value:function(){this._snapToGrid=!this._snapToGrid,window.dispatchEvent(new CustomEvent("gridStateChanged"))}},{key:"snapAllToGrid",value:function(){var t=this;this._snapToGrid&&(this._undo.beforeChange(),this.nodes().forEach(function(e){var n=Math.round(e.x/t._gridSize)*t._gridSize,r=Math.round(e.y/t._gridSize)*t._gridSize;t.moveNode(e,n,r,!1,!0)}),this._undo.change())}},{key:"snapToGrid",value:function(t,e){return{x:Math.round(t/this._gridSize)*this._gridSize,y:Math.round(e/this._gridSize)*this._gridSize}}},{key:"updateGridDisplay",value:function(){if(st){var t=st.querySelector("#grid-pattern");t&&t.remove();var e=st.querySelector("#grid-background");if(e&&e.remove(),this._gridVisible){var n=st.querySelector("defs");n||(n=document.createElementNS("http://www.w3.org/2000/svg","defs"),st.insertBefore(n,st.firstChild));var r=document.createElementNS("http://www.w3.org/2000/svg","pattern");r.id="grid-pattern",r.setAttribute("width",this._gridSize.toString()),r.setAttribute("height",this._gridSize.toString()),r.setAttribute("patternUnits","userSpaceOnUse");var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M ".concat(this._gridSize," 0 L 0 0 0 ").concat(this._gridSize)),o.setAttribute("fill","none"),o.setAttribute("stroke","#d0d0d0"),o.setAttribute("stroke-width","1"),o.setAttribute("opacity","0.8"),r.appendChild(o),n.appendChild(r);var i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.id="grid-background",i.setAttribute("x","-10000"),i.setAttribute("y","-10000"),i.setAttribute("width","20000"),i.setAttribute("height","20000"),i.setAttribute("fill","url(#grid-pattern)"),i.setAttribute("pointer-events","none");var a=st.querySelector("g.zoom");a&&a.insertBefore(i,a.firstChild)}}}}],e&&nt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}(),st=document.querySelector("svg#graph");st||((st=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("id","graph"),st.addEventListener("click",function(t){return it(t)})),st.setAttribute("width","100%"),st.setAttribute("height","100%");var ut,dt=function(t,e,n){st.innerHTML='\n<defs>\n\t<marker id="arrow" viewBox="0 0 5 5" refX="4" refY="2.5" \n\t\tmarkerWidth="5" markerHeight="5" orient="auto" markerUnits="strokeWidth">\n\t\t<path fill="#aaa" stroke-width="1" stroke="none" d="M0,0 L5,2.5 L0,5 Z" class="arrowHead"/>\n\t</marker>\n\t<g id="icon-circle" transform="translate(0,-12)" class="icon">\n\t\t<circle cx="7" cy="7" r="7"/>\n\t</g>\n\t<g id="icon-cube" transform="translate(0, -14)" class="icon">\n\t\t<path d="M 5 0 h 10 v 10 l -5 5 h -10 v -10 l 5 -5 M 0 5 h 10 v 10 M 15 0 l -5 5"/>\n\t</g>\n\t<filter id="shadow">\n\t\t<feDropShadow dx="3" dy="3" stdDeviation="5" flood-color="#00000030" flood-opacity="1"></feDropShadow>\n\t</filter>\n</defs>',document.body.append(st),st.__data=t,ut=e,it=function(t){},ft(t);var r=u.rect(300,300,50,50,0,"elastic");return st.append(r),t.updateGridDisplay(),At(st,n),{svg:st,setZoom:bt}},ft=function(t){var e=u.element("g",{},"zoom"),n=u.element("g",{},"nodes"),r=u.element("g",{},"edges"),o=u.element("g",{},"groups");e.append(o,r,n),t.nodesMap.forEach(function(e){!function(t,e){window.gdata=e;var n=t.width,r=(t.height,u.element("g",{},"node"));r.setAttribute("id",t.id),t.selected&&r.classList.add("selected"),d(r,t.x,t.y);var o=t.style.shape||"Box",i=(S[o.toLowerCase()]||S.box)(r,t);i.classList.add("nodeBorder"),W(i,St.nodeBorder),i.setAttribute("fill",t.style.background),i.setAttribute("stroke",t.style.stroke),i.setAttribute("stroke-width","3"),i.setAttribute("opacity",String(t.style.opacity)),Ct(i,t.style.border);var a=u.element("g"),c=Number(r.getAttribute("label-offset-y"))||0,l=Math.max(n-24,80),s=t.style.fontSize,f=u.textArea(t.title,.95*l,s,!0,0,c,"middle"),h=f.txt,p=f.dy;W(h,St.nodeText),h.setAttribute("fill",t.style.color),h.setAttribute("data-field","name"),a.append(h),c+=p+6;var g=u.text("[".concat(t.sub,"]"),{x:0,y:c,"text-anchor":"middle"});W(g,St.nodeText),g.setAttribute("fill",t.style.color),g.setAttribute("font-size",String(.75*t.style.fontSize)),a.append(g),c+=12,c+=6;var m=Math.min(.8*t.style.fontSize,16),y=u.textArea(t.description,.95*l,m,!1,0,c,"middle"),A=y.txt,v=y.dy;W(A,St.nodeText),A.setAttribute("fill",t.style.color),A.setAttribute("data-field","description"),a.append(A),d(a,0,-(c+=v)/2),r.append(a),r.__data=t,t.ref=r}(e,t),n.append(e.ref)}),t.edges.forEach(function(e){ht(t,e),r.append(e.ref)}),t.groupsMap.forEach(function(t){pt(t),o.append(t.ref)}),st.append(e)};function ht(t,e){var n=e.from,r=e.to,o=u.element("g",{},"edge");o.setAttribute("id",e.id),o.setAttribute("data-from",e.from.id),o.setAttribute("data-to",e.to.id);var i=(e.style.position||50)/100,a=function(t,e){var n=t.from,r=t.to,o=t.vertices?t.vertices.concat():[],i=o;if(i.forEach(function(t){return t.auto&&e.edgeVertices.delete(t.id)}),o=i.filter(function(t){return!t.auto}),0==o.length){var a=e.edges.filter(function(e){return e.from==t.from&&e.to==t.to}),c=0;if(a.length>1){c=a.indexOf(t)-(a.length-1)/2;var l=0,s=0;Math.abs(n.x-r.x)>Math.abs(n.y-r.y)?s=70*c:l=200*c;var u=t.initVertex({x:(n.x+r.x)/2+l,y:(n.y+r.y)/2+s});u.label=!0,u.auto=!0,o.push(u)}}return o.unshift(n),o.push(r),o[0]=n.intersect(o[1]),o[o.length-1]=r.intersect(o[o.length-2]),o}(e,t),c=function(t,e,n){var r=t.find(function(t){return t.label});if(!r){for(var o=0,i=1;i<t.length;i++)o+=q(t[i-1],t[i]);r={x:n.x,y:n.y};for(var a=0,c=1;c<t.length;c++){var l=q(t[c-1],t[c]);if(a+l>o*e){var s=(o*e-a)/l;r={x:t[c-1].x+(t[c].x-t[c-1].x)*s,y:t[c-1].y+(t[c].y-t[c-1].y)*s};break}a+=l}}return r}(a,i,n),l=function(t,e){var n=e.style.fontSize,r=u.textArea(e.label,200,n,!1,t.x,t.y,"middle"),o=r.txt,i=r.dy,a=r.maxW;i-=n/2,o.setAttribute("y",String(t.y-i/2)),a+=n,W(o,St.edgeText),o.setAttribute("stroke","none"),o.setAttribute("font-size",String(e.style.fontSize)),o.setAttribute("fill",e.style.color);var c={x:t.x-a/2,y:t.y-i/2,width:a,height:i},l=u.rect(c.width,c.height,c.x,c.y);return W(l,St.edgeRect),o.setAttribute("data-field","label"),c.x+=c.width/2,c.y+=c.height/2,{bg:l,txt:o,bbox:c}}(c,e),s=l.bg,d=l.txt,p=l.bbox;o.append(s,d);var g=function(t,e,n,r){for(var o,i=[],a=1;a<t.length;a++)i.push({p:t[a-1],q:t[a]});if(function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(f(r.p,e))f(r.q,e)?(t.splice(n,1),n-=1):r.p=h(r.p,r.q,e)[0];else if(f(r.q,e))r.q=h(r.p,r.q,e)[0];else{var o=h(r.p,r.q,e);if(2==o.length){Math.abs(o[0].x-r.p.x)+Math.abs(o[0].y-r.p.y)>Math.abs(o[1].x-r.p.x)+Math.abs(o[1].y-r.p.y)&&o.reverse();var i={p:o[1],q:r.q};r.q=o[0],t.splice(n+1,0,i),n+=1}}}}(i,e),i.length>0){o="M".concat(i[0].p.x,",").concat(i[0].p.y);for(var c=0;c<i.length;c++){var l=i[c];o+=" L".concat(l.q.x,",").concat(l.q.y)}}else o="M".concat(n.x,",").concat(n.y," L").concat(r.x,",").concat(r.y);return{segments:i,path:o}}(a,p,n,r),m=(g.segments,g.path),y=u.path(m,{"marker-end":"url(#arrow)"},"edge");return y.setAttribute("fill","none"),y.setAttribute("stroke",e.style.color),y.setAttribute("stroke-width",String(e.style.thickness)),y.setAttribute("stroke-linecap","round"),e.style.dashed&&y.setAttribute("stroke-dasharray","8"),o.append(y),e.vertices=a.slice(1,-1).map(function(t){return e.initVertex(t)}),e.vertices.forEach(function(t,e){var n=t;n.ref=u.element("circle",{id:n.id,cx:t.x,cy:t.y,r:7,fill:"none"},"v-dot"),n.selected&&n.ref.classList.add("selected"),n.auto&&n.ref.classList.add("auto"),o.append(n.ref)}),e.ref=o,o}function pt(t){if(0!=t.nodes.length){var e=u.element("g",{},"group"),n={x:1e100,y:1e100},r={x:0,y:0};t.nodes.forEach(function(t){var e={x:t.x-t.width/2,y:t.y-t.height/2,width:t.width,height:t.height};n.x=Math.min(n.x,e.x),n.y=Math.min(n.y,e.y),r.x=Math.max(r.x,e.x+e.width),r.y=Math.max(r.y,e.y+e.height)});var o=Math.max(r.x-n.x,200),i=r.y-n.y+37.5,a={x:n.x-25,y:n.y-25,width:o+50,height:i+50},c=u.rect(a.width,a.height,a.x,a.y);t.x=a.x+a.width/2,t.y=a.y+a.height/2,t.width=a.width,t.height=a.height,W(c,St.groupRect),t.style.stroke&&c.setAttribute("stroke",t.style.stroke),t.style.background&&c.setAttribute("fill",t.style.background);var l=u.text(t.name,{x:n.x,y:a.y+a.height-St.groupText["font-size"]});W(l,St.groupText),t.style.color&&l.setAttribute("fill",t.style.color),e.append(c,l),t.ref=e}}function gt(t,e){var n={dst:Number.POSITIVE_INFINITY,pos:-1,edge:null,prj:null};return t.edges.forEach(function(t){for(var r=t.vertices||[],o=[t.from].concat(K(r),[t.to]),i=1;i<o.length;i++){var a=m(e,o[i-1],o[i]),c=y(e,a);c>50||c<n.dst&&(n={dst:c,pos:i,prj:a,edge:t})}}),n.edge?n:null}function mt(t){var e=st.getBoundingClientRect(),n=vt(),r=wt();return{x:(t.clientX-e.x-r.x)/n,y:(t.clientY-e.y-r.y)/n}}function yt(t,e,n){var r=[],o=null,i=!1,a={x:0,y:0},c=null,l=!1,s=[];return function(u){var d=null;function f(t){return"changedTouches"in t&&t.changedTouches?t.changedTouches[0]:t}function h(n){d&&function(n,s,u){if(!l&&(Math.abs(s)>3||Math.abs(u)>3)&&(l=!0,c)){var d=e.getSelection();d.length=0,d.push(c.node),e.setSelection(d),r=[{x:c.node.x,y:c.node.y,n:c.node}],c=null}if(i)!function(e,n){var r=t.querySelector("g.zoom");if(r){var o=vt();r.setAttribute("transform","translate(".concat(e,", ").concat(n,") scale(").concat(o,")"))}}(a.x+s,a.y+u);else if(r.length>0&&l){var f=e.getZoom(),h=s/f,p=u/f;r.forEach(function(t){e.moveNode(t.n,t.x+h,t.y+p)}),e.setDragging(!0)}else o&&(o.update(n),e.setDragging(!0))}(n=f(n),n.clientX-d.ex,n.clientY-d.ey)}function p(n){document.removeEventListener("touchmove",h),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",p),document.removeEventListener("touchend",p),function(n){if(e.setDragging(!1),c&&!l){var a=e.getSelection();a.length=0,a.push(c.node),e.setSelection(a)}if(o){var s=o.end();s?e.boxSelection(s,n.shiftKey):r.length||e.setSelection([]),o=null}if(i&&l){var u=t.__data;u&&u.id&&It(u.id)}c=null,l=!1,i=!1,e.updatePanning()}(f(n)),d=null}function g(s){s=f(s),d={ex:s.clientX,ey:s.clientY},function(s){s.preventDefault(),l=!1,c=null;var u=e.nodeFromEvent(s);if(u){i=!1,o=null;var d=e.getSelection();if(s.shiftKey){if(e.isSelected(u)){var f=d.findIndex(function(t){return t.id===u.id});f>=0&&d.splice(f,1)}else d.push(u);e.setSelection(d),r=d.map(function(t){return{x:t.x,y:t.y,n:t}})}else e.isSelected(u)&&d.length>1?r=d.map(function(t){return{x:t.x,y:t.y,n:t}}):(e.isSelected(u)||(c={node:u,shiftKey:s.shiftKey}),r=[{x:u.x,y:u.y,n:u}])}else"pan"===n?(i=!0,o=null,s.clientX,s.clientY,a=function(){var e=t.querySelector("g.zoom");if(!e)return{x:0,y:0};var n=(e.getAttribute("transform")||"").match(/translate\(([^,]+),([^)]+)\)/);return n?{x:parseFloat(n[1])||0,y:parseFloat(n[2])||0}:{x:0,y:0}}(),r=[],e.setSelection([])):(i=!1,o=function(){var e=0,n=0,r=null;return{ini:function(o){var i=mt(o);e=i.x,n=i.y,(r=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("fill","rgba(0, 100, 255, 0.1)"),r.setAttribute("stroke","rgba(0, 100, 255, 0.5)"),r.setAttribute("stroke-width","1"),r.setAttribute("stroke-dasharray","3,3"),r.setAttribute("x",String(e)),r.setAttribute("y",String(n)),r.setAttribute("width","0"),r.setAttribute("height","0");var a=t.querySelector("g.zoom");a?a.appendChild(r):t.appendChild(r)},update:function(t){if(r){var o=mt(t),i=o.x,a=o.y,c=Math.min(e,i),l=Math.min(n,a),s=Math.abs(i-e),u=Math.abs(a-n);r.setAttribute("x",String(c)),r.setAttribute("y",String(l)),r.setAttribute("width",String(s)),r.setAttribute("height",String(u))}},end:function(){if(!r)return null;var t=parseFloat(r.getAttribute("x")||"0"),e=parseFloat(r.getAttribute("y")||"0"),n=parseFloat(r.getAttribute("width")||"0"),o=parseFloat(r.getAttribute("height")||"0");return r.remove(),r=null,n>5&&o>5?{x:t,y:e,width:n,height:o,left:t,top:e,right:t+n,bottom:e+o}:null}}}(),o&&o.ini(s),r=[])}(s),document.addEventListener("touchmove",h),document.addEventListener("mousemove",h),document.addEventListener("mouseup",p),document.addEventListener("touchend",p)}u.addEventListener("mousedown",g),u.addEventListener("touchstart",g),s.push({element:u,event:"mousedown",handler:g},{element:u,event:"touchstart",handler:g})}(t),function(){s.forEach(function(t){var e=t.element,n=t.event,r=t.handler;e.removeEventListener(n,r)})}}function At(t,e){var n=t.__cursorInteractionCleanup;function r(t){return t.__data}n&&n();var o=function(){return r(t)},i=[],a=function(t){o().changed()&&(t.preventDefault(),t.returnValue="")};function c(e,n){e.selected=n;var r=t.querySelector("#"+e.id);e.selected?r.classList.add("selected"):r.classList.remove("selected")}window.addEventListener("beforeunload",a),i.push({element:window,event:"beforeunload",handler:a});var l=function(e){if(e.altKey){var n=gt(o(),mt(e));if(n){var r=n.prj,i=t.querySelector("g.edges"),a=i.querySelector("#prj");a||(a=u.element("circle",{id:"prj",cx:r.x,cy:r.y,r:7}),i.append(a)),a.setAttribute("cx",String(r.x)),a.setAttribute("cy",String(r.y))}else d()}};t.addEventListener("mousemove",l),i.push({element:t,event:"mousemove",handler:l});var s=function(t){var e=(0,F.findShortcut)(t,!0);e!=F.ADD_VERTEX&&e!=F.ADD_LABEL_VERTEX&&d()};function d(){var e=t.querySelector("g.edges #prj");e&&e.parentElement.removeChild(e)}window.addEventListener("keyup",s),i.push({element:window,event:"keyup",handler:s});var h=function(t){var e=(0,F.findShortcut)(t,!0);if(e==F.ADD_LABEL_VERTEX||e==F.ADD_VERTEX){var n=gt(o(),mt(t));if(n){var r=n.edge,i=n.pos,a=n.prj;o().insertEdgeVertex(r,a,i,e==F.ADD_LABEL_VERTEX),d()}}};t.addEventListener("click",h),i.push({element:t,event:"click",handler:h});var p=function(e){var n=.1*Math.sign(e.deltaY),r=vt(),o=Math.max(.1,Math.min(5,r-n));if(o!==r){var i=t.getBoundingClientRect();xt(o,e.clientX-i.left,e.clientY-i.top),e.preventDefault();var a=t.__data;a&&a.id&&It(a.id)}};t.addEventListener("wheel",p),i.push({element:t,event:"wheel",handler:p});var g=function(t){var e=(0,F.findShortcut)(t);switch(e&&t.preventDefault(),e){case F.DEL_VERTEX:Array.from(o().edgeVertices.values()).filter(function(t){return t.selected}).forEach(function(t){o().deleteEdgeVertex(t)});break;case F.UNDO:o().undo();break;case F.REDO:o().redo();break;case F.ZOOM_IN:xt(Math.min(5,1.2*vt())),It(o().id);break;case F.ZOOM_OUT:xt(Math.max(.1,vt()/1.2)),It(o().id);break;case F.ZOOM_100:xt(1),It(o().id);break;case F.ZOOM_FIT:o().fitToView();break;case F.SELECT_ALL:o().nodes().forEach(function(t){return o().setNodeSelected(t,!0)}),o().edgeVertices.forEach(function(t){return c(t,!0)});break;case F.DESELECT:o().nodes().forEach(function(t){return o().setNodeSelected(t,!1)}),o().edgeVertices.forEach(function(t){return c(t,!1)})}};window.addEventListener("keydown",g),i.push({element:window,event:"keydown",handler:g});var m=yt(t,{nodeFromEvent:function(t){t.preventDefault();var e=t.target.closest("g.nodes g.node");return e?r(e):(e=t.target.closest("g.edges g.edge .v-dot"))?o().edgeVertices.get(e.id):null},setSelection:function(t){o().nodes().forEach(function(e){return o().setNodeSelected(e,t.some(function(t){return t.id==e.id}))}),o().edgeVertices.forEach(function(e){return c(e,t.some(function(t){return t.id==e.id}))}),ut(o().nodes().find(function(t){return t.selected}))},setDragging:function(t){},isSelected:function(t){return t.selected},getSelection:function(){var t=o().nodes().filter(function(t){return t.selected});return o().edgeVertices.forEach(function(e){return e.selected&&t.push(e)}),t},getZoom:vt,moveNode:function(t,e,n){o().nodesMap.has(t.id)?o().moveNode(t,e,n):(t.auto=!1,o().moveEdgeVertex(t,e,n))},boxSelection:function(t,e){o().nodesMap.forEach(function(n){var r,i,a;(r={x:(a=n).x-a.width/2,y:a.y-a.height/2,width:a.width,height:a.height}).x<(i=t).x+i.width&&r.y<i.y+i.height&&r.x+r.width>i.x&&r.y+r.height>i.y?o().setNodeSelected(n,!n.selected):e||o().setNodeSelected(n,!1)}),o().edgeVertices.forEach(function(n){f(n,t,!1)?c(n,!n.selected):e||c(n,!1)}),ut(o().nodes().find(function(t){return t.selected}))},updatePanning:Et},e);t.__cursorInteractionCleanup=function(){i.forEach(function(t){var e=t.element,n=t.event,r=t.handler;e.removeEventListener(n,r)}),m&&m()}}function vt(){if(!st)return 1;var t=st.querySelector("g.zoom");if(!t)return 1;var e=(t.getAttribute("transform")||"").match(/scale\(([^)]+)\)/);return e&&parseFloat(e[1])||1}function bt(t){if(st){var e=st.querySelector("g.zoom");if(e){var n=wt();e.setAttribute("transform","translate(".concat(n.x,", ").concat(n.y,") scale(").concat(t,")")),Et()}}}function xt(t,e,n){var r=st.querySelector("g.zoom"),o=vt();if(void 0===e||void 0===n){var i=st.parentElement;i?(e=i.clientWidth/2,n=i.clientHeight/2):(e=st.clientWidth/2,n=st.clientHeight/2)}var a=wt(),c=e-(e-a.x)/o*t,l=n-(n-a.y)/o*t;r.setAttribute("transform","translate(".concat(c,", ").concat(l,") scale(").concat(t,")")),Et()}function wt(){if(!st)return{x:0,y:0};var t=st.querySelector("g.zoom");if(!t)return{x:0,y:0};var e=(t.getAttribute("transform")||"").match(/translate\(([^,]+),([^)]+)\)/);return e?{x:parseFloat(e[1])||0,y:parseFloat(e[2])||0}:{x:0,y:0}}function Et(){if(st){var t=st.querySelector("g.zoom");if(t){var e=t.getBBox(),n=vt();if(st.parentElement){var r=Math.max(st.parentElement.clientWidth/n,e.x+e.width+U),o=Math.max(st.parentElement.clientHeight/n,e.y+e.height+U);st.setAttribute("width",String(r*n)),st.setAttribute("height",String(o*n))}}}}var Ct=function(t,e){"Dashed"==e?t.setAttribute("stroke-dasharray","4"):"Dotted"==e&&t.setAttribute("stroke-dasharray","2")},St={nodeBorder:{filter:"url(#shadow)"},nodeText:{"font-family":"Arial, sans-serif",stroke:"none"},edgeText:{"font-family":"Arial, sans-serif",stroke:"none"},edgeRect:{fill:"none",stroke:"none"},groupRect:{fill:"rgba(0, 0, 0, 0.02)",stroke:"#666","stroke-width":3,"stroke-dasharray":4},groupText:{fill:"#666","font-size":22,cursor:"default"}},kt=new Map;function It(t){if(st){var e=vt(),n=wt(),r={zoom:e,transform:{x:n.x,y:n.y}};kt.set(t,r)}}function Bt(t){if(!st||!kt.has(t))return!1;var e=kt.get(t);if(!e)return!1;var n=st.querySelector("g.zoom");return n&&(n.setAttribute("transform","scale(".concat(e.zoom,") translate(").concat(e.transform.x,", ").concat(e.transform.y,")")),Et()),!0}function Ot(t){kt.delete(t)}},876:(t,e,n)=>{n.r(e),n.d(e,{Root:()=>z,refreshGraph:()=>R});var r=n(540),o=n(920),i=n(719);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function s(t,e,n){return(e=function(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){var n=void 0;return Object.keys(t.views).filter(function(t){return t.endsWith("Views")}).some(function(r){return t.views[r].some(function(t){if(t.softwareSystemId==e)return n=t.key,!0})}),n}var d=function(t){var e=[];return Object.keys(t.views).filter(function(t){return t.endsWith("Views")}).forEach(function(n){t.views[n].forEach(function(t){e.push({key:t.key,title:t.title||t.key,section:n})})}),e},f=n(344);function h(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return p(s,"_invoke",function(n,r,o){var i,c,l,s=0,u=o||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,l=t,f.n=n,a}};function h(n,r){for(c=n,l=r,e=0;!d&&s&&!o&&e<u.length;e++){var o,i=u[e],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,c=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,p){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),c=u,l=p;(e=c<2?t:l)||!d;){i||(c?c<3?(c>1&&(f.n=-1),h(c,l)):f.n=l:f.v=l);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(e){i=t,c=1,l=e}finally{s=1}}return{value:e,done:d}}}(n,o,i),!0),s}var a={};function c(){}function l(){}function s(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(p(e={},r,function(){return this}),e),d=s.prototype=c.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,p(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=s,p(d,"constructor",s),p(s,"constructor",l),l.displayName="GeneratorFunction",p(s,o,"GeneratorFunction"),p(d),p(d,o,"Generator"),p(d,r,function(){return this}),p(d,"toString",function(){return"[object Generator]"}),(h=function(){return{w:i,m:f}})()}function p(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}p=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){p(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},p(t,e,n,r)}function g(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function m(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){g(i,r,o,a,c,"next",t)}function c(t){g(i,r,o,a,c,"throw",t)}a(void 0)})}}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return A(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var v={};function b(t){var e=t.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}var x=n(334);function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return E(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var C=function(t){var e=t.model,n=t.currentID,o=t.onViewChange,i=t.graph,a=t.onAutoLayout,c=t.onSave,l=t.onToggleHelp,s=t.saving,u=t.layouting,f=t.dragMode,h=t.setDragMode,p=d(e);return r.createElement("div",{className:"toolbar"},r.createElement(S,{views:p,currentID:n,onViewChange:o}),r.createElement(k,{graph:i,onAutoLayout:a,onSave:c,onToggleHelp:l,saving:s,layouting:u,dragMode:f,setDragMode:h}))},S=function(t){var e=t.views,n=t.currentID,o=t.onViewChange;return r.createElement("div",null,"View:",e.length>1?r.createElement("select",{onChange:function(t){return o(t.target.value)},value:n},r.createElement("option",{disabled:!0,value:"",hidden:!0},"..."),e.map(function(t){return r.createElement("option",{key:t.key,value:t.key},b(t.section)+": "+t.title)})):r.createElement("span",{style:{marginLeft:"8px",fontWeight:"bold"}},e[0]?b(e[0].section)+": "+e[0].title:"No views available"))},k=function(t){var e=t.graph,n=t.onAutoLayout,o=t.onSave,i=t.onToggleHelp,a=t.saving,c=t.layouting,l=t.dragMode,s=t.setDragMode;return r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement("div",{className:"toolbar-group"},r.createElement(I,{dragMode:l,setDragMode:s})),r.createElement("div",{className:"toolbar-group"},r.createElement(B,{graph:e})),r.createElement("div",{className:"toolbar-group"},r.createElement(O,{graph:e})),r.createElement("div",{className:"toolbar-group"},r.createElement(M,{onAutoLayout:n,layouting:c})),r.createElement("div",{className:"toolbar-group"},r.createElement(_,{graph:e})),r.createElement("div",{className:"toolbar-group"},r.createElement(j,{graph:e})),r.createElement("div",{className:"toolbar-group"},r.createElement(D,{onSave:o,saving:a,graph:e})),r.createElement("div",{className:"toolbar-group"},r.createElement(L,{onToggleHelp:i})))},I=function(t){var e=t.dragMode,n=t.setDragMode;return r.createElement("button",{className:"mode-toggle ".concat("select"===e?"select-mode":"pan-mode"),onClick:function(){return n("pan"===e?"select":"pan")},"data-tooltip":"pan"===e?"Pan Mode: Drag to pan the view (T)":"Select Mode: Drag to select elements, Shift+click to add/remove selection (T)"},"pan"===e?r.createElement("i",{className:"fas fa-hand-paper"}):r.createElement("i",{className:"fas fa-mouse-pointer"}))},B=function(t){var e=t.graph,n=(0,x.sy)();return r.createElement(r.Fragment,null,r.createElement("button",{onClick:function(){return e.undo()},"data-tooltip":"Undo the last change made to the diagram (".concat(n,"+Z)")},r.createElement("i",{className:"fas fa-undo"})),r.createElement("button",{onClick:function(){return e.redo()},"data-tooltip":"Redo the last undone action (".concat(n,"+Shift+Z / ").concat(n,"+Y)")},r.createElement("i",{className:"fas fa-redo"})))},O=function(t){var e=t.graph,n=(0,x.sy)();return r.createElement(r.Fragment,null,r.createElement("button",{onClick:function(){return e.alignSelectionH()},"data-tooltip":"Align all selected elements horizontally (left edges) (".concat(n,"+Shift+H)")},r.createElement("i",{className:"fas fa-align-left"})),r.createElement("button",{onClick:function(){return e.alignSelectionV()},"data-tooltip":"Align all selected elements vertically (top edges) (".concat(n,"+Shift+A)")},r.createElement("i",{className:"fas fa-align-left",style:{transform:"rotate(90deg)"}})),r.createElement("button",{onClick:function(){return e.distributeSelectionH()},"data-tooltip":"Distribute selected elements evenly horizontally (equal spacing) (".concat(n,"+Alt+H)")},r.createElement("i",{className:"fas fa-ellipsis-h"})),r.createElement("button",{onClick:function(){return e.distributeSelectionV()},"data-tooltip":"Distribute selected elements evenly vertically (equal spacing) (".concat(n,"+Alt+V)")},r.createElement("i",{className:"fas fa-ellipsis-v"})))},M=function(t){var e=t.onAutoLayout,n=t.layouting,o=(0,x.sy)();return r.createElement("button",{onClick:e,disabled:n,"data-tooltip":"Automatically arrange all elements using the Layered algorithm (".concat(o,"+L)")},n?r.createElement("i",{className:"fas fa-spinner fa-spin"}):r.createElement("i",{className:"fas fa-magic"}))},_=function(t){var e=t.graph,n=w((0,r.useState)(e.isGridVisible()),2),o=n[0],i=n[1],a=w((0,r.useState)(e.isSnapToGrid()),2),c=a[0],l=a[1],s=(0,x.sy)();return r.useEffect(function(){var t=function(){i(e.isGridVisible()),l(e.isSnapToGrid())};return t(),window.addEventListener("gridStateChanged",t),function(){window.removeEventListener("gridStateChanged",t)}},[e]),r.createElement(r.Fragment,null,r.createElement("button",{className:o?"active-toggle":"inactive-toggle",onClick:function(){e.toggleGrid(),i(e.isGridVisible())},"data-tooltip":"Toggle grid visibility (".concat(s,"+G)")},r.createElement("i",{className:"fas fa-th"})),r.createElement("button",{className:c?"active-toggle":"inactive-toggle",onClick:function(){e.toggleSnapToGrid(),l(e.isSnapToGrid())},"data-tooltip":"Toggle snap to grid (".concat(s,"+Shift+G)")},r.createElement("i",{className:"fas fa-magnet"})),r.createElement("button",{onClick:function(){e.snapAllToGrid()},disabled:!c,"data-tooltip":"Snap all elements to grid (".concat(s,"+Alt+G)")},r.createElement("i",{className:"fas fa-border-all"})))},T=function(){var t=w((0,r.useState)(100),2),e=t[0],n=t[1];return(0,r.useEffect)(function(){var t=function(){var t=Math.round(100*(0,i.IX)());n(t)};t();var e=setInterval(t,100);return function(){return clearInterval(e)}},[]),r.createElement("button",{onClick:function(){return(0,i.a_)(1)},className:"zoom-display","data-tooltip":"Click to reset zoom to 100%"},e,"%")},j=function(t){var e=t.graph,n=(0,x.sy)();return r.createElement(r.Fragment,null,r.createElement("button",{onClick:function(){(0,i.a_)(Math.max(.1,(0,i.IX)()/1.2))},"data-tooltip":"Zoom out to see more of the diagram (".concat(n,"+-)")},r.createElement("i",{className:"fas fa-search-minus"})),r.createElement(T,null),r.createElement("button",{onClick:function(){(0,i.a_)(Math.min(5,1.2*(0,i.IX)()))},"data-tooltip":"Zoom in to see details more clearly (".concat(n,"+=)")},r.createElement("i",{className:"fas fa-search-plus"})),r.createElement("button",{onClick:function(){e.fitToView()},"data-tooltip":"Fit diagram to view (".concat(n,"+9)")},r.createElement("i",{className:"fas fa-expand"})))},D=function(t){var e=t.onSave,n=t.saving,o=t.graph,i=w((0,r.useState)(!1),2),a=i[0],c=i[1],l=(0,x.sy)();return(0,r.useEffect)(function(){var t=function(){c(o.changed())};t();var e=setInterval(t,100);return function(){return clearInterval(e)}},[o]),r.createElement("button",{className:a?"grp":"action",disabled:n,onClick:e,"data-tooltip":"Save the current diagram layout (".concat(l,"+S)")},n?r.createElement("i",{className:"fas fa-spinner fa-spin"}):r.createElement("i",{className:"fas fa-save"}))},L=function(t){var e=t.onToggleHelp;return r.createElement("button",{onClick:e,"data-tooltip":"Show keyboard shortcuts and help information (Shift+? / Shift+F1)"},r.createElement("i",{className:"fas fa-question-circle"}))};function P(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return N(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var V=(0,r.lazy)(function(){return Promise.resolve().then(n.bind(n,344)).then(function(t){return{default:t.Help}})}),G=(0,r.lazy)(function(){return n.e(196).then(n.bind(n,196)).then(function(t){return{default:t.Graph}})}),z=function(t){var e=t.model,n=t.layout;return r.createElement(o.Kd,null,r.createElement(o.BV,null,r.createElement(o.qh,{path:"/",element:r.createElement(F,{model:e,layouts:n})})))},R=function(){var t;(t=new URLSearchParams(document.location.search).get("id")||"")?delete v[t]:Object.keys(v).forEach(function(t){return delete v[t]})},F=function(t){var e=t.model,n=t.layouts,a=P((0,o.ok)(),2),c=a[0],s=a[1],d=decodeURI(c.get("id")||""),p=P((0,r.useState)(!1),2),g=p[0],A=p[1],b=P((0,r.useState)("pan"),2),x=b[0],w=b[1],E=function(t,e,n){if(v[n])return v[n];var r=function(t,e,n){var r=new Map,o=new Map,a=function(t){Array.isArray(t.relationships)&&t.relationships.forEach(function(t){o.set(t.id,t)})};if(t.model.people&&t.model.people.forEach(function(t){r.set(t.id,t),Array.isArray(t.relationships)&&t.relationships.forEach(function(t){o.set(t.id,t)})}),t.model.softwareSystems&&t.model.softwareSystems.forEach(function(t){r.set(t.id,t),a(t),Array.isArray(t.containers)&&t.containers.forEach(function(e){e.parent=t,r.set(e.id,e),a(e),Array.isArray(e.components)&&e.components.forEach(function(t){t.parent=e,r.set(t.id,t),a(t)})})}),t.model.deploymentNodes){var c=function(t,e){t.parent=e,r.set(t.id,t),a(t),function(t){t.containerInstances&&t.containerInstances.forEach(function(e){var n=l(l({},r.get(e.containerId)),{},{id:e.id});r.set(n.id,n),n.parent=t,a(e)})}(t),t.children&&t.children.forEach(function(e){return c(e,t)}),t.infrastructureNodes&&t.infrastructureNodes.forEach(function(e){return c(e,t)})};t.model.deploymentNodes.forEach(function(t){return c(t,null)})}var s=function(t,e){var n=null,r="";return Object.keys(t.views).filter(function(t){return t.endsWith("Views")}).some(function(o){return t.views[o].some(function(t){if(t.key==e)return n=t,r=o,!0})}),{view:n,section:r}}(t,n),d=s.view,f=s.section;if(!d)return null;var h=new i.jg(d.key,d.title||d.key),p={name:h.name,description:d.description,version:t.version,elements:[]};if(h.metadata=p,!d.elements)return h;var g={};if("deploymentViews"==f||"containerViews"==f)d.elements.forEach(function(t){var e=r.get(t.id);null!=e&&e.parent&&(g[e.parent.id]=!0)});else if(d.softwareSystemId)d.elements.find(function(t){return t.id==d.softwareSystemId})||(g[d.softwareSystemId]=!0);else if("systemLandscapeViews"==f){var m=l({id:"__enterprise__"},t.model.enterprise);r.set(m.id,m),t.model.people&&t.model.people.filter(function(t){return"External"!=t.location}).forEach(function(t){return t.parent=m}),t.model.softwareSystems&&t.model.softwareSystems.filter(function(t){return"External"!=t.location}).forEach(function(t){return t.parent=m}),g[m.id]=!0}var y=t.views.styles;d.elements.forEach(function(e){if(!g[e.id]){var n=r.get(e.id),o="",i={};if(n){var a=n.tags.split(",");o=a[a.length-1],n.technology&&(o+=": "+n.technology),a.forEach(function(t){var e=y&&y.elements&&y.elements.find(function(e){return e.tag==t});e&&(i=l(l({},i),e))})}h.addNode(e.id,n&&n.name||e.id,o,n&&n.description?n.description:"",i),n&&p.elements.push({id:n.id,tags:n.tags,location:n.location,properties:n.properties,elementViewKey:u(t,n.id),technology:n.technology})}}),Array.isArray(d.relationships)&&d.relationships.forEach(function(t){var e=o.get(t.id);if(e)if(h.nodesMap.has(e.sourceId))if(h.nodesMap.has(e.destinationId)){var n={};e.tags.split(",").forEach(function(t){var e=y&&y.relationships&&y.relationships.find(function(e){return e.tag==t});e&&(n=l(l({},n),e))}),t.routing&&(n.routing=t.routing),h.addEdge(e.id,e.sourceId,e.destinationId,e.description,t.vertices,n)}else if(r.has(e.destinationId)){var i=r.get(e.destinationId);console.warn("Element not found in this view: ",i.id,i.name)}else console.warn("Element not found: ",e.destinationId);else if(r.has(e.sourceId)){var a=r.get(e.sourceId);console.warn("Element not found in this view: ",a.id,a.name)}else console.warn("Element not found: ",e.sourceId)});var A=function(t){for(var e=0,n=t.parent;n;n=n.parent)e++;return e};return Object.keys(g).map(function(t){return r.get(t)}).sort(function(t,e){return A(t)>A(e)?-1:1}).forEach(function(t){var e={};"deploymentViews"==f&&r.get(t.id).tags.split(",").forEach(function(t){var n=y&&y.elements&&y.elements.find(function(e){return e.tag==t});n&&(e=l(l({},e),n))});var n=d.elements.map(function(t){return r.get(t.id)}).filter(function(e){return!(!e||e.parent!==t||"systemLandscapeViews"===f&&"__enterprise__"===t.id&&"External"===e.location)}).map(function(t){return t.id});n.length>0&&h.addGroup(t.id,t.name,n,e)}),h.init(e[h.id]),h}(t,e,n);return r&&(v[n]=r),r}(e,n,d),S=function(t){var e=y((0,r.useState)(!1),2),n=e[0],o=e[1];return{layouting:n,handleAutoLayout:(0,r.useCallback)(m(h().m(function e(){var n,r;return h().w(function(e){for(;;)switch(e.p=e.n){case 0:return o(!0),e.p=1,n={direction:"DOWN",compactLayout:!0},e.n=2,t.autoLayout(n);case 2:e.n=4;break;case 3:e.p=3,r=e.v,console.error("Layout failed:",r),alert("Layout failed. See console for details.");case 4:return e.p=4,o(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])})),[t])}}(E||{}),k=S.layouting,I=S.handleAutoLayout,B=function(t,e){var n=y((0,r.useState)(!1),2),o=n[0],i=n[1];return{saving:o,handleSave:(0,r.useCallback)(m(h().m(function n(){var r;return h().w(function(n){for(;;)switch(n.p=n.n){case 0:return i(!0),n.p=1,n.n=2,fetch("data/save?id="+encodeURIComponent(e),{method:"post",body:t.exportSVG()});case 2:202!==n.v.status?alert("Error saving\nSee terminal output."):t.setSaved(),n.n=4;break;case 3:n.p=3,r=n.v,console.error("Save failed:",r),alert("Save failed. See console for details.");case 4:return n.p=4,i(!1),n.f(4);case 5:return n.a(2)}},n,null,[[1,3,4,5]])})),[t,e])}}(E||{},d),O=B.saving,M=B.handleSave;if(!E)return r.createElement(U,{model:e});var _=(0,r.useCallback)(function(){A(!g)},[g]);(0,r.useEffect)(function(){E&&E.name&&(document.title="".concat(E.name," - Model"))},[E]),function(t,e,n,o,i,a){(0,r.useEffect)(function(){var r=function(r){var c=(0,f.findShortcut)(r);c&&r.preventDefault(),c===f.HELP?t():c===f.SAVE?e():c===f.TOGGLE_DRAG_MODE&&i&&o?i("pan"===o?"select":"pan"):n&&(c===f.ALIGN_HORIZONTAL?n.alignSelectionH():c===f.ALIGN_VERTICAL?n.alignSelectionV():c===f.DISTRIBUTE_HORIZONTAL?n.distributeSelectionH():c===f.DISTRIBUTE_VERTICAL?n.distributeSelectionV():c===f.AUTO_LAYOUT&&a?a():c===f.RESET_POSITION?n.resetView():c===f.TOGGLE_GRID?n.toggleGrid():c===f.TOGGLE_SNAP_TO_GRID?n.toggleSnapToGrid():c===f.SNAP_ALL_TO_GRID?n.snapAllToGrid():c===f.MOVE_LEFT?n.moveSelected(-n.getGridSize(),0):c===f.MOVE_LEFT_FINE?n.moveSelected(-1,0,!0):c===f.MOVE_RIGHT?n.moveSelected(n.getGridSize(),0):c===f.MOVE_RIGHT_FINE?n.moveSelected(1,0,!0):c===f.MOVE_UP?n.moveSelected(0,-n.getGridSize()):c===f.MOVE_UP_FINE?n.moveSelected(0,-1,!0):c===f.MOVE_DOWN?n.moveSelected(0,n.getGridSize()):c===f.MOVE_DOWN_FINE&&n.moveSelected(0,1,!0))};return window.addEventListener("keydown",r),function(){return window.removeEventListener("keydown",r)}},[t,e,n,o,i,a])}(_,M,E,x,w,I);var T=(0,r.useCallback)(function(t){s({id:encodeURIComponent(t)})},[s]),j=(0,r.useCallback)(function(t){if(t){var e=E.metadata.elements.find(function(e){return e.id===t});console.log((n=e,JSON.parse(JSON.stringify(n))))}var n},[E]);return r.createElement(r.Fragment,null,r.createElement(C,{model:e,currentID:d,onViewChange:T,graph:E,onAutoLayout:I,onSave:M,onToggleHelp:_,saving:O,layouting:k,dragMode:x,setDragMode:w}),r.createElement(r.Suspense,{fallback:r.createElement("div",null,"Loading graph...")},r.createElement(G,{key:d,data:E,onSelect:j,dragMode:x})),g&&r.createElement(r.Suspense,{fallback:r.createElement("div",null,"Loading help...")},r.createElement(V,null)))},U=function(t){var e=t.model,n=d(e);return r.useEffect(function(){document.title="Model - Architecture Diagrams as Code",n.length>0&&(document.location.href="?id="+n[0].key)},[n]),n.length>0?r.createElement(r.Fragment,null,"Redirecting to ",n[0].title):r.createElement(r.Fragment,null,"No views available")}}},t=>{t.O(0,[453,96],()=>t(t.s=372)),t.O()}]);
//# sourceMappingURL=main.js.map