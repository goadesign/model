/*! For license information please see main.js.LICENSE.txt */
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[792],{17:(t,e,n)=>{n.d(e,{SA:()=>i,sy:()=>o});var r=function(){if("undefined"==typeof navigator)return!1;if("userAgentData"in navigator&&navigator.userAgentData){var t=navigator.userAgentData.platform;if(t&&t.toLowerCase().includes("mac"))return!0}var e=navigator.userAgent.toLowerCase();if(e.includes("mac os")||e.includes("macintosh"))return!0;if(navigator.platform){var n=navigator.platform.toLowerCase();if(n.includes("mac")||n.includes("darwin"))return!0}try{if(void 0!==new KeyboardEvent("keydown",{metaKey:!0}).metaKey)return/mac|darwin|os x/i.test(navigator.userAgent)}catch(t){}return!1},o=function(){return r()?"Cmd":"Ctrl"},i=function(t){return r()?t.metaKey:t.ctrlKey}},21:(t,e,n)=>{function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{jg:()=>ct,Qy:()=>mt,ZG:()=>ut,IX:()=>At,F_:()=>It,Kp:()=>St,a_:()=>bt});var o=function(t,e,n){var o=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return document.body.appendChild(t),{measure:function(e,n){var r=document.createElementNS("http://www.w3.org/2000/svg","text");for(var o in r.setAttribute("x","0"),r.setAttribute("y","0"),n)r.setAttribute(o,n[o]);r.appendChild(document.createTextNode(e)),t.appendChild(r);var i=r.getBBox(),a=i.width,c=i.height;return t.removeChild(r),{width:a,height:c}},clean:function(){document.body.removeChild(t)}}}(),i=0,a=t.trim().split("\n").map(function(t){var a=t.trim().split(/\s+/),c=[],l=[];return a.forEach(function(t){if(o.measure(t,n).width>e){l.length>0&&(c.push(l.join(" ")),l=[]);for(var a=function(t,e,n,r){for(var o=[],i="",a=0;a<t.length;a++){var c=i+t[a];r.measure(c,n).width>e&&i.length>0?(o.push(i),i=t[a]):i=c}return i.length>0&&o.push(i),o}(t,e,n,o),s=0;s<a.length-1;s++)c.push(a[s]),i=Math.max(i,o.measure(a[s],n).width);a.length>0&&(l=[a[a.length-1]])}else{var u=[].concat(function(t){if(Array.isArray(t))return r(t)}(f=l)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(f)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t]),d=o.measure(u.join(" "),n);d.width>e&&l.length>0?(c.push(l.join(" ")),l=[t]):(i=Math.max(i,d.width),l=u)}var f}),l.length>0&&c.push(l.join(" ")),c}).reduce(function(t,e){return t.concat(e)},[]);return o.clean(),{lines:a,maxW:i}};function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){l(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function l(t,e,n){return(e=function(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var u={element:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=document.createElementNS("http://www.w3.org/2000/svg",t);return Object.entries(e).forEach(function(t){var e,n,o=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,n)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return r.setAttribute(i,String(a))}),n&&r.classList.add(n),r},use:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.element("use",e);return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+t),n},path:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return this.element("path",c(c({},e),{},{d:t}),n)},text:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.element("text",e);return t&&(n.textContent=t),n},textArea:function(t,e,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",u={"font-size":"".concat(n,"px"),"font-weight":r?"bold":"normal"},d=o(t,e,u),f=d.lines,h=d.maxW,p=this.text("",{x:0,y:l,"text-anchor":s||void 0});return f.forEach(function(t,e){var r=i.element("tspan",c({x:a,dy:"".concat(n+2,"px")},u));r.textContent=t,p.append(r)}),{txt:p,dy:(f.length+1)*(n+2),maxW:h}},rect:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0;return this.element("rect",{x:n,y:r,rx:o,ry:o,width:t,height:e},i)},icon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.use(t,{x:e,y:n})},expand:function(t,e,n){var r=this.element("g",{transform:"translate(".concat(t,",").concat(e,")")},"expand");return r.append(this.rect(19,19,0,0,1),this.text(n?"-":"+",{x:10,y:14,"text-anchor":"middle"})),r}};function d(t,e,n){t.setAttribute("transform","translate(".concat(e,",").concat(n,")"))}function f(t,e){return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?t.x>e.x&&t.x<e.x+e.width&&t.y>e.y&&t.y<e.y+e.height:t.x>e.x-e.width/2&&t.x<e.x+e.width/2&&t.y>e.y-e.height/2&&t.y<e.y+e.height/2}function h(t,e,n){var r=n.width/2,o=n.height/2;return[{p:{x:n.x-r,y:n.y-o},q:{x:n.x-r,y:n.y+o}},{p:{x:n.x-r,y:n.y-o},q:{x:n.x+r,y:n.y-o}},{p:{x:n.x+r,y:n.y-o},q:{x:n.x+r,y:n.y+o}},{p:{x:n.x-r,y:n.y+o},q:{x:n.x+r,y:n.y+o}}].map(function(n){return function(t,e,n,r){var o,i,a,c,l,s={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(o=(r.y-n.y)*(e.x-t.x)-(r.x-n.x)*(e.y-t.y))||(i=t.y-n.y,a=t.x-n.x,c=(r.x-n.x)*i-(r.y-n.y)*a,l=(e.x-t.x)*i-(e.y-t.y)*a,i=c/o,a=l/o,s.x=t.x+i*(e.x-t.x),s.y=t.y+i*(e.y-t.y),i>0&&i<1&&(s.onLine1=!0),a>=0&&a<=1&&(s.onLine2=!0)),s}(t,e,n.p,n.q)}).filter(function(t){return t.onLine1&&t.onLine2})}function p(t,e){return f(e,t)?{x:t.x,y:t.y}:h(t,e,t)[0]||{x:t.x,y:t.y}}function g(t,e,n,r,o){var i={x:o.x-t.x,y:o.y-t.y},a=r.x-t.x,c=r.y-t.y;a==i.x&&(i.x+=1e-7);var l=(c-i.y)/(a-i.x),s=c-l*a,u=n*n+e*e*l*l,d=2*e*e*s*l,f=e*e*s*s-e*e*n*n,h=Math.sqrt(d*d-4*u*f),p=i.x>a?(-d+h)/(2*u):(-d-h)/(2*u),g={x:p,y:l*p+s};return g.x+=t.x,g.y+=t.y,g}function y(t,e,n){var r=n.x-e.x,o=n.y-e.y,i=r*r+o*o,a=(t.x-e.x)*r+(t.y-e.y)*o,c=Math.min(1,Math.max(0,a/i));return{x:e.x+r*c,y:e.y+o*c}}function m(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function b(t){var e=function(t){if("object"!=A(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:e+""}var x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._el=e}return e=t,(n=[{key:"node",value:function(){return this._el}},{key:"attr",value:function(t,e){return this._el.setAttribute(t,String(e)),this}},{key:"insert",value:function(e,n){var r=document.createElementNS("http://www.w3.org/2000/svg",e);return new t(this._el.insertBefore(r,this._el.querySelector(n)))}}])&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function w(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=t.insert("rect",":first-child").attr("rx",r?n.width/8:3).attr("ry",r?n.width/8:3).attr("x",-e.width/2).attr("y",-e.height/2).attr("width",e.width).attr("height",e.height);return n.intersect=function(t){return p(n,t)},o}function k(t,e,n,r,o){var i=t.insert("ellipse",":first-child").attr("cx",0).attr("cy",0).attr("rx",r).attr("ry",o).attr("width",n.width).attr("height",n.height);return n.intersect=function(t){return g(n,r,o,n,t)},i}function C(t,e,n){var r=n.width/8,o=n.width/14,i=t.insert("g",":first-child");return i.insert("path",":first-child").attr("d","M".concat(-n.width/2,",").concat(-n.height/2," l").concat(n.width,",0 M").concat(-n.width/2,",").concat(n.height/2," l").concat(n.width,",0")),i.insert("circle",":first-child").attr("cx",0).attr("cy",n.height/2+r/2).attr("r",.4*o),i.insert("rect",":first-child").attr("x",-o).attr("y",-n.height/2-r/2-.2*o).attr("width",2*o).attr("height",.4*o),i.insert("rect",":first-child").attr("rx",o).attr("ry",o).attr("x",-e.width/2).attr("y",-e.height/2-r).attr("width",e.width).attr("height",e.height+2*r),n.intersect=function(t){return p({x:n.x,y:n.y,width:n.width,height:n.height+2*r},t)},i}var E={box:function(t,e){return w(new x(t),e,e).node()},roundedbox:function(t,e){return w(new x(t),e,e,!0).node()},component:function(t,e){return function(t,e,n){var r=n.width/10,o=t.insert("g",":first-child");return o.insert("rect",":first-child").attr("rx",3).attr("ry",3).attr("x",-n.width/2-r).attr("y",-n.height/2+r).attr("width",2*r).attr("height",r),o.insert("rect",":first-child").attr("rx",3).attr("ry",3).attr("x",-n.width/2-r).attr("y",-n.height/2+2.5*r).attr("width",2*r).attr("height",r),o.insert("rect",":first-child").attr("rx",3).attr("ry",3).attr("x",-n.width/2).attr("y",-n.height/2).attr("width",n.width).attr("height",n.height),n.intersect=function(t){return p({x:n.x-r/2,y:n.y,width:n.width+r,height:n.height},t)},o}(new x(t),0,e).node()},cylinder:function(t,e){return function(t,e,n){var r=e.width,o=r/2,i=o/(5.5+r/70),a=e.height,c="M 0,".concat(i," a").concat(o,",").concat(i," 0,0,0 ").concat(r," 0 a ").concat(o,",").concat(i," 0,0,0 ").concat(-r," 0 l 0,").concat(a-2*i," a ").concat(o,",").concat(i," 0,0,0 ").concat(r," 0 l 0,").concat(2*i-a),l=t.attr("label-offset-y",2*i).insert("path",":first-child").attr("d",c).attr("transform","translate("+-r/2+","+-a/2+")");return n.intersect=function(t){var e=p(n,t),r=n.y+n.height/2-i;return e.y>r?g({x:n.x,y:r},o,i,n,t):(r=n.y-n.height/2+i,e.y<r?g({x:n.x,y:r},o,i,n,t):e)},l}(new x(t),e,e).node()},person:function(t,e){return function(t,e,n){var r=e.width,o=e.height,i="M ".concat(.38*r,",").concat(o/3," A").concat(r/2,",").concat(o/2," 0,0,0 0 ").concat(o/2,"\n\t\tL").concat(r/11,",").concat(o," L").concat(r-r/11,",").concat(o," L").concat(r,",").concat(o/2,"\n\t\tA").concat(r/2,",").concat(o/2," 0,0,0 ").concat(r-.38*r," ").concat(o/3," \n\t\tA").concat(r/6,",").concat(r/6," 0,1,0 ").concat(.38*r," ").concat(o/3),a=t.attr("label-offset-y",.4*o).insert("path",":first-child").attr("d",i).attr("transform","translate("+-r/2+","+-o/2+")");return n.intersect=function(t){return p(n,t)},a}(new x(t),e,e).node()},circle:function(t,e){return function(t,e,n){return k(t,0,n,n.width/2,n.width/2)}(new x(t),0,e).node()},ellipse:function(t,e){return function(t,e,n){return k(t,0,n,.55*n.width,.45*n.width)}(new x(t),0,e).node()},hexagon:function(t,e){return function(t,e,n){var r=n.width/2,o=t.insert("polygon",":first-child").attr("points",[.5,.866,1,0,.5,-.866,-.5,-.866,-1,-0,-.5,.866,.5,.866].map(function(t){return t*r}).join(",")).attr("width",n.width).attr("height",n.height);return n.intersect=function(t){return g(n,n.width/2,n.width/2,n,t)},o}(new x(t),0,e).node()},folder:function(t,e){return function(t,e,n){var r=n.width/20,o=t.attr("label-offset-y",2*r).insert("g",":first-child");return o.insert("rect",":first-child").attr("rx",3).attr("ry",3).attr("x",-n.width/2).attr("y",-n.height/2+2*r).attr("width",n.width).attr("height",n.height-2*r),o.insert("path",":first-child").attr("d","M0,".concat(-n.height/2+2*r," l").concat(r,",").concat(-2*r," h").concat(n.width/2-2*r," v").concat(2*r)),n.intersect=function(t){return p({x:n.x,y:n.y+r/2,width:n.width,height:n.height+r},t)},o}(new x(t),0,e).node()},mobiledevicelandscape:function(t,e){return function(t,e,n){var r=n.width/8,o=n.width/14,i=t.insert("g",":first-child");return i.insert("path",":first-child").attr("d","M".concat(-n.width/2,",").concat(-n.height/2," l0,").concat(n.height," M").concat(n.width/2,",").concat(-n.height/2," l0,").concat(n.height)),i.insert("circle",":first-child").attr("cx",-n.width/2-r/2).attr("cy",0).attr("r",.4*o),i.insert("rect",":first-child").attr("x",n.width/2+r/2-.2*o).attr("y",-o).attr("width",.4*o).attr("height",2*o),i.insert("rect",":first-child").attr("rx",o).attr("ry",o).attr("x",-e.width/2-r).attr("y",-e.height/2).attr("width",e.width+2*r).attr("height",e.height),n.intersect=function(t){return p({x:n.x,y:n.y,width:n.width+2*r,height:n.height},t)},i}(new x(t),e,e).node()},mobiledeviceportrait:function(t,e){return C(new x(t),e,e).node()},mobiledevice:function(t,e){return C(new x(t),e,e).node()},pipe:function(t,e){return function(t,e,n){var r=n.width,o=n.height,i=o/2,a=i/(2.5+r/70),c="M".concat(-a,",0\n\t\ta").concat(a,",").concat(i," 0,0,1 0,").concat(o,"\n\t\ta").concat(a,",").concat(i," 0,0,1 0,").concat(-o,"\n\t\tl").concat(r,",0\n\t\ta").concat(a,",").concat(i," 0,0,1 0,").concat(o,"\n\t\tl").concat(-r,",0"),l=t.insert("path",":first-child").attr("d",c).attr("transform","translate("+-r/2+","+-o/2+")");return n.intersect=function(t){return p({x:n.x-a,y:n.y,width:n.width+2*a,height:n.height},t)},l}(new x(t),0,e).node()},robot:function(t,e){return function(t,e,n){var r=n.width,o=n.height,i=Math.min(.28*r,.25*o),a=.2*i,c=.25*i,l=.08*i,s=.12*i,u=.22*i,d=.12*i,f=.3*i,h=r,g=-o/2+c+i,y=o-c-i,m=.35*o,A=t.attr("label-offset-y",m).insert("g",":first-child");A.insert("rect",":first-child").attr("rx",3).attr("ry",3).attr("x",-h/2).attr("y",g).attr("width",h).attr("height",y);var v=-o/2+c;A.insert("rect",":first-child").attr("rx",a).attr("ry",a).attr("x",-i/2).attr("y",v).attr("width",i).attr("height",i),A.insert("line",":first-child").attr("class","robot-antenna").attr("x1",0).attr("y1",v).attr("x2",0).attr("y2",-o/2+2*l).attr("stroke-width",.6*l).attr("stroke-linecap","round"),A.insert("circle",":first-child").attr("class","robot-antenna-ball").attr("cx",0).attr("cy",-o/2+2*l).attr("r",1.2*l);var b=v+.4*i;A.insert("circle",":first-child").attr("class","robot-eye").attr("cx",-u).attr("cy",b).attr("r",s),A.insert("circle",":first-child").attr("class","robot-eye").attr("cx",u).attr("cy",b).attr("r",s);var x=v+.7*i,w=.28*i;return A.insert("path",":first-child").attr("class","robot-mouth").attr("d","M".concat(-w/2,",").concat(x," Q0,").concat(x+.3*w," ").concat(w/2,",").concat(x)).attr("fill","none").attr("stroke-width",.5*l).attr("stroke-linecap","round"),A.insert("rect",":first-child").attr("rx",.25*d).attr("ry",.25*d).attr("x",-i/2-d-1).attr("y",b-f/2).attr("width",d).attr("height",f),A.insert("rect",":first-child").attr("rx",.25*d).attr("ry",.25*d).attr("x",i/2+1).attr("y",b-f/2).attr("width",d).attr("height",f),n.intersect=function(t){return p(n,t)},A}(new x(t),0,e).node()},webbrowser:function(t,e){return function(t,e,n){var r=n.height/8,o=t.attr("label-offset-y",r).insert("g",":first-child");return o.insert("path",":first-child").attr("d","\n\t\t\tM".concat(-n.width/2,",").concat(-n.height/2+r," h").concat(n.width,"\n\t\t\tM").concat(-n.width/2+r/4,",").concat(-n.height/2+r/4," h").concat(r/2," v").concat(r/2," h").concat(-r/2," z\n\t\t\tM").concat(-n.width/2+r,",").concat(-n.height/2+r/4," h").concat(n.width-r-r/4," v").concat(r/2," h").concat(-n.width+r+r/4," z\n\t\t")),o.insert("rect",":first-child").attr("rx",3).attr("ry",3).attr("x",-n.width/2).attr("y",-n.height/2).attr("width",n.width).attr("height",n.height),n.intersect=function(t){return p(n,t)},o}(new x(t),0,e).node()}};function S(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return I(s,"_invoke",function(n,r,o){var i,c,l,s=0,u=o||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,l=t,f.n=n,a}};function h(n,r){for(c=n,l=r,e=0;!d&&s&&!o&&e<u.length;e++){var o,i=u[e],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,c=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,p){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),c=u,l=p;(e=c<2?t:l)||!d;){i||(c?c<3?(c>1&&(f.n=-1),h(c,l)):f.n=l:f.v=l);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(e){i=t,c=1,l=e}finally{s=1}}return{value:e,done:d}}}(n,o,i),!0),s}var a={};function c(){}function l(){}function s(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(I(e={},r,function(){return this}),e),d=s.prototype=c.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,I(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=s,I(d,"constructor",s),I(s,"constructor",l),l.displayName="GeneratorFunction",I(s,o,"GeneratorFunction"),I(d),I(d,o,"Generator"),I(d,r,function(){return this}),I(d,"toString",function(){return"[object Generator]"}),(S=function(){return{w:i,m:f}})()}function I(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}I=function(t,e,n,r){function i(e,n){I(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},I(t,e,n,r)}function B(t){return function(t){if(Array.isArray(t))return M(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return M(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function O(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function j(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o={nodeSpacing:null!==(t=n.nodeSpacing)&&void 0!==t?t:80,layerSpacing:null!==(e=n.layerSpacing)&&void 0!==e?e:60,componentSpacing:80,padding:40,groupMultiplier:.65};return r&&(o.nodeSpacing=Math.max(o.nodeSpacing*o.groupMultiplier,30),o.layerSpacing=Math.max(o.layerSpacing*o.groupMultiplier,35),o.componentSpacing=Math.max(o.componentSpacing*o.groupMultiplier,25),o.padding=Math.max(o.padding*o.groupMultiplier,15)),o}function D(t,e){var n=e.direction,r=void 0===n?"DOWN":n,o=e.compactLayout,i=void 0!==o&&o,a={"elk.algorithm":"layered","elk.direction":r,"elk.spacing.nodeNode":t.nodeSpacing.toString(),"elk.spacing.componentComponent":t.componentSpacing.toString(),"elk.padding":"[top=".concat(t.padding,",left=").concat(t.padding,",bottom=").concat(t.padding,",right=").concat(t.padding,"]"),"elk.layered.spacing.nodeNodeBetweenLayers":t.layerSpacing.toString(),"elk.layered.spacing.edgeNodeBetweenLayers":"10","elk.layered.spacing.edgeEdgeBetweenLayers":"10","elk.edgeRouting":"POLYLINE","elk.layered.unnecessaryBendpoints":"false","elk.layered.edgeRouting.orthogonal.mode":"DIRECTION_BASED","elk.layered.edgeRouting.orthogonal.spacing":"5","elk.layered.edgeRouting.orthogonal.nodeOverlapRatio":"0.1","elk.layered.compaction.connectedComponents":"true","elk.layered.compaction.postCompaction.strategy":"LEFT_RIGHT","elk.separateConnectedComponents":"true","elk.layered.nodePlacement.strategy":"NETWORK_SIMPLEX","elk.layered.nodePlacement.favorStraightEdges":"true","elk.layered.crossingMinimization.strategy":"LAYER_SWEEP","elk.layered.crossingMinimization.semiInteractive":"true","elk.hierarchyHandling":"SEPARATE_CHILDREN","elk.layered.considerModelOrder.strategy":"NONE","elk.edgeLabels.placement":"CENTER","elk.edgeLabels.inline":"true","elk.spacing.edgeLabel":"5","elk.edgeLabels.avoidOverlap":"false","elk.edgeLabels.considerModelOrder":"false","elk.layered.edgeLabels.sideSelection":"ALWAYS_UP"};return i&&(a["elk.spacing.nodeNode"]=Math.max(.7*t.nodeSpacing,30).toString(),a["elk.layered.spacing.nodeNodeBetweenLayers"]=Math.max(.7*t.layerSpacing,30).toString()),a}function T(t){return P.apply(this,arguments)}function P(){var t;return t=S().m(function t(e){var r,o,i,a,c,l,s,u,d,f,h,p,g,y,m,A,v=arguments;return S().w(function(t){for(;;)switch(t.p=t.n){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:{},t.n=1,n.e(726).then(n.t.bind(n,401,23)).then(function(t){return t.default});case 1:if(o=t.v,i=new o,a=j(r,!1),c={id:"root",layoutOptions:D(a,r),children:[],edges:[]},l=new Map,e.nodesMap.forEach(function(t){if(t.id){l.set(t.id,t);var e=Math.max(t.width||200,150),n=Math.max(t.height||100,250);c.children.push({id:t.id,x:t.x,y:t.y,width:e+50,height:n+50,layoutOptions:{"elk.position":"","elk.nodeSize.constraints":"[FIXED_SIZE]"}})}}),e.edges.forEach(function(t){var e,n;if(t.id&&null!==(e=t.from)&&void 0!==e&&e.id&&null!==(n=t.to)&&void 0!==n&&n.id)if(l.has(t.from.id)&&l.has(t.to.id)){var r=t.label&&t.label.trim()?Math.min(7*t.label.length,200):0,o={id:t.id,sources:[t.from.id],targets:[t.to.id],labels:t.label&&t.label.trim()?[{id:"".concat(t.id,"-label"),text:t.label,width:r,height:20,layoutOptions:{"elk.edgeLabels.placement":"CENTER","elk.edgeLabels.inline":"true"}}]:[]};c.edges.push(o)}else console.warn("Skipping edge ".concat(t.id,": source ").concat(t.from.id," or target ").concat(t.to.id," not found in nodes"))}),c.id&&c.children){t.n=2;break}throw new Error("Invalid ELK graph structure");case 2:return t.p=2,t.n=3,i.layout(c);case 3:return s=t.v,u=[],d=[],f=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;null===(e=t.children)||void 0===e||e.forEach(function(t){t.children?f(t,n+(t.x||0),r+(t.y||0)):u.push({id:t.id,x:n+(t.x||0)+(t.width||0)/2,y:r+(t.y||0)+(t.height||0)/2})})},h=function(t){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;null===(n=t.edges)||void 0===n||n.forEach(function(t){var n,r=[];t.sections&&t.sections.length>0&&t.sections.forEach(function(t){t.startPoint&&r.push({x:o+t.startPoint.x,y:i+t.startPoint.y}),t.bendPoints&&t.bendPoints.length>0&&t.bendPoints.forEach(function(t){r.push({x:o+t.x,y:i+t.y})}),t.endPoint&&r.push({x:o+t.endPoint.x,y:i+t.endPoint.y})});var a=e.edges.find(function(e){return e.id===t.id});if(null!=a&&a.label&&a.label.trim())if(t.labels&&t.labels.length>0){var c=t.labels[0];void 0!==c.x&&void 0!==c.y&&(n={x:o+c.x+(c.width||0)/2,y:i+c.y+(c.height||0)/2})}else if(r.length>=2){var l=Math.floor(r.length/2);if(r.length%2==0){var s=r[l-1],u=r[l];n={x:(s.x+u.x)/2,y:(s.y+u.y)/2}}else n=r[l]}d.push({id:t.id,vertices:r,label:n})}),null===(r=t.children)||void 0===r||r.forEach(function(t){t.edges&&t.edges.length>0&&h(t,o+(t.x||0),i+(t.y||0))})},f(s),h(s),u.length>0&&(p=Math.min.apply(Math,B(u.map(function(t){return t.x}))),g=Math.min.apply(Math,B(u.map(function(t){return t.y}))),y=50-p,m=50-g,u.forEach(function(t){t.x+=y,t.y+=m}),d.forEach(function(t){t.vertices.forEach(function(t){t.x+=y,t.y+=m}),t.label&&(t.label.x+=y,t.label.y+=m)})),t.a(2,{nodes:u,edges:d});case 4:return t.p=4,A=t.v,console.warn("ELK layout failed, using fallback layout. Error:",A),t.a(2,_(e))}},t,null,[[2,4]])}),P=function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){O(i,r,o,a,c,"next",t)}function c(t){O(i,r,o,a,c,"throw",t)}a(void 0)})},P.apply(this,arguments)}function _(t){var e=[],n=[],r=0,o=0,i=Math.ceil(Math.sqrt(t.nodesMap.size)),a=0;return t.nodesMap.forEach(function(t){e.push({id:t.id,x:r,y:o}),++a>=i?(a=0,r=0,o+=300):r+=300}),t.edges.forEach(function(t){n.push({id:t.id,vertices:[]})}),{nodes:e,edges:n}}function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z(r.key),r)}}function V(t,e,n){return(e=z(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z(t){var e=function(t){if("object"!=L(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==L(e)?e:e+""}var G=function(){return t=function t(e,n,r){var o,i,a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),V(this,"versions",[]),V(this,"pos",0),V(this,"lastSavedPos",0),V(this,"tmpPreviousState",null),this.exportDoc=n,this.importDoc=r,this.change=(o=function(){return a.saveNow()},function(){var t=this;clearTimeout(i),i=setTimeout(function(){i=null,o.apply(t)},300)})},(e=[{key:"beforeChange",value:function(){this.tmpPreviousState||(this.tmpPreviousState=this.deepClone(this.exportDoc()))}},{key:"length",value:function(){return this.versions.length}},{key:"currentState",value:function(){return this.deepClone(this.versions[this.pos-1])}},{key:"saveNow",value:function(){if(!this.tmpPreviousState)throw Error("undo.change() was called without previously calling undo.beforeChange()!");this.versions[this.pos]=this.deepClone(this.exportDoc()),this.versions[this.pos-1]=this.tmpPreviousState,this.tmpPreviousState=null,this.pos+=1,this.versions.splice(this.pos)}},{key:"deepClone",value:function(t){return"undefined"!=typeof structuredClone?structuredClone(t):JSON.parse(JSON.stringify(t))}},{key:"undo",value:function(){if(!(this.pos<2)){this.pos-=1;var t=this.versions[this.pos-1];this.importDoc(this.deepClone(t))}}},{key:"redo",value:function(){if(!(this.pos>this.versions.length-1)){var t=this.versions[this.pos];this.importDoc(this.deepClone(t)),this.pos+=1}}},{key:"changed",value:function(){return this.pos!==this.lastSavedPos}},{key:"setSaved",value:function(){this.lastSavedPos=this.pos}}])&&N(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),F=n(447),q=20,R=function(t,e){Object.keys(e).forEach(function(n){var r=e[n];"number"==typeof r?t.style.setProperty(n,r.toString()):t.style.setProperty(n,r)})},W=function(t,e){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))};function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function Y(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return H(s,"_invoke",function(n,r,o){var i,c,l,s=0,u=o||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,l=t,f.n=n,a}};function h(n,r){for(c=n,l=r,e=0;!d&&s&&!o&&e<u.length;e++){var o,i=u[e],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,c=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,p){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),c=u,l=p;(e=c<2?t:l)||!d;){i||(c?c<3?(c>1&&(f.n=-1),h(c,l)):f.n=l:f.v=l);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(e){i=t,c=1,l=e}finally{s=1}}return{value:e,done:d}}}(n,o,i),!0),s}var a={};function c(){}function l(){}function s(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(H(e={},r,function(){return this}),e),d=s.prototype=c.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,H(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=s,H(d,"constructor",s),H(s,"constructor",l),l.displayName="GeneratorFunction",H(s,o,"GeneratorFunction"),H(d),H(d,o,"Generator"),H(d,r,function(){return this}),H(d,"toString",function(){return"[object Generator]"}),(Y=function(){return{w:i,m:f}})()}function H(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}H=function(t,e,n,r){function i(e,n){H(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},H(t,e,n,r)}function Z(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function X(t){return function(t){if(Array.isArray(t))return $(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||J(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||J(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){if(t){if("string"==typeof t)return $(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(t,e):void 0}}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach(function(e){nt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rt(r.key),r)}}function nt(t,e,n){return(e=rt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rt(t){var e=function(t){if("object"!=U(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==U(e)?e:e+""}var ot,it={thickness:3,color:"#999",opacity:1,fontSize:22,dashed:!0},at={width:280,height:180,background:"rgba(255, 255, 255, .9)",color:"#666",opacity:.9,stroke:"#999",fontSize:22,shape:"Box"},ct=function(){return t=function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),nt(this,"colorToVarMap",new Map),nt(this,"_gridVisible",!1),nt(this,"_snapToGrid",!0),nt(this,"_gridSize",25),nt(this,"_skipAutoFit",!1),this.id=e,this.name=n,this.edges=[],this.edgeVertices=new Map,this.nodesMap=new Map,this.groupsMap=new Map,this._undo=new G(this.id,function(){return r.exportLayout(!0)},function(t){return r.importLayout(t,!0)}),window.graph=this},e=[{key:"init",value:function(t){var e=this;t&&this.importLayout(t),this._undo=new G(this.id,function(){return e.exportLayout(!0)},function(t){return e.importLayout(t,!0)}),this._undo.length()&&this.importLayout(this._undo.currentState()),this._undo.beforeChange(),this._undo.change()}},{key:"addNode",value:function(t,e,n,r,o){if(this.nodesMap.has(t))throw Error("duplicate node: "+t);var i,a,c=o.shape||"Box",l="person"===c.toLowerCase();c.toLowerCase(),l?(i=280,a=240):(i=280,a=180);var s=tt({},o);delete s.width,delete s.height;var u={id:t,title:e,sub:n,description:r,style:tt(tt({},at),s),x:0,y:0,width:i,height:a,intersect:null};this.nodesMap.set(u.id,u)}},{key:"nodes",value:function(){return Array.from(this.nodesMap.values())}},{key:"addEdge",value:function(t,e,n,r,o,i){var a=this;o&&o.forEach(function(e,n){var r=e;r.id="v-".concat(t,"-").concat(n),a.edgeVertices.set(r.id,r)});var c={id:t,from:this.nodesMap.get(e),to:this.nodesMap.get(n),label:r,vertices:null,style:tt(tt({},it),i),initVertex:function(t){var e=t;return e.id||(e.id=function(t,e){var n=e.x,r=e.y;return"v-".concat(t,"-a-").concat(function(t){for(var e=2166136261,n=0;n<t.length;n++)e^=t.charCodeAt(n),e=Math.imul(e,16777619);return(e>>>0).toString(36)}("".concat(t,":").concat(n,":").concat(r)))}(c.id,t),a.edgeVertices.set(e.id,e)),e.edge=c,t},userDeletedVertices:!1};this.edges.push(c),o&&(c.vertices=o.map(function(t){return c.initVertex(t)}))}},{key:"addGroup",value:function(t,e,n,r){var o=this;if(this.groupsMap.has(t))console.error("Group exists: ".concat(t," ").concat(e));else{var i={id:t,name:e,x:null,y:null,width:null,height:null,nodes:n.map(function(n){var r=o.nodesMap.get(n)||o.groupsMap.get(n);return r||console.error("Node or group ".concat(n," not found for group ").concat(t,' "').concat(e,'"')),r}).filter(Boolean),style:r};this.groupsMap.set(t,i)}}},{key:"setNodeSelected",value:function(t,e){t.selected=e,e?t.ref.classList.add("selected"):t.ref.classList.remove("selected"),this.updateEdgesSel()}},{key:"updateEdgesSel",value:function(){this.edges.forEach(function(t){t.to.selected||t.from.selected?t.ref.classList.add("selected"):t.ref.classList.remove("selected")})}},{key:"moveNode",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(t){if(this._snapToGrid&&!r){var i=this.snapToGrid(e,n);e=i.x,n=i.y}t.x==e&&t.y==n||(o||this._undo.beforeChange(),t.x=e,t.y=n,d(t.ref,e,n),this.redrawEdges(t),this.redrawGroups(t),o||this._undo.change())}}},{key:"moveEdgeVertex",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this._snapToGrid&&!r){var i=this.snapToGrid(e,n);e=i.x,n=i.y}t.x==e&&t.y==n||(o||this._undo.beforeChange(),t.x=e,t.y=n,this.redrawEdge(t.edge),o||this._undo.change())}},{key:"moveSelected",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.nodes().forEach(function(o){return o.selected&&n.moveNode(o,o.x+t,o.y+e,r,!1)}),this.edgeVertices.forEach(function(o){return o.selected&&n.moveEdgeVertex(o,o.x+t,o.y+e,r,!1)})}},{key:"insertEdgeVertex",value:function(t,e,n,r){this._undo.beforeChange();var o=t.initVertex(e);o.selected=!0,r&&(t.vertices.forEach(function(t){return t.label=!1}),o.label=!0),t.vertices.splice(n-1,0,o),this.redrawEdge(t),this._undo.change()}},{key:"deleteEdgeVertex",value:function(t){this._undo.beforeChange();var e=t.edge.vertices.indexOf(t);e>=0&&(t.edge.vertices.splice(e,1),this.edgeVertices.delete(t.id),t.edge.userDeletedVertices=!0),this.redrawEdge(t.edge),this._undo.change()}},{key:"changed",value:function(){return this._undo.changed()}},{key:"undo",value:function(){this._undo.undo()}},{key:"redo",value:function(){this._undo.redo()}},{key:"alignTopLeft",value:function(){var t=this,e=this.calculateContentBounds(),n=100-e.x,r=100-e.y;this._skipAutoFit=!0,this._undo.beforeChange(),this.nodesMap.forEach(function(e){t.moveNode(e,e.x+n,e.y+r,!0,!0)}),this.edgeVertices.forEach(function(e){t.moveEdgeVertex(e,e.x+n,e.y+r,!0,!0)}),this._undo.change()}},{key:"resetPanTransform",value:function(){var t,e,n,r,o=At(),i=lt.querySelector("g.zoom");i&&(i.setAttribute("transform","scale(".concat(o,") translate(0, 0)")),t=this.calculateContentBounds(),e=At(),n=Math.max(lt.parentElement.clientWidth/e,t.x+t.width+q),r=Math.max(lt.parentElement.clientHeight/e,t.y+t.height+q),lt.setAttribute("width",String(n*e)),lt.setAttribute("height",String(r*e))),Bt(this.id),this._skipAutoFit=!1}},{key:"shouldSkipAutoFit",value:function(){return this._skipAutoFit}},{key:"resetView",value:function(){var t=lt.querySelector("g.zoom");t&&(t.setAttribute("transform","scale(1) translate(0, 0)"),wt()),Bt(this.id)}},{key:"redrawEdges",value:function(t){var e=this;this.edges.forEach(function(n){return(t==n.from||t==n.to)&&e.redrawEdge(n)}),this.updateEdgesSel()}},{key:"redrawEdge",value:function(t){var e=t.ref.parentElement;e.removeChild(t.ref),t.ref=ft(this,t),e.append(t.ref)}},{key:"redrawGroups",value:function(t){this.groupsMap.forEach(function(t){var e=t.ref.parentElement;e.removeChild(t.ref),ht(t),e.append(t.ref)})}},{key:"exportSVG",value:function(){var t=document.querySelector("svg#graph"),e=(t.querySelector("rect.elastic"),t.cloneNode(!0)),n=e.querySelector("rect.elastic");n&&n.remove();var r=this.calculateContentBounds(),o=r.width+100,i=r.height+100,a=50-r.x,c=50-r.y,l=e.querySelector("g.zoom");l&&l.setAttribute("transform","scale(1) translate(".concat(a,", ").concat(c,")")),e.setAttribute("viewBox","0 0 ".concat(o," ").concat(i)),e.setAttribute("width",String(o)),e.setAttribute("height",String(i)),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.convertStylesToCustomProperties(e);var s=document.createElement("script");return s.setAttribute("type","application/json"),this.metadata.layout=this.exportLayout(),s.append("<![CDATA["+JSON.stringify(this.metadata,null,2).replace(/]]>/g,"]]]>]><![CDATA[")+"]]>"),e.insertBefore(s,e.firstChild),e.outerHTML}},{key:"convertStylesToCustomProperties",value:function(t){var e=this;0!==this.colorToVarMap.size&&(t.querySelectorAll("[fill]").forEach(function(t){var n=t.getAttribute("fill");n&&e.colorToVarMap.has(n)&&t.setAttribute("fill","var(".concat(e.colorToVarMap.get(n),", ").concat(n,")"))}),t.querySelectorAll("[stroke]").forEach(function(t){var n=t.getAttribute("stroke");n&&e.colorToVarMap.has(n)&&t.setAttribute("stroke","var(".concat(e.colorToVarMap.get(n),", ").concat(n,")"))}))}},{key:"calculateContentBounds",value:function(){var t=1/0,e=1/0,n=-1/0,r=-1/0;return this.nodes().forEach(function(o){var i=o.x-o.width/2,a=o.x+o.width/2,c=o.y-o.height/2,l=o.y+o.height/2;t=Math.min(t,i),n=Math.max(n,a),e=Math.min(e,c),r=Math.max(r,l)}),this.edgeVertices.forEach(function(o){t=Math.min(t,o.x-5),n=Math.max(n,o.x+5),e=Math.min(e,o.y-5),r=Math.max(r,o.y+5)}),this.groupsMap.forEach(function(o){var i=o.x-o.width/2,a=o.x+o.width/2,c=o.y-o.height/2,l=o.y+o.height/2;t=Math.min(t,i),n=Math.max(n,a),e=Math.min(e,c),r=Math.max(r,l)}),this.edges.forEach(function(o){if(t=Math.min(t,o.from.x-10,o.to.x-10),n=Math.max(n,o.from.x+10,o.to.x+10),e=Math.min(e,o.from.y-10,o.to.y-10),r=Math.max(r,o.from.y+10,o.to.y+10),o.vertices&&o.vertices.forEach(function(o){t=Math.min(t,o.x-10),n=Math.max(n,o.x+10),e=Math.min(e,o.y-10),r=Math.max(r,o.y+10)}),o.label&&o.label.trim()){var i=(o.from.x+o.to.x)/2,a=(o.from.y+o.to.y)/2,c=10*o.label.length+50;t=Math.min(t,i-c),n=Math.max(n,i+c),e=Math.min(e,a-25),r=Math.max(r,a+25)}}),t===1/0?{x:0,y:0,width:100,height:100}:{x:t,y:e,width:n-t,height:r-e}}},{key:"exportLayout",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={};return this.nodes().forEach(function(t){return e[t.id]={x:t.x,y:t.y}}),this.edges.forEach(function(n){if(n.vertices){var r=n.vertices.map(function(t){return{x:t.x,y:t.y,label:t.label,auto:t.auto}});(r.length||t)&&(e["e-".concat(n.id)]=r),n.userDeletedVertices&&(e["e-".concat(n.id,"-deleted")]=!0)}}),e}},{key:"setSaved",value:function(){this._undo.setSaved()}},{key:"importLayout",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];Object.entries(t).forEach(function(t){var e=K(t,2),n=e[0],o=e[1];n.startsWith("e-")||void 0===o.x||void 0===o.y?n.startsWith("e-")&&Array.isArray(o)&&o.forEach(function(t){void 0!==t.x&&void 0!==t.y&&r.push({x:t.x,y:t.y})}):r.push({x:o.x,y:o.y})});var o=0,i=0;if(r.length>0){var a=Math.min.apply(Math,X(r.map(function(t){return t.x}))),c=Math.min.apply(Math,X(r.map(function(t){return t.y})));(a<-100||c<-100||Math.max.apply(Math,X(r.map(function(t){return t.x})))>3e3||Math.max.apply(Math,X(r.map(function(t){return t.y})))>2e3)&&(o=50-a,i=50-c)}Object.entries(t).forEach(function(t){var n=K(t,2),r=n[0],a=n[1],c=e.nodesMap.get(r);if(c)c.x=a.x+o,c.y=a.y+i;else if(r.startsWith("e-")&&!r.endsWith("-deleted")){var l=e.edges.find(function(t){return t.id==r.slice(2)});if(!l)return;return l.vertices&&l.vertices.forEach(function(t){return e.edgeVertices.delete(t.id)}),void(l.vertices=a.map(function(t){var e={x:t.x+o,y:t.y+i};Object.assign(e,t,{x:t.x+o,y:t.y+i});var n=l.initVertex(e);return t.auto&&(n.auto=!0),n}))}if(r.endsWith("-deleted")){var s=r.slice(2,-8),u=e.edges.find(function(t){return t.id==s});u&&!0===a&&(u.userDeletedVertices=!0)}}),n&&(this.nodes().forEach(function(t){return d(t.ref,t.x,t.y)}),this.edges.forEach(function(t){return e.redrawEdge(t)}),this.updateEdgesSel(),this.redrawGroups(null))}},{key:"autoLayout",value:(n=Y().m(function t(e){var n,r,o=this;return Y().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,T(this,e);case 1:n=t.v,this._undo.beforeChange(),n.nodes.forEach(function(t){var e=o.nodesMap.get(t.id);e&&o.moveNode(e,t.x,t.y,!1,!0)}),n.edges.forEach(function(t){var e=o.edges.find(function(e){return e.id==t.id});if(e){if(e.vertices&&e.vertices.forEach(function(t){t.id&&o.edgeVertices.delete(t.id)}),e.vertices=[],e.userDeletedVertices=!1,t.vertices&&t.vertices.length>0&&(e.vertices=t.vertices.map(function(t){var n=e.initVertex(t);return n.auto=!0,n})),t.label){e.vertices&&(e.vertices.forEach(function(t){t.label&&o.edgeVertices.delete(t.id)}),e.vertices=e.vertices.filter(function(t){return!t.label}));var n=e.initVertex(t.label);n.label=!0,n.auto=!0,e.vertices=e.vertices||[];var r=Mt(e.vertices,t.label,e.from,e.to),i=jt(e.vertices,t.label,r,e.from,e.to);n.x=i.x,n.y=i.y,e.vertices.splice(r,0,n),o.edgeVertices.set(n.id,n)}o.redrawEdge(e)}}),this.fitToView(),this._undo.change(),t.n=3;break;case 2:t.p=2,r=t.v,console.error("Auto layout failed:",r);case 3:return t.a(2)}},t,this,[[0,2]])}),r=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){Z(i,r,o,a,c,"next",t)}function c(t){Z(i,r,o,a,c,"throw",t)}a(void 0)})},function(t){return r.apply(this,arguments)})},{key:"alignSelectionV",value:function(){var t=this,e=this.nodes().filter(function(t){return t.selected});e.push.apply(e,X(Array.from(this.edgeVertices.values()).filter(function(t){return t.selected})));var n=Math.min.apply(Math,X(e.map(function(t){return t.y})));this.nodesMap.forEach(function(e){return e.selected&&t.moveNode(e,e.x,n,!1,!1)}),this.edgeVertices.forEach(function(e){return e.selected&&t.moveEdgeVertex(e,e.x,n,!1,!1)})}},{key:"alignSelectionH",value:function(){var t=this,e=this.nodes().filter(function(t){return t.selected});e.push.apply(e,X(Array.from(this.edgeVertices.values()).filter(function(t){return t.selected})));var n=Math.min.apply(Math,X(e.map(function(t){return t.x})));this.nodesMap.forEach(function(e){return e.selected&&t.moveNode(e,n,e.y,!1,!1)}),this.edgeVertices.forEach(function(e){return e.selected&&t.moveEdgeVertex(e,n,e.y,!1,!1)})}},{key:"distributeSelectionH",value:function(){var t=this,e=this.nodes().filter(function(t){return t.selected}),n=Array.from(this.edgeVertices.values()).filter(function(t){return t.selected});if(!(e.length+n.length<3)){this._undo.beforeChange();var r=[].concat(X(e),X(n));r.sort(function(t,e){return t.x-e.x});var o=r[0].x,i=(r[r.length-1].x-o)/(r.length-1);r.forEach(function(e,n){var r=o+n*i;"title"in e?t.moveNode(e,r,e.y,!1,!0):t.moveEdgeVertex(e,r,e.y,!1,!0)}),this._undo.change()}}},{key:"distributeSelectionV",value:function(){var t=this,e=this.nodes().filter(function(t){return t.selected}),n=Array.from(this.edgeVertices.values()).filter(function(t){return t.selected});if(!(e.length+n.length<3)){this._undo.beforeChange();var r=[].concat(X(e),X(n));r.sort(function(t,e){return t.y-e.y});var o=r[0].y,i=(r[r.length-1].y-o)/(r.length-1);r.forEach(function(e,n){var r=o+n*i;"title"in e?t.moveNode(e,e.x,r,!1,!0):t.moveEdgeVertex(e,e.x,r,!1,!0)}),this._undo.change()}}},{key:"setEdgeSelected",value:function(t,e){e&&(this.setNodeSelected(t.from,!0),this.setNodeSelected(t.to,!0)),this.updateEdgesSel()}},{key:"fitToView",value:function(){var t,e,n=this.calculateContentBounds();if(0!==n.width&&0!==n.height){var r=(null===(t=lt.parentElement)||void 0===t?void 0:t.clientWidth)||800,o=(null===(e=lt.parentElement)||void 0===e?void 0:e.clientHeight)||600,i=(r-80)/n.width,a=(o-80)/n.height,c=Math.min(i,a),l=Math.max(Math.min(c,2),.1),s=r/2-(n.x+n.width/2)*l,u=o/2-(n.y+n.height/2)*l,d=lt.querySelector("g.zoom");d&&d.setAttribute("transform","translate(".concat(s,", ").concat(u,") scale(").concat(l,")")),wt(),St(this.id)}}},{key:"saveLayoutState",value:function(){return this.exportLayout(!0)}},{key:"restoreLayoutState",value:function(t){this.importLayout(t,!0)}},{key:"isGridVisible",value:function(){return this._gridVisible}},{key:"isSnapToGrid",value:function(){return this._snapToGrid}},{key:"getGridSize",value:function(){return this._gridSize}},{key:"toggleGrid",value:function(){this._gridVisible=!this._gridVisible,this.updateGridDisplay(),window.dispatchEvent(new CustomEvent("gridStateChanged"))}},{key:"toggleSnapToGrid",value:function(){this._snapToGrid=!this._snapToGrid,window.dispatchEvent(new CustomEvent("gridStateChanged"))}},{key:"snapAllToGrid",value:function(){var t=this;this._snapToGrid&&(this._undo.beforeChange(),this.nodes().forEach(function(e){var n=Math.round(e.x/t._gridSize)*t._gridSize,r=Math.round(e.y/t._gridSize)*t._gridSize;t.moveNode(e,n,r,!1,!0)}),this._undo.change())}},{key:"snapToGrid",value:function(t,e){return{x:Math.round(t/this._gridSize)*this._gridSize,y:Math.round(e/this._gridSize)*this._gridSize}}},{key:"updateGridDisplay",value:function(){if(lt){var t=lt.querySelector("#grid-pattern");t&&t.remove();var e=lt.querySelector("#grid-background");if(e&&e.remove(),this._gridVisible){var n=lt.querySelector("defs");n||(n=document.createElementNS("http://www.w3.org/2000/svg","defs"),lt.insertBefore(n,lt.firstChild));var r=document.createElementNS("http://www.w3.org/2000/svg","pattern");r.id="grid-pattern",r.setAttribute("width",this._gridSize.toString()),r.setAttribute("height",this._gridSize.toString()),r.setAttribute("patternUnits","userSpaceOnUse");var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M ".concat(this._gridSize," 0 L 0 0 0 ").concat(this._gridSize)),o.setAttribute("fill","none"),o.setAttribute("stroke","#d0d0d0"),o.setAttribute("stroke-width","1"),o.setAttribute("opacity","0.8"),r.appendChild(o),n.appendChild(r);var i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.id="grid-background",i.setAttribute("x","-10000"),i.setAttribute("y","-10000"),i.setAttribute("width","20000"),i.setAttribute("height","20000"),i.setAttribute("fill","url(#grid-pattern)"),i.setAttribute("pointer-events","none");var a=lt.querySelector("g.zoom");a&&a.insertBefore(i,a.firstChild)}}}}],e&&et(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}(),lt=document.querySelector("svg#graph");lt||((lt=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("id","graph"),lt.addEventListener("click",function(t){return ot(t)})),lt.setAttribute("width","100%"),lt.setAttribute("height","100%");var st,ut=function(t,e,n){lt.innerHTML='\n<defs>\n\t<marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" \n\t\tmarkerWidth="8" markerHeight="8" orient="auto" markerUnits="strokeWidth">\n\t\t<path fill="context-stroke" stroke="none" d="M0,0 L10,5 L0,10 Z" class="arrowHead"/>\n\t</marker>\n\t<g id="icon-circle" transform="translate(0,-12)" class="icon">\n\t\t<circle cx="7" cy="7" r="7"/>\n\t</g>\n\t<g id="icon-cube" transform="translate(0, -14)" class="icon">\n\t\t<path d="M 5 0 h 10 v 10 l -5 5 h -10 v -10 l 5 -5 M 0 5 h 10 v 10 M 15 0 l -5 5"/>\n\t</g>\n\t<filter id="shadow">\n\t\t<feDropShadow dx="3" dy="3" stdDeviation="5" flood-color="#00000030" flood-opacity="1"></feDropShadow>\n\t</filter>\n</defs>',document.body.append(lt),lt.__data=t,st=e,ot=function(t){},dt(t);var r=u.rect(300,300,50,50,0,"elastic");return lt.append(r),t.updateGridDisplay(),mt(lt,n),{svg:lt,setZoom:vt}},dt=function(t){var e=u.element("g",{},"zoom"),n=u.element("g",{},"nodes"),r=u.element("g",{},"edges"),o=u.element("g",{},"groups");e.append(o,r,n),t.nodesMap.forEach(function(e){!function(t,e){window.gdata=e;var n=t.width,r=(t.height,u.element("g",{},"node"));r.setAttribute("id",t.id),t.selected&&r.classList.add("selected"),d(r,t.x,t.y);var o=t.style.shape||"Box",i=(E[o.toLowerCase()]||E.box)(r,t);i.classList.add("nodeBorder"),R(i,Ct.nodeBorder),i.setAttribute("fill",t.style.background),i.setAttribute("stroke",t.style.stroke),i.setAttribute("stroke-width","3"),i.setAttribute("opacity",String(t.style.opacity)),kt(i,t.style.border);var a=u.element("g"),c=Number(r.getAttribute("label-offset-y"))||0,l=Math.max(n-24,80),s=t.style.fontSize,f=u.textArea(t.title,.95*l,s,!0,0,c,"middle"),h=f.txt,p=f.dy;R(h,Ct.nodeText),h.setAttribute("fill",t.style.color),h.setAttribute("data-field","name"),a.append(h),c+=p+6;var g=u.text("[".concat(t.sub,"]"),{x:0,y:c,"text-anchor":"middle"});R(g,Ct.nodeText),g.setAttribute("fill",t.style.color),g.setAttribute("font-size",String(.75*t.style.fontSize)),a.append(g),c+=12,c+=6;var y=Math.min(.8*t.style.fontSize,16),m=u.textArea(t.description,.95*l,y,!1,0,c,"middle"),A=m.txt,v=m.dy;R(A,Ct.nodeText),A.setAttribute("fill",t.style.color),A.setAttribute("data-field","description"),a.append(A),d(a,0,-(c+=v)/2),r.append(a),r.__data=t,t.ref=r}(e,t),n.append(e.ref)}),t.edges.forEach(function(e){ft(t,e),r.append(e.ref)}),t.groupsMap.forEach(function(t){ht(t),o.append(t.ref)}),lt.append(e)};function ft(t,e){var n=e.from,r=e.to,o=u.element("g",{},"edge");o.setAttribute("id",e.id),o.setAttribute("data-from",e.from.id),o.setAttribute("data-to",e.to.id);var i=(e.style.position||50)/100,a=function(t,e){var n=t.from,r=t.to,o=t.vertices?t.vertices.concat():[];if(0==o.length&&!t.userDeletedVertices){var i=e.edges.filter(function(e){return e.from==t.from&&e.to==t.to}),a=0;if(i.length>1){a=i.indexOf(t)-(i.length-1)/2;var c=0,l=0;Math.abs(n.x-r.x)>Math.abs(n.y-r.y)?l=70*a:c=200*a;var s=t.initVertex({x:(n.x+r.x)/2+c,y:(n.y+r.y)/2+l});s.label=!0,s.auto=!0,o.push(s)}}o.unshift(n),o.push(r);for(var u=o[o.length-1],d=1;d<o.length-1;d++)if(!o[d].label){u=o[d];break}for(var f=o[0],h=o.length-2;h>0;h--)if(!o[h].label){f=o[h];break}var p=function(t,e){var n,r=(null===(n=t.style)||void 0===n||null===(n=n.shape)||void 0===n?void 0:n.toLowerCase())||"box",o=e.x-t.x,i=e.y-t.y;if(t.x,t.y,Math.abs(o)<.01&&Math.abs(i)<.01)return{x:t.x+t.width/2,y:t.y};if("cylinder"===r){var a=t.width,c=a/2,l=c/(5.5+a/70),s=t.height/2,u=Math.atan2(i,o),d=Math.cos(u),f=Math.sin(u),h=1/0;Math.abs(d)>.01&&(h=Math.min(h,Math.abs(c/d))),Math.abs(f)>.01&&(h=Math.min(h,Math.abs(s/f)));var p=t.x+d*h,g=t.y+f*h,y=t.y-s+l,m=t.y+s-l;if(g<y||g>m){var A=g<y?t.y-s+l:t.y+s-l,v=1/(c*c),b=-2*t.x/(c*c),x=b*b-4*v*(t.x*t.x/(c*c)+(A-t.y)*(A-t.y)/(l*l)-1);if(x>=0){var w=Math.sqrt(x),k=(-b+w)/(2*v),C=(-b-w)/(2*v);return{x:o>0?Math.max(k,C):Math.min(k,C),y:A}}}return{x:p,y:g}}if("circle"===r){var E=t.width/2,S=Math.atan2(i,o);return{x:t.x+Math.cos(S)*E,y:t.y+Math.sin(S)*E}}if("ellipse"===r){var I=.55*t.width,B=.45*t.width,M=Math.atan2(i,o),O=Math.cos(M),j=Math.sin(M),D=Math.sqrt(I*I*j*j+B*B*O*O);return{x:t.x+I*O*B/D,y:t.y+B*j*I/D}}var T=t.width/2,P=t.height/2,_=Math.atan2(i,o),L=Math.cos(_),N=Math.sin(_),V=1/0;return Math.abs(L)>.01&&(V=Math.min(V,Math.abs(T/L))),Math.abs(N)>.01&&(V=Math.min(V,Math.abs(P/N))),{x:t.x+L*V,y:t.y+N*V}},g=p(n,u),y=p(r,f);return o[0]=g,o[o.length-1]=y,o}(e,t),c=function(t,e,n){var r=t.find(function(t){return t.label});if(!r){for(var o=0,i=1;i<t.length;i++)o+=W(t[i-1],t[i]);r={x:n.x,y:n.y};for(var a=0,c=1;c<t.length;c++){var l=W(t[c-1],t[c]);if(a+l>o*e){var s=(o*e-a)/l;r={x:t[c-1].x+(t[c].x-t[c-1].x)*s,y:t[c-1].y+(t[c].y-t[c-1].y)*s};break}a+=l}}return r}(a,i,n),l=function(t,e){var n=t.y-20,r=e.style.fontSize,o=u.textArea(e.label,200,r,!1,t.x,n,"middle"),i=o.txt,a=o.dy,c=o.maxW;a-=r/2,i.setAttribute("y",String(n-a/2)),c+=r,R(i,Ct.edgeText),i.setAttribute("stroke","none"),i.setAttribute("font-size",String(e.style.fontSize)),i.setAttribute("fill",e.style.color);var l={x:t.x-c/2,y:n-a/2,width:c,height:a},s=u.rect(l.width,l.height,l.x,l.y);return R(s,Ct.edgeRect),i.setAttribute("data-field","label"),l.x+=l.width/2,l.y+=l.height/2,{bg:s,txt:i,bbox:l}}(c,e),s=l.bg,d=l.txt,p=l.bbox;o.append(s,d);var g=function(t,e,n,r){for(var o,i=[],a=1;a<t.length;a++)i.push({p:t[a-1],q:t[a]});if(i.length>0&&i[i.length-1],function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(f(r.p,e))f(r.q,e)?(t.splice(n,1),n-=1):r.p=h(r.p,r.q,e)[0];else if(f(r.q,e))r.q=h(r.p,r.q,e)[0];else{var o=h(r.p,r.q,e);if(2==o.length){Math.abs(o[0].x-r.p.x)+Math.abs(o[0].y-r.p.y)>Math.abs(o[1].x-r.p.x)+Math.abs(o[1].y-r.p.y)&&o.reverse();var i={p:o[1],q:r.q};r.q=o[0],t.splice(n+1,0,i),n+=1}}}}(i,e),i.length>0){o="M".concat(i[0].p.x,",").concat(i[0].p.y);for(var c=0;c<i.length;c++){var l=i[c];o+=" L".concat(l.q.x,",").concat(l.q.y)}}else o="M".concat(n.x,",").concat(n.y," L").concat(r.x,",").concat(r.y);return{segments:i,path:o}}(a,p,n,r),y=(g.segments,g.path),m=u.path(y,{"marker-end":"url(#arrow)"},"edge");return m.setAttribute("fill","none"),m.setAttribute("stroke",e.style.color),m.setAttribute("stroke-width",String(e.style.thickness)),m.setAttribute("stroke-linecap","round"),e.style.dashed&&m.setAttribute("stroke-dasharray","8"),o.append(m),e.vertices=a.slice(1,-1).map(function(t){if("id"in t&&"edge"in t){var n=t;return n.edge=e,n}return e.initVertex(t)}),e.vertices.forEach(function(t,e){var n=t;n.ref=u.element("circle",{id:n.id,cx:t.x,cy:t.y,r:7,fill:"none"},"v-dot"),n.selected&&n.ref.classList.add("selected"),n.auto&&n.ref.classList.add("auto"),o.append(n.ref)}),e.ref=o,o}function ht(t){if(0!=t.nodes.length){var e=u.element("g",{},"group"),n={x:1e100,y:1e100},r={x:0,y:0};t.nodes.forEach(function(t){var e,o=(null===(e=t.style)||void 0===e||null===(e=e.shape)||void 0===e?void 0:e.toLowerCase())||"box",i=t.height/2,a=t.height/2;if("robot"===o){var c=.12*t.height;i=t.height/2+c,a=t.height/2}else if("hexagon"===o){var l=t.width/2*.866;i=l,a=l}var s={x:t.x-t.width/2,y:t.y-i,width:t.width,height:i+a};n.x=Math.min(n.x,s.x),n.y=Math.min(n.y,s.y),r.x=Math.max(r.x,s.x+s.width),r.y=Math.max(r.y,s.y+s.height)});var o=Math.max(r.x-n.x,200),i=r.y-n.y,a={x:n.x-25,y:n.y-25,width:o+50,height:i+50+30},c=u.rect(a.width,a.height,a.x,a.y);t.x=a.x+a.width/2,t.y=a.y+a.height/2,t.width=a.width,t.height=a.height,R(c,Ct.groupRect),t.style.stroke&&c.setAttribute("stroke",t.style.stroke),t.style.background&&c.setAttribute("fill",t.style.background);var l=u.text(t.name,{x:n.x,y:a.y+a.height-Ct.groupText["font-size"]});R(l,Ct.groupText),t.style.color&&l.setAttribute("fill",t.style.color),e.append(c,l),t.ref=e}}function pt(t,e){var n={dst:Number.POSITIVE_INFINITY,pos:-1,edge:null,prj:null};return t.edges.forEach(function(t){for(var r=t.vertices||[],o=[t.from].concat(X(r),[t.to]),i=1;i<o.length;i++){var a=y(e,o[i-1],o[i]),c=m(e,a);c>50||c<n.dst&&(n={dst:c,pos:i,prj:a,edge:t})}}),n.edge?n:null}function gt(t){var e=lt.getBoundingClientRect(),n=At(),r=xt();return{x:(t.clientX-e.x-r.x)/n,y:(t.clientY-e.y-r.y)/n}}function yt(t,e,n){var r=[],o=null,i=!1,a={x:0,y:0},c=null,l=!1,s=[];return function(u){var d=null;function f(t){return"changedTouches"in t&&t.changedTouches?t.changedTouches[0]:t}function h(n){d&&function(n,s,u){if(!l&&(Math.abs(s)>3||Math.abs(u)>3)&&(l=!0,c)){var d=e.getSelection();d.length=0,d.push(c.node),e.setSelection(d),r=[{x:c.node.x,y:c.node.y,n:c.node}],c=null}if(i)!function(e,n){var r=t.querySelector("g.zoom");if(r){var o=At();r.setAttribute("transform","translate(".concat(e,", ").concat(n,") scale(").concat(o,")"))}}(a.x+s,a.y+u);else if(r.length>0&&l){var f=e.getZoom(),h=s/f,p=u/f;r.forEach(function(t){e.moveNode(t.n,t.x+h,t.y+p)}),e.setDragging(!0)}else o&&(o.update(n),e.setDragging(!0))}(n=f(n),n.clientX-d.ex,n.clientY-d.ey)}function p(n){document.removeEventListener("touchmove",h),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",p),document.removeEventListener("touchend",p),function(n){if(e.setDragging(!1),c&&!l){var a=e.getSelection();a.length=0,a.push(c.node),e.setSelection(a)}if(o){var s=o.end();s?e.boxSelection(s,n.shiftKey):r.length||e.setSelection([]),o=null}if(i&&l){var u=t.__data;u&&u.id&&St(u.id)}c=null,l=!1,i=!1,e.updatePanning()}(f(n)),d=null}function g(s){s=f(s),d={ex:s.clientX,ey:s.clientY},function(s){s.preventDefault(),l=!1,c=null;var u=e.nodeFromEvent(s),d=s.shiftKey?"pan"===n?"select":"pan":n;if(u)if("pan"===d){i=!1,o=null;var f=e.getSelection();e.isSelected(u)?r=f.map(function(t){return{x:t.x,y:t.y,n:t}}):(e.setSelection([u]),r=[{x:u.x,y:u.y,n:u}])}else{i=!1,o=null;var h=e.getSelection();if(s.shiftKey&&"select"===n){if(e.isSelected(u)){var p=h.findIndex(function(t){return t.id===u.id});p>=0&&h.splice(p,1)}else h.push(u);e.setSelection(h),r=h.map(function(t){return{x:t.x,y:t.y,n:t}})}else e.isSelected(u)?(r=h.map(function(t){return{x:t.x,y:t.y,n:t}}),c=null):(c={node:u,shiftKey:s.shiftKey},r=[{x:u.x,y:u.y,n:u}])}else"pan"===d?(i=!0,o=null,s.clientX,s.clientY,a=function(){var e=t.querySelector("g.zoom");if(!e)return{x:0,y:0};var n=(e.getAttribute("transform")||"").match(/translate\(([^,]+),([^)]+)\)/);return n?{x:parseFloat(n[1])||0,y:parseFloat(n[2])||0}:{x:0,y:0}}(),r=[],e.setSelection([])):(i=!1,o=function(){var e=0,n=0,r=null;return{ini:function(o){var i=gt(o);e=i.x,n=i.y,(r=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("fill","rgba(0, 100, 255, 0.1)"),r.setAttribute("stroke","rgba(0, 100, 255, 0.5)"),r.setAttribute("stroke-width","1"),r.setAttribute("stroke-dasharray","3,3"),r.setAttribute("x",String(e)),r.setAttribute("y",String(n)),r.setAttribute("width","0"),r.setAttribute("height","0");var a=t.querySelector("g.zoom");a?a.appendChild(r):t.appendChild(r)},update:function(t){if(r){var o=gt(t),i=o.x,a=o.y,c=Math.min(e,i),l=Math.min(n,a),s=Math.abs(i-e),u=Math.abs(a-n);r.setAttribute("x",String(c)),r.setAttribute("y",String(l)),r.setAttribute("width",String(s)),r.setAttribute("height",String(u))}},end:function(){if(!r)return null;var t=parseFloat(r.getAttribute("x")||"0"),e=parseFloat(r.getAttribute("y")||"0"),n=parseFloat(r.getAttribute("width")||"0"),o=parseFloat(r.getAttribute("height")||"0");return r.remove(),r=null,n>5&&o>5?{x:t,y:e,width:n,height:o,left:t,top:e,right:t+n,bottom:e+o}:null}}}(),o&&o.ini(s),r=[])}(s),document.addEventListener("touchmove",h),document.addEventListener("mousemove",h),document.addEventListener("mouseup",p),document.addEventListener("touchend",p)}u.addEventListener("mousedown",g),u.addEventListener("touchstart",g),s.push({element:u,event:"mousedown",handler:g},{element:u,event:"touchstart",handler:g})}(t),function(){s.forEach(function(t){var e=t.element,n=t.event,r=t.handler;e.removeEventListener(n,r)})}}function mt(t,e){var n=t.__cursorInteractionCleanup;function r(t){return t.__data}n&&n();var o=function(){return r(t)},i=[],a=function(t){o().changed()&&(t.preventDefault(),t.returnValue="")};function c(e,n){e.selected=n;var r=t.querySelector("#"+e.id);e.selected?r.classList.add("selected"):r.classList.remove("selected")}window.addEventListener("beforeunload",a),i.push({element:window,event:"beforeunload",handler:a});var l=function(e){if(e.altKey){var n=pt(o(),gt(e));if(n){var r=n.prj,i=t.querySelector("g.edges"),a=i.querySelector("#prj");a||(a=u.element("circle",{id:"prj",cx:r.x,cy:r.y,r:7}),i.append(a)),a.setAttribute("cx",String(r.x)),a.setAttribute("cy",String(r.y))}else d()}};t.addEventListener("mousemove",l),i.push({element:t,event:"mousemove",handler:l});var s=function(t){var e=(0,F.Yp)(t,!0);e!=F.Zj&&e!=F._s&&d()};function d(){var e=t.querySelector("g.edges #prj");e&&e.parentElement.removeChild(e)}window.addEventListener("keyup",s),i.push({element:window,event:"keyup",handler:s});var h=function(t){var e=(0,F.Yp)(t,!0);if(e==F._s||e==F.Zj){var n=pt(o(),gt(t));if(n){var r=n.edge,i=n.pos,a=n.prj;o().insertEdgeVertex(r,a,i,e==F._s),d()}}};t.addEventListener("click",h),i.push({element:t,event:"click",handler:h});var p=function(e){var n=.1*Math.sign(e.deltaY),r=At(),o=Math.max(.1,Math.min(5,r-n));if(o!==r){var i=t.getBoundingClientRect();bt(o,e.clientX-i.left,e.clientY-i.top),e.preventDefault();var a=t.__data;a&&a.id&&St(a.id)}};t.addEventListener("wheel",p),i.push({element:t,event:"wheel",handler:p});var g=function(t){var e=(0,F.Yp)(t);switch(e&&t.preventDefault(),e){case F.bl:Array.from(o().edgeVertices.values()).filter(function(t){return t.selected}).forEach(function(t){o().deleteEdgeVertex(t)});break;case F.jg:o().undo();break;case F.Pl:o().redo();break;case F.Ur:bt(Math.min(5,1.2*At())),St(o().id);break;case F.hU:bt(Math.max(.1,At()/1.2)),St(o().id);break;case F.i1:bt(1),St(o().id);break;case F.mD:o().fitToView();break;case F.F:o().nodes().forEach(function(t){return o().setNodeSelected(t,!0)}),o().edgeVertices.forEach(function(t){return c(t,!0)});break;case F.Gn:o().nodes().forEach(function(t){return o().setNodeSelected(t,!1)}),o().edgeVertices.forEach(function(t){return c(t,!1)})}};window.addEventListener("keydown",g),i.push({element:window,event:"keydown",handler:g});var y=yt(t,{nodeFromEvent:function(t){t.preventDefault();var e=t.target.closest("g.nodes g.node");return e?r(e):(e=t.target.closest("g.edges g.edge .v-dot"))?o().edgeVertices.get(e.id):null},setSelection:function(t){o().nodes().forEach(function(e){return o().setNodeSelected(e,t.some(function(t){return t.id==e.id}))}),o().edgeVertices.forEach(function(e){return c(e,t.some(function(t){return t.id==e.id}))}),st(o().nodes().find(function(t){return t.selected}))},setDragging:function(t){},isSelected:function(t){return t.selected},getSelection:function(){var t=o().nodes().filter(function(t){return t.selected});return o().edgeVertices.forEach(function(e){return e.selected&&t.push(e)}),t},getZoom:At,moveNode:function(t,e,n){o().nodesMap.has(t.id)?o().moveNode(t,e,n):(t.auto=!1,o().moveEdgeVertex(t,e,n))},boxSelection:function(t,e){o().nodesMap.forEach(function(n){var r,i,a;(r={x:(a=n).x-a.width/2,y:a.y-a.height/2,width:a.width,height:a.height}).x<(i=t).x+i.width&&r.y<i.y+i.height&&r.x+r.width>i.x&&r.y+r.height>i.y?o().setNodeSelected(n,!n.selected):e||o().setNodeSelected(n,!1)}),o().edgeVertices.forEach(function(n){f(n,t,!1)?c(n,!n.selected):e||c(n,!1)}),st(o().nodes().find(function(t){return t.selected}))},updatePanning:wt},e);t.__cursorInteractionCleanup=function(){i.forEach(function(t){var e=t.element,n=t.event,r=t.handler;e.removeEventListener(n,r)}),y&&y()}}function At(){if(!lt)return 1;var t=lt.querySelector("g.zoom");if(!t)return 1;var e=(t.getAttribute("transform")||"").match(/scale\(([^)]+)\)/);return e&&parseFloat(e[1])||1}function vt(t){if(lt){var e=lt.querySelector("g.zoom");if(e){var n=xt();e.setAttribute("transform","translate(".concat(n.x,", ").concat(n.y,") scale(").concat(t,")")),wt()}}}function bt(t,e,n){var r=lt.querySelector("g.zoom"),o=At();if(void 0===e||void 0===n){var i=lt.parentElement;i?(e=i.clientWidth/2,n=i.clientHeight/2):(e=lt.clientWidth/2,n=lt.clientHeight/2)}var a=xt(),c=e-(e-a.x)/o*t,l=n-(n-a.y)/o*t;r.setAttribute("transform","translate(".concat(c,", ").concat(l,") scale(").concat(t,")")),wt()}function xt(){if(!lt)return{x:0,y:0};var t=lt.querySelector("g.zoom");if(!t)return{x:0,y:0};var e=(t.getAttribute("transform")||"").match(/translate\(([^,]+),([^)]+)\)/);return e?{x:parseFloat(e[1])||0,y:parseFloat(e[2])||0}:{x:0,y:0}}function wt(){if(lt){var t=lt.querySelector("g.zoom");if(t){var e=t.getBBox(),n=At();if(lt.parentElement){var r=Math.max(lt.parentElement.clientWidth/n,e.x+e.width+q),o=Math.max(lt.parentElement.clientHeight/n,e.y+e.height+q);lt.setAttribute("width",String(r*n)),lt.setAttribute("height",String(o*n))}}}}var kt=function(t,e){"Dashed"==e?t.setAttribute("stroke-dasharray","4"):"Dotted"==e&&t.setAttribute("stroke-dasharray","2")},Ct={nodeBorder:{filter:"url(#shadow)"},nodeText:{"font-family":"Arial, sans-serif",stroke:"none"},edgeText:{"font-family":"Arial, sans-serif",stroke:"none"},edgeRect:{fill:"none",stroke:"none"},groupRect:{fill:"rgba(0, 0, 0, 0.02)",stroke:"#666","stroke-width":3,"stroke-dasharray":4},groupText:{"font-family":"Arial, sans-serif",fill:"#666","font-size":22,"font-weight":"bold",cursor:"default"}},Et=new Map;function St(t){if(lt){var e=At(),n=xt(),r={zoom:e,transform:{x:n.x,y:n.y}};Et.set(t,r)}}function It(t){if(!lt||!Et.has(t))return!1;var e=Et.get(t);if(!e)return!1;var n=lt.querySelector("g.zoom");return n&&(n.setAttribute("transform","scale(".concat(e.zoom,") translate(").concat(e.transform.x,", ").concat(e.transform.y,")")),wt()),!0}function Bt(t){Et.delete(t)}function Mt(t,e,n,r){if(0===t.length)return 0;for(var o=[n].concat(X(t),[r]),i=1/0,a=0,c=0;c<o.length-1;c++){var l=Ot(e,o[c],o[c+1]);l<i&&(i=l,a=c)}return a}function Ot(t,e,n){var r=t.x-e.x,o=t.y-e.y,i=n.x-e.x,a=n.y-e.y,c=r*i+o*a,l=i*i+a*a;if(0===l)return Math.sqrt(r*r+o*o);var s,u,d=c/l;d<0?(s=e.x,u=e.y):d>1?(s=n.x,u=n.y):(s=e.x+d*i,u=e.y+d*a);var f=t.x-s,h=t.y-u;return Math.sqrt(f*f+h*h)}function jt(t,e,n,r,o){var i=[r].concat(X(t),[o]);return function(t,e,n){var r=t.x-e.x,o=t.y-e.y,i=n.x-e.x,a=n.y-e.y,c=r*i+o*a,l=i*i+a*a;if(0===l)return{x:e.x,y:e.y};var s=c/l;return s=Math.max(0,Math.min(1,s)),{x:e.x+s*i,y:e.y+s*a}}(e,i[n],i[n+1])}},56:(t,e,n)=>{n.d(e,{A:()=>c});var r=n(314),o=n.n(r),i=n(997),a=n.n(i)()(o());a.push([t.id,"html, body, #root {\n    height: 100%;\n}\n\nbody {\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    color: #666;\n    margin: 0;\n}\n\n#root {\n    display: flex;\n    flex-direction: column;\n}\n#root > div.graph {\n    flex: 1;\n    overflow: auto;\n    position: relative;\n}\n\n.toolbar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 4px 10px;\n    background-color: #f0f0f0;\n    border-bottom: 1px solid #cccccc;\n}\n\n.toolbar > div {\n    display: flex;\n    align-items: center;\n}\n\n.toolbar button {\n    padding: 5px 8px;\n    margin: 0 2px;\n    cursor: pointer;\n}\n\n.toolbar button:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n}\n\n/* Drag mode toggle button styles */\n.toolbar button.mode-toggle {\n    position: relative;\n    border: 1px solid #8f9fc9;\n    width: 40px;\n    min-height: 28px;\n    background: linear-gradient(to bottom, #abb8db, #8f9fc9);\n    border-color: #8f9fc9;\n    color: white;\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, .2);\n}\n\n.toolbar button.mode-toggle:hover {\n    background: linear-gradient(to bottom, #bcc7e0, #abb8db);\n    border-color: #abb8db;\n}\n\n.toolbar button.mode-toggle.select-mode:active {\n    background: linear-gradient(to bottom, #8f9fc9, #7a8bb5);\n}\n\n/* Pan mode and active toggle - darker blue */\n.toolbar button.mode-toggle.pan-mode,\n.toolbar button.active-toggle {\n    background: linear-gradient(to bottom, #4a90e2, #357abd);\n    border-color: #2968a3;\n    box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);\n}\n\n.toolbar button.mode-toggle.pan-mode:hover,\n.toolbar button.active-toggle:hover {\n    background: linear-gradient(to bottom, #5ba0f2, #4585c7);\n}\n\n.toolbar button.mode-toggle.pan-mode:active {\n    background: linear-gradient(to bottom, #357abd, #2968a3);\n    box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);\n}\n\n/* Toggle buttons when inactive - gray styling */\n.toolbar button.inactive-toggle {\n    background: #c1c1c1;\n    color: #999;\n    border-color: #c1c1c1;\n    box-shadow: none;\n}\n\n.toolbar button.inactive-toggle:hover {\n    background: #b1b1b1;\n}\n\n.toolbar button.inactive-toggle:active {\n    background: #a1a1a1;\n}\n\n/* Toggle buttons when disabled and not active - gray like other disabled buttons */\n.toolbar button.mode-toggle:disabled:not(.pan-mode):not(.active-toggle),\n.toolbar button.active-toggle:disabled:not(.active-toggle) {\n    background: #c1c1c1;\n    color: #999;\n    border-color: #c1c1c1;\n    box-shadow: none;\n}\n\n/* Ensure Font Awesome icons are sized appropriately if not already handled */\n.toolbar button .fas {\n    font-size: 1em;\n    vertical-align: middle;\n}\n\n/* Zoom percentage display */\n.toolbar button.zoom-display {\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n    font-size: 11px;\n    font-weight: 600;\n    font-variant-numeric: tabular-nums;\n    min-width: 50px;  /* Wider to prevent size change between 99% and 100% */\n    padding: 6px 8px;\n    text-align: center;\n}\n\n.toolbar-group {\n    display: flex;\n    align-items: center;\n    margin-right: 25px; /* Large space between groups */\n}\n\n.toolbar-group:last-child {\n    margin-right: 0; /* Remove right margin from the last group (help button) */\n}\n\nbutton {\n    border: none;\n    background: linear-gradient(to bottom, #4a90e2, #357abd);\n    border-color: #2968a3;\n    border-radius: 3px;\n    padding: 6px 10px;\n    color: #fff;\n    outline: none;\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, .2);\n    margin-right: 5px;\n    min-width: 32px;\n    min-height: 28px;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 14px;\n    line-height: 1;\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    position: relative;\n}\n\nbutton:hover {\n    background: linear-gradient(to bottom, #5ba0f2, #4585c7);\n}\n\nbutton:active {\n    background: linear-gradient(to bottom, #357abd, #2968a3);\n}\n\nbutton:last-child {\n    margin-right: 0;\n}\n\n/* Save button when no changes - gray */\nbutton.action {\n    background: #c1c1c1;\n    color: #999;\n}\n\nbutton.action:active {\n    background: #b1b1b1;\n}\n\n/* Save button when there are changes - orange */\nbutton.grp {\n    background: linear-gradient(to bottom, #ee9564, #de7d48);\n    margin-right: 0;\n}\n\nbutton.grp:active {\n    background: #d67540;\n}\n\n/* Auto-arrange button with AI purple to blue gradient */\nbutton.auto-arrange {\n    background: linear-gradient(135deg, #6A4C93, #4a90e2);\n    border-color: #4a4c93;\n}\n\nbutton.auto-arrange:hover {\n    background: linear-gradient(135deg, #7B5DAD, #5ba0f2);\n    border-color: #5a5ca3;\n}\n\nbutton.auto-arrange:active {\n    background: linear-gradient(135deg, #593B83, #357abd);\n    border-color: #3a3c83;\n}\n\nselect {\n    border: 1px solid #ccc;\n    background: white;\n    border-radius: 3px;\n    padding: 3px 7px;\n    color: #666;\n    outline: none;\n    margin-right: 5px;\n    font-size: 12px;\n}\n\nselect:disabled {\n    background: #f5f5f5;\n    color: #999;\n}\n\nbutton:disabled {\n    background: #c1c1c1;\n    color: #999;\n}\n\n#root > div > svg {\n    position: absolute;\n    user-select: none;\n}\n\n\n.node.selected .nodeBorder, .edge.selected path, .edge.selected rect {\n    stroke: #29c229;\n}\n.edge .v-dot {\n    fill: transparent;\n    stroke: transparent;\n    stroke-width: 3px;\n    cursor: pointer;\n    transition: stroke 0.15s ease;\n}\n.edge .v-dot:hover {\n    stroke: #999;\n    fill: rgba(153, 153, 153, 0.1);\n}\n.edge .v-dot.selected {\n    stroke: #29c229;\n    fill: rgba(41, 194, 41, 0.1);\n}\n.edge .v-dot.selected:hover {\n    stroke: #29c229;\n    fill: rgba(41, 194, 41, 0.2);\n}\n.edge .v-dot.auto.selected {\n    stroke: #777;\n    fill: rgba(119, 119, 119, 0.1);\n}\n.edge .v-dot.auto.selected:hover {\n    stroke: #777;\n    fill: rgba(119, 119, 119, 0.2);\n}\ncircle#prj {\n    fill: none;\n    stroke: #777;\n}\n\n.nodeShadow {\n    fill: none;\n    stroke-width: 4px;\n    stroke: rgba(0, 0, 0, 0.13);\n}\n\ng.node {\n    user-select: none;\n    cursor: default;\n}\n\ng.node text {\n    pointer-events: none;\n}\n\n.icon {\n    fill: #aaa;\n    stroke: #fff;\n}\n#icon-cube {\n    fill: #aaa;\n}\n\n/* Ensure all button icons are uncolored */\nbutton .icon,\nbutton svg,\nbutton path {\n    fill: currentColor !important;\n    stroke: none !important;\n}\n\n/* Font Awesome icon styling in buttons */\nbutton i {\n    font-size: 12px;\n    color: inherit;\n}\n\nrect.elastic {\n    pointer-events: none;\n    stroke: none;\n    fill: #3bd8281f;\n    display: none;\n}\nrect.elastic.on {\n    display: block;\n}\n\n.popover {\n    position: absolute;\n    top: 50px;\n    bottom: 10px;\n    overflow: auto;\n    right: 10px;\n    background: ghostwhite;\n    padding: 30px;\n    box-shadow: 3px 3px 5px rgba(0,0,0, .2);\n    border: solid 1px #eee;\n}\n\n.popover th {\n    text-align: left;\n    padding: 20px 0px 10px;\n}\n.popover td {\n    padding-right: 20px;\n    font-size: 14px;\n}\n\n/* Simple tooltip system with smart positioning */\n[data-tooltip] {\n    position: relative;\n}\n\n[data-tooltip]:hover::after {\n    content: attr(data-tooltip);\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    background: rgba(0, 0, 0, 0.9);\n    color: white;\n    padding: 6px 12px;\n    border-radius: 4px;\n    font-size: 12px !important;\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif !important;\n    font-weight: normal !important;\n    white-space: nowrap;\n    z-index: 1000;\n    pointer-events: none;\n    margin-top: 5px;\n    animation: tooltip-appear 0.1s ease-out;\n    min-width: 120px;\n    max-width: calc(100vw - 20px);\n    box-sizing: border-box;\n}\n\n[data-tooltip]:hover::before {\n    content: '';\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    border: 4px solid transparent;\n    border-bottom-color: rgba(0, 0, 0, 0.9);\n    z-index: 1000;\n    pointer-events: none;\n    margin-top: 1px;\n    animation: tooltip-appear 0.1s ease-out;\n}\n\n/* Special handling for rightmost elements that might overflow */\n.toolbar-group:nth-last-child(-n+2) button[data-tooltip]:hover::after {\n    /* Apply to last 2 toolbar groups (save and help buttons) */\n    left: auto;\n    right: 0;\n    transform: none;\n}\n\n.toolbar-group:nth-last-child(-n+2) button[data-tooltip]:hover::before {\n    /* Apply to last 2 toolbar groups (save and help buttons) */\n    left: auto;\n    right: 16px;\n    transform: none;\n}\n\n@keyframes tooltip-appear {\n    from {\n        opacity: 0;\n        transform: translateX(-50%) translateY(-5px);\n    }\n    to {\n        opacity: 1;\n        transform: translateX(-50%) translateY(0);\n    }\n}\n\nselect {\n    position: relative;\n}\n\n/* Robot shape internal elements - inherit stroke from parent node */\n.node .robot-eye-socket {\n    fill: none;\n    stroke: inherit;\n    stroke-width: 2;\n}\n\n.node .robot-eye {\n    fill: currentColor;\n    stroke: none;\n}\n\n.node .robot-mouth {\n    stroke: inherit;\n}\n\n.node .robot-antenna {\n    stroke: inherit;\n}\n\n.node .robot-antenna-ball {\n    fill: currentColor;\n    stroke: inherit;\n    stroke-width: 1.5;\n}\n\n.node .robot-panel {\n    stroke: inherit;\n}\n\n.node .robot-indicator {\n    fill: currentColor;\n    stroke: none;\n}","",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"AAAA;IACI,YAAY;AAChB;;AAEA;IACI,uFAAuF;IACvF,WAAW;IACX,SAAS;AACb;;AAEA;IACI,aAAa;IACb,sBAAsB;AAC1B;AACA;IACI,OAAO;IACP,cAAc;IACd,kBAAkB;AACtB;;AAEA;IACI,aAAa;IACb,8BAA8B;IAC9B,mBAAmB;IACnB,iBAAiB;IACjB,yBAAyB;IACzB,gCAAgC;AACpC;;AAEA;IACI,aAAa;IACb,mBAAmB;AACvB;;AAEA;IACI,gBAAgB;IAChB,aAAa;IACb,eAAe;AACnB;;AAEA;IACI,YAAY;IACZ,mBAAmB;AACvB;;AAEA,mCAAmC;AACnC;IACI,kBAAkB;IAClB,yBAAyB;IACzB,WAAW;IACX,gBAAgB;IAChB,wDAAwD;IACxD,qBAAqB;IACrB,YAAY;IACZ,yCAAyC;AAC7C;;AAEA;IACI,wDAAwD;IACxD,qBAAqB;AACzB;;AAEA;IACI,wDAAwD;AAC5D;;AAEA,6CAA6C;AAC7C;;IAEI,wDAAwD;IACxD,qBAAqB;IACrB,2CAA2C;AAC/C;;AAEA;;IAEI,wDAAwD;AAC5D;;AAEA;IACI,wDAAwD;IACxD,2CAA2C;AAC/C;;AAEA,gDAAgD;AAChD;IACI,mBAAmB;IACnB,WAAW;IACX,qBAAqB;IACrB,gBAAgB;AACpB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,mBAAmB;AACvB;;AAEA,mFAAmF;AACnF;;IAEI,mBAAmB;IACnB,WAAW;IACX,qBAAqB;IACrB,gBAAgB;AACpB;;AAEA,6EAA6E;AAC7E;IACI,cAAc;IACd,sBAAsB;AAC1B;;AAEA,4BAA4B;AAC5B;IACI,mEAAmE;IACnE,eAAe;IACf,gBAAgB;IAChB,kCAAkC;IAClC,eAAe,GAAG,sDAAsD;IACxE,gBAAgB;IAChB,kBAAkB;AACtB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,kBAAkB,EAAE,+BAA+B;AACvD;;AAEA;IACI,eAAe,EAAE,0DAA0D;AAC/E;;AAEA;IACI,YAAY;IACZ,wDAAwD;IACxD,qBAAqB;IACrB,kBAAkB;IAClB,iBAAiB;IACjB,WAAW;IACX,aAAa;IACb,yCAAyC;IACzC,iBAAiB;IACjB,eAAe;IACf,gBAAgB;IAChB,oBAAoB;IACpB,mBAAmB;IACnB,uBAAuB;IACvB,eAAe;IACf,cAAc;IACd,uFAAuF;IACvF,kBAAkB;AACtB;;AAEA;IACI,wDAAwD;AAC5D;;AAEA;IACI,wDAAwD;AAC5D;;AAEA;IACI,eAAe;AACnB;;AAEA,uCAAuC;AACvC;IACI,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,mBAAmB;AACvB;;AAEA,gDAAgD;AAChD;IACI,wDAAwD;IACxD,eAAe;AACnB;;AAEA;IACI,mBAAmB;AACvB;;AAEA,wDAAwD;AACxD;IACI,qDAAqD;IACrD,qBAAqB;AACzB;;AAEA;IACI,qDAAqD;IACrD,qBAAqB;AACzB;;AAEA;IACI,qDAAqD;IACrD,qBAAqB;AACzB;;AAEA;IACI,sBAAsB;IACtB,iBAAiB;IACjB,kBAAkB;IAClB,gBAAgB;IAChB,WAAW;IACX,aAAa;IACb,iBAAiB;IACjB,eAAe;AACnB;;AAEA;IACI,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,kBAAkB;IAClB,iBAAiB;AACrB;;;AAGA;IACI,eAAe;AACnB;AACA;IACI,iBAAiB;IACjB,mBAAmB;IACnB,iBAAiB;IACjB,eAAe;IACf,6BAA6B;AACjC;AACA;IACI,YAAY;IACZ,8BAA8B;AAClC;AACA;IACI,eAAe;IACf,4BAA4B;AAChC;AACA;IACI,eAAe;IACf,4BAA4B;AAChC;AACA;IACI,YAAY;IACZ,8BAA8B;AAClC;AACA;IACI,YAAY;IACZ,8BAA8B;AAClC;AACA;IACI,UAAU;IACV,YAAY;AAChB;;AAEA;IACI,UAAU;IACV,iBAAiB;IACjB,2BAA2B;AAC/B;;AAEA;IACI,iBAAiB;IACjB,eAAe;AACnB;;AAEA;IACI,oBAAoB;AACxB;;AAEA;IACI,UAAU;IACV,YAAY;AAChB;AACA;IACI,UAAU;AACd;;AAEA,0CAA0C;AAC1C;;;IAGI,6BAA6B;IAC7B,uBAAuB;AAC3B;;AAEA,yCAAyC;AACzC;IACI,eAAe;IACf,cAAc;AAClB;;AAEA;IACI,oBAAoB;IACpB,YAAY;IACZ,eAAe;IACf,aAAa;AACjB;AACA;IACI,cAAc;AAClB;;AAEA;IACI,kBAAkB;IAClB,SAAS;IACT,YAAY;IACZ,cAAc;IACd,WAAW;IACX,sBAAsB;IACtB,aAAa;IACb,uCAAuC;IACvC,sBAAsB;AAC1B;;AAEA;IACI,gBAAgB;IAChB,sBAAsB;AAC1B;AACA;IACI,mBAAmB;IACnB,eAAe;AACnB;;AAEA,iDAAiD;AACjD;IACI,kBAAkB;AACtB;;AAEA;IACI,2BAA2B;IAC3B,kBAAkB;IAClB,SAAS;IACT,SAAS;IACT,2BAA2B;IAC3B,8BAA8B;IAC9B,YAAY;IACZ,iBAAiB;IACjB,kBAAkB;IAClB,0BAA0B;IAC1B,8EAA8E;IAC9E,8BAA8B;IAC9B,mBAAmB;IACnB,aAAa;IACb,oBAAoB;IACpB,eAAe;IACf,uCAAuC;IACvC,gBAAgB;IAChB,6BAA6B;IAC7B,sBAAsB;AAC1B;;AAEA;IACI,WAAW;IACX,kBAAkB;IAClB,SAAS;IACT,SAAS;IACT,2BAA2B;IAC3B,6BAA6B;IAC7B,uCAAuC;IACvC,aAAa;IACb,oBAAoB;IACpB,eAAe;IACf,uCAAuC;AAC3C;;AAEA,gEAAgE;AAChE;IACI,2DAA2D;IAC3D,UAAU;IACV,QAAQ;IACR,eAAe;AACnB;;AAEA;IACI,2DAA2D;IAC3D,UAAU;IACV,WAAW;IACX,eAAe;AACnB;;AAEA;IACI;QACI,UAAU;QACV,4CAA4C;IAChD;IACA;QACI,UAAU;QACV,yCAAyC;IAC7C;AACJ;;AAEA;IACI,kBAAkB;AACtB;;AAEA,oEAAoE;AACpE;IACI,UAAU;IACV,eAAe;IACf,eAAe;AACnB;;AAEA;IACI,kBAAkB;IAClB,YAAY;AAChB;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,kBAAkB;IAClB,eAAe;IACf,iBAAiB;AACrB;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,kBAAkB;IAClB,YAAY;AAChB",sourcesContent:["html, body, #root {\n    height: 100%;\n}\n\nbody {\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    color: #666;\n    margin: 0;\n}\n\n#root {\n    display: flex;\n    flex-direction: column;\n}\n#root > div.graph {\n    flex: 1;\n    overflow: auto;\n    position: relative;\n}\n\n.toolbar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 4px 10px;\n    background-color: #f0f0f0;\n    border-bottom: 1px solid #cccccc;\n}\n\n.toolbar > div {\n    display: flex;\n    align-items: center;\n}\n\n.toolbar button {\n    padding: 5px 8px;\n    margin: 0 2px;\n    cursor: pointer;\n}\n\n.toolbar button:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n}\n\n/* Drag mode toggle button styles */\n.toolbar button.mode-toggle {\n    position: relative;\n    border: 1px solid #8f9fc9;\n    width: 40px;\n    min-height: 28px;\n    background: linear-gradient(to bottom, #abb8db, #8f9fc9);\n    border-color: #8f9fc9;\n    color: white;\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, .2);\n}\n\n.toolbar button.mode-toggle:hover {\n    background: linear-gradient(to bottom, #bcc7e0, #abb8db);\n    border-color: #abb8db;\n}\n\n.toolbar button.mode-toggle.select-mode:active {\n    background: linear-gradient(to bottom, #8f9fc9, #7a8bb5);\n}\n\n/* Pan mode and active toggle - darker blue */\n.toolbar button.mode-toggle.pan-mode,\n.toolbar button.active-toggle {\n    background: linear-gradient(to bottom, #4a90e2, #357abd);\n    border-color: #2968a3;\n    box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);\n}\n\n.toolbar button.mode-toggle.pan-mode:hover,\n.toolbar button.active-toggle:hover {\n    background: linear-gradient(to bottom, #5ba0f2, #4585c7);\n}\n\n.toolbar button.mode-toggle.pan-mode:active {\n    background: linear-gradient(to bottom, #357abd, #2968a3);\n    box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);\n}\n\n/* Toggle buttons when inactive - gray styling */\n.toolbar button.inactive-toggle {\n    background: #c1c1c1;\n    color: #999;\n    border-color: #c1c1c1;\n    box-shadow: none;\n}\n\n.toolbar button.inactive-toggle:hover {\n    background: #b1b1b1;\n}\n\n.toolbar button.inactive-toggle:active {\n    background: #a1a1a1;\n}\n\n/* Toggle buttons when disabled and not active - gray like other disabled buttons */\n.toolbar button.mode-toggle:disabled:not(.pan-mode):not(.active-toggle),\n.toolbar button.active-toggle:disabled:not(.active-toggle) {\n    background: #c1c1c1;\n    color: #999;\n    border-color: #c1c1c1;\n    box-shadow: none;\n}\n\n/* Ensure Font Awesome icons are sized appropriately if not already handled */\n.toolbar button .fas {\n    font-size: 1em;\n    vertical-align: middle;\n}\n\n/* Zoom percentage display */\n.toolbar button.zoom-display {\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n    font-size: 11px;\n    font-weight: 600;\n    font-variant-numeric: tabular-nums;\n    min-width: 50px;  /* Wider to prevent size change between 99% and 100% */\n    padding: 6px 8px;\n    text-align: center;\n}\n\n.toolbar-group {\n    display: flex;\n    align-items: center;\n    margin-right: 25px; /* Large space between groups */\n}\n\n.toolbar-group:last-child {\n    margin-right: 0; /* Remove right margin from the last group (help button) */\n}\n\nbutton {\n    border: none;\n    background: linear-gradient(to bottom, #4a90e2, #357abd);\n    border-color: #2968a3;\n    border-radius: 3px;\n    padding: 6px 10px;\n    color: #fff;\n    outline: none;\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, .2);\n    margin-right: 5px;\n    min-width: 32px;\n    min-height: 28px;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 14px;\n    line-height: 1;\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    position: relative;\n}\n\nbutton:hover {\n    background: linear-gradient(to bottom, #5ba0f2, #4585c7);\n}\n\nbutton:active {\n    background: linear-gradient(to bottom, #357abd, #2968a3);\n}\n\nbutton:last-child {\n    margin-right: 0;\n}\n\n/* Save button when no changes - gray */\nbutton.action {\n    background: #c1c1c1;\n    color: #999;\n}\n\nbutton.action:active {\n    background: #b1b1b1;\n}\n\n/* Save button when there are changes - orange */\nbutton.grp {\n    background: linear-gradient(to bottom, #ee9564, #de7d48);\n    margin-right: 0;\n}\n\nbutton.grp:active {\n    background: #d67540;\n}\n\n/* Auto-arrange button with AI purple to blue gradient */\nbutton.auto-arrange {\n    background: linear-gradient(135deg, #6A4C93, #4a90e2);\n    border-color: #4a4c93;\n}\n\nbutton.auto-arrange:hover {\n    background: linear-gradient(135deg, #7B5DAD, #5ba0f2);\n    border-color: #5a5ca3;\n}\n\nbutton.auto-arrange:active {\n    background: linear-gradient(135deg, #593B83, #357abd);\n    border-color: #3a3c83;\n}\n\nselect {\n    border: 1px solid #ccc;\n    background: white;\n    border-radius: 3px;\n    padding: 3px 7px;\n    color: #666;\n    outline: none;\n    margin-right: 5px;\n    font-size: 12px;\n}\n\nselect:disabled {\n    background: #f5f5f5;\n    color: #999;\n}\n\nbutton:disabled {\n    background: #c1c1c1;\n    color: #999;\n}\n\n#root > div > svg {\n    position: absolute;\n    user-select: none;\n}\n\n\n.node.selected .nodeBorder, .edge.selected path, .edge.selected rect {\n    stroke: #29c229;\n}\n.edge .v-dot {\n    fill: transparent;\n    stroke: transparent;\n    stroke-width: 3px;\n    cursor: pointer;\n    transition: stroke 0.15s ease;\n}\n.edge .v-dot:hover {\n    stroke: #999;\n    fill: rgba(153, 153, 153, 0.1);\n}\n.edge .v-dot.selected {\n    stroke: #29c229;\n    fill: rgba(41, 194, 41, 0.1);\n}\n.edge .v-dot.selected:hover {\n    stroke: #29c229;\n    fill: rgba(41, 194, 41, 0.2);\n}\n.edge .v-dot.auto.selected {\n    stroke: #777;\n    fill: rgba(119, 119, 119, 0.1);\n}\n.edge .v-dot.auto.selected:hover {\n    stroke: #777;\n    fill: rgba(119, 119, 119, 0.2);\n}\ncircle#prj {\n    fill: none;\n    stroke: #777;\n}\n\n.nodeShadow {\n    fill: none;\n    stroke-width: 4px;\n    stroke: rgba(0, 0, 0, 0.13);\n}\n\ng.node {\n    user-select: none;\n    cursor: default;\n}\n\ng.node text {\n    pointer-events: none;\n}\n\n.icon {\n    fill: #aaa;\n    stroke: #fff;\n}\n#icon-cube {\n    fill: #aaa;\n}\n\n/* Ensure all button icons are uncolored */\nbutton .icon,\nbutton svg,\nbutton path {\n    fill: currentColor !important;\n    stroke: none !important;\n}\n\n/* Font Awesome icon styling in buttons */\nbutton i {\n    font-size: 12px;\n    color: inherit;\n}\n\nrect.elastic {\n    pointer-events: none;\n    stroke: none;\n    fill: #3bd8281f;\n    display: none;\n}\nrect.elastic.on {\n    display: block;\n}\n\n.popover {\n    position: absolute;\n    top: 50px;\n    bottom: 10px;\n    overflow: auto;\n    right: 10px;\n    background: ghostwhite;\n    padding: 30px;\n    box-shadow: 3px 3px 5px rgba(0,0,0, .2);\n    border: solid 1px #eee;\n}\n\n.popover th {\n    text-align: left;\n    padding: 20px 0px 10px;\n}\n.popover td {\n    padding-right: 20px;\n    font-size: 14px;\n}\n\n/* Simple tooltip system with smart positioning */\n[data-tooltip] {\n    position: relative;\n}\n\n[data-tooltip]:hover::after {\n    content: attr(data-tooltip);\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    background: rgba(0, 0, 0, 0.9);\n    color: white;\n    padding: 6px 12px;\n    border-radius: 4px;\n    font-size: 12px !important;\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif !important;\n    font-weight: normal !important;\n    white-space: nowrap;\n    z-index: 1000;\n    pointer-events: none;\n    margin-top: 5px;\n    animation: tooltip-appear 0.1s ease-out;\n    min-width: 120px;\n    max-width: calc(100vw - 20px);\n    box-sizing: border-box;\n}\n\n[data-tooltip]:hover::before {\n    content: '';\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    border: 4px solid transparent;\n    border-bottom-color: rgba(0, 0, 0, 0.9);\n    z-index: 1000;\n    pointer-events: none;\n    margin-top: 1px;\n    animation: tooltip-appear 0.1s ease-out;\n}\n\n/* Special handling for rightmost elements that might overflow */\n.toolbar-group:nth-last-child(-n+2) button[data-tooltip]:hover::after {\n    /* Apply to last 2 toolbar groups (save and help buttons) */\n    left: auto;\n    right: 0;\n    transform: none;\n}\n\n.toolbar-group:nth-last-child(-n+2) button[data-tooltip]:hover::before {\n    /* Apply to last 2 toolbar groups (save and help buttons) */\n    left: auto;\n    right: 16px;\n    transform: none;\n}\n\n@keyframes tooltip-appear {\n    from {\n        opacity: 0;\n        transform: translateX(-50%) translateY(-5px);\n    }\n    to {\n        opacity: 1;\n        transform: translateX(-50%) translateY(0);\n    }\n}\n\nselect {\n    position: relative;\n}\n\n/* Robot shape internal elements - inherit stroke from parent node */\n.node .robot-eye-socket {\n    fill: none;\n    stroke: inherit;\n    stroke-width: 2;\n}\n\n.node .robot-eye {\n    fill: currentColor;\n    stroke: none;\n}\n\n.node .robot-mouth {\n    stroke: inherit;\n}\n\n.node .robot-antenna {\n    stroke: inherit;\n}\n\n.node .robot-antenna-ball {\n    fill: currentColor;\n    stroke: inherit;\n    stroke-width: 1.5;\n}\n\n.node .robot-panel {\n    stroke: inherit;\n}\n\n.node .robot-indicator {\n    fill: currentColor;\n    stroke: none;\n}"],sourceRoot:""}]);const c=a},447:(t,e,n)=>{n.d(e,{DE:()=>M,F:()=>g,Gg:()=>m,Gn:()=>y,Hd:()=>j,Help:()=>G,J8:()=>x,Jk:()=>B,OE:()=>_,Op:()=>T,Pl:()=>c,Ur:()=>d,Vy:()=>O,W0:()=>i,Yp:()=>V,Zj:()=>l,_$:()=>E,_s:()=>s,_t:()=>D,aX:()=>S,b3:()=>A,bl:()=>u,hU:()=>f,hZ:()=>P,i1:()=>p,iD:()=>w,jg:()=>a,l8:()=>k,mD:()=>h,mt:()=>C,rB:()=>b,t9:()=>I,uK:()=>v});var r=n(378),o=n(17),i="save",a="undo",c="redo",l="add-vertex",s="add-label-vertex",u="del-vertex",d="zoom-in",f="zoom-out",h="zoom-fit",p="zoom-100",g="select-all",y="deselect",m="move-left",A="move-right",v="move-up",b="move-down",x="move-left-fine",w="move-right-fine",k="move-up-fine",C="move-down-fine",E="help",S="toggle_drag_mode",I="align_horizontal",B="align_vertical",M="distribute_horizontal",O="distribute_vertical",j="auto_layout",D="reset_position",T="toggle_grid",P="toggle_snap_to_grid",_="snap_all_to_grid",L=[{name:"Help",list:[{id:E,help:"Show/hide this help",combinations:[{key:"?",shift:!0},{key:"F1",shift:!0}]}]},{name:"File",list:[{id:i,help:"Save",combinations:[{key:"s",ctrl:!0}]}]},{name:"History",list:[{id:a,help:"Undo",combinations:[{ctrl:!0,key:"z"}]},{id:c,help:"Redo",combinations:[{ctrl:!0,shift:!0,key:"z"},{ctrl:!0,key:"y"}]}]},{name:"Relationship editing",list:[{id:l,help:"Add relationship vertex",combinations:[{alt:!0,click:!0}]},{id:s,help:"Add label anchor relationship vertex",combinations:[{alt:!0,shift:!0,click:!0}]},{id:u,help:"Remove relationship vertex",combinations:[{key:"DELETE"},{key:"BACKSPACE"}]}]},{name:"Zoom",list:[{id:d,help:"Zoom in",combinations:[{ctrl:!0,key:"="}]},{id:f,help:"Zoom out",combinations:[{ctrl:!0,key:"-"}]},{id:h,help:"Zoom - fit",combinations:[{ctrl:!0,key:"9"}]},{id:p,help:"Zoom 100%",combinations:[{ctrl:!0,key:"0"}]},{id:"wheel_zoom",help:"Zoom in/out with mouse wheel",combinations:[{wheel:!0}]}]},{name:"Mouse Interactions",list:[{id:"pan-view",help:"Pan view (drag empty space)",combinations:[{click:!0}]},{id:"select-element",help:"Select element",combinations:[{click:!0}]},{id:"multi-select",help:"Add/remove from selection",combinations:[{shift:!0,click:!0}]},{id:"box-select",help:"Box selection (drag empty space)",combinations:[{shift:!0,click:!0}]},{id:"move-elements",help:"Move selected elements",combinations:[{click:!0}]}]},{name:"Select",list:[{id:g,help:"Select All",combinations:[{ctrl:!0,key:"a"}]},{id:y,help:"Deselect",combinations:[{key:"ESC"}]}]},{name:"Move",list:[{id:v,help:"Move up (grid increment)",combinations:[{key:"UP"}]},{id:k,help:"Move up (1 pixel)",combinations:[{key:"UP",shift:!0}]},{id:A,help:"Move right (grid increment)",combinations:[{key:"RIGHT"}]},{id:w,help:"Move right (1 pixel)",combinations:[{key:"RIGHT",shift:!0}]},{id:b,help:"Move down (grid increment)",combinations:[{key:"DOWN"}]},{id:C,help:"Move down (1 pixel)",combinations:[{key:"DOWN",shift:!0}]},{id:m,help:"Move left (grid increment)",combinations:[{key:"LEFT"}]},{id:x,help:"Move left (1 pixel)",combinations:[{key:"LEFT",shift:!0}]}]},{name:"View",list:[{id:S,help:"Toggle between pan and select mode",combinations:[{key:"t"}]},{id:D,help:"Reset position and view",combinations:[{key:"Home",ctrl:!0}]}]},{name:"Alignment",list:[{id:I,help:"Align selected elements horizontally",combinations:[{key:"h",ctrl:!0,shift:!0}]},{id:B,help:"Align selected elements vertically",combinations:[{key:"a",ctrl:!0,shift:!0}]},{id:M,help:"Distribute selected elements horizontally",combinations:[{key:"h",ctrl:!0,alt:!0}]},{id:O,help:"Distribute selected elements vertically",combinations:[{key:"v",ctrl:!0,alt:!0}]}]},{name:"Layout",list:[{id:j,help:"Auto layout all elements",combinations:[{key:"l",ctrl:!0}]}]},{name:"Grid",list:[{id:T,help:"Toggle grid visibility",combinations:[{key:"g",ctrl:!0}]},{id:P,help:"Toggle snap to grid",combinations:[{key:"g",ctrl:!0,shift:!0}]},{id:_,help:"Snap all elements to grid",combinations:[{key:"g",ctrl:!0,alt:!0}]}]}],N=L.reduce(function(t,e){return t.concat(e.list)},[]).reduce(function(t,e){return t[e.id]=e,t},{}),V=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object.keys(N).filter(function(r){return function(t,e,n,r){return e.combinations.some(function(e){if(Boolean(e.shift)!=t.shiftKey)return!1;if(e.ctrl&&!(0,o.SA)(t))return!1;if(Boolean(e.alt)!=t.altKey)return!1;if(n)return e.click;if(r)return e.wheel;if(e.key){var i=t;return"DELETE"==e.key?"Delete"==i.key:"BACKSPACE"==e.key?"Backspace"==i.key:"ESC"==e.key?"Escape"==i.key:"UP"==e.key?"ArrowUp"==i.key:"DOWN"==e.key?"ArrowDown"==i.key:"LEFT"==e.key?"ArrowLeft"==i.key:"RIGHT"==e.key?"ArrowRight"==i.key:e.key&&i.key&&e.key.toLowerCase()==i.key.toLowerCase()}return!1})}(t,N[r],e,n)});if(0!==r.length)return 1===r.length?r[0]:r.sort(function(t,e){var n=N[t],r=N[e],o=n.combinations[0],i=r.combinations[0],a=(o.shift?1:0)+(o.ctrl?1:0)+(o.alt?1:0);return(i.shift?1:0)+(i.ctrl?1:0)+(i.alt?1:0)-a})[0]},z=function(t){return[t.ctrl&&(0,o.sy)().toUpperCase(),t.shift&&"SHIFT",t.alt&&"ALT",t.key&&(t.key.length>1?t.key:'"'.concat(t.key.toUpperCase(),'"')),t.click&&"CLICK",t.wheel&&"WHEEL"].filter(Boolean).join(" + ")},G=function(){return r.createElement("div",{className:"popover"},r.createElement("h1",null,"Shortcuts"),r.createElement("table",null,r.createElement("tbody",null,L.map(function(t){return r.createElement(r.Fragment,null,r.createElement("tr",null,r.createElement("th",{colSpan:2},t.name)),t.list.map(function(t){return r.createElement("tr",null,r.createElement("td",null,t.combinations.map(z).join(", ")),r.createElement("td",null,t.help))}))}))))}},589:(t,e,n)=>{var r=n(512),o=n(378),i=n(922),a=n(270),c=n.n(a),l=n(7),s=n.n(l),u=n(669),d=n.n(u),f=n(566),h=n.n(f),p=n(106),g=n.n(p),y=n(527),m=n.n(y),A=n(56),v={};function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach(function(e){S(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function E(t,e,n){return e&&C(t.prototype,e),n&&C(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function S(t,e,n){return(e=I(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t){var e=function(t){if("object"!=b(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}v.styleTagTransform=m(),v.setAttributes=h(),v.insert=d().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=g(),c()(A.A,v),A.A&&A.A.locals&&A.A.locals,n(538);var B=function(){return E(function t(e){var n=this;k(this,t),S(this,"running",!1),S(this,"timeoutId",null),this.callback=e,this.handler=function(){n.running=!1,n.timeoutId=null,n.callback()}},[{key:"start",value:function(t){this.running&&this.stop(),this.timeoutId=setTimeout(this.handler,t),this.running=!0}},{key:"stop",value:function(){this.running&&null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.running=!1,this.timeoutId=null)}},{key:"isRunning",value:function(){return this.running}}])}(),M=function(){function t(e,n){var r=this;k(this,t),S(this,"socket",null),S(this,"connectionDesired",!1),S(this,"disconnectionReason",""),this.fileChangeHandler=e,this.options=w(w({},t.DEFAULT_OPTIONS),n),this.uri="ws://localhost:35729/livereload",this.nextDelay=this.options.minDelay,this.handshakeTimeout=new B(function(){return r.handleHandshakeTimeout()}),this.reconnectTimer=new B(function(){return r.attemptReconnection()})}return E(t,[{key:"connect",value:function(){this.connectionDesired=!0,this.isSocketConnected()||(this.prepareForConnection(),this.createWebSocket())}},{key:"disconnect",value:function(){this.connectionDesired=!1,this.reconnectTimer.stop(),this.isSocketConnected()&&(this.disconnectionReason="manual",this.socket.close())}},{key:"isSocketConnected",value:function(){return null!==this.socket&&this.socket.readyState===WebSocket.OPEN}},{key:"prepareForConnection",value:function(){this.reconnectTimer.stop(),this.disconnectionReason="cannot-connect"}},{key:"createWebSocket",value:function(){var t=this;this.socket=new WebSocket(this.uri),this.socket.onopen=function(){return t.handleOpen()},this.socket.onclose=function(){return t.handleClose()},this.socket.onmessage=function(e){return t.handleMessage(e)},this.socket.onerror=function(){return t.handleError()}}},{key:"handleOpen",value:function(){this.disconnectionReason="handshake-failed",this.startHandshake()}},{key:"handleClose",value:function(){console.log("WebSocket disconnected: ".concat(this.disconnectionReason,". Retry in ").concat(this.nextDelay,"ms")),this.scheduleReconnection()}},{key:"handleMessage",value:function(t){try{var e=JSON.parse(t.data);this.processMessage(e)}catch(t){console.error("Failed to parse WebSocket message:",t)}}},{key:"handleError",value:function(){}},{key:"processMessage",value:function(t){switch(t.command){case"hello":this.handleHelloMessage();break;case"reload":this.handleReloadMessage(t);break;default:console.log("Unknown WebSocket message received:",t)}}},{key:"handleHelloMessage",value:function(){this.handshakeTimeout.stop(),this.nextDelay=this.options.minDelay}},{key:"handleReloadMessage",value:function(t){this.reconnectTimer.stop(),this.connect(),t.path&&this.fileChangeHandler(t.path)}},{key:"startHandshake",value:function(){var e={command:"hello",protocols:t.LIVERELOAD_PROTOCOLS,ver:"3.3.1"};this.sendCommand(e),this.handshakeTimeout.start(this.options.handshakeTimeout)}},{key:"handleHandshakeTimeout",value:function(){this.isSocketConnected()&&(this.disconnectionReason="handshake-timeout",this.socket.close())}},{key:"attemptReconnection",value:function(){this.connectionDesired&&this.connect()}},{key:"scheduleReconnection",value:function(){this.connectionDesired&&(this.reconnectTimer.isRunning()||(this.reconnectTimer.start(this.nextDelay),this.nextDelay=Math.min(this.options.maxDelay,2*this.nextDelay)))}},{key:"sendCommand",value:function(t){this.isSocketConnected()&&this.socket.send(JSON.stringify(t))}}])}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function j(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return D(s,"_invoke",function(n,r,o){var i,c,l,s=0,u=o||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,l=t,f.n=n,a}};function h(n,r){for(c=n,l=r,e=0;!d&&s&&!o&&e<u.length;e++){var o,i=u[e],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,c=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,p){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),c=u,l=p;(e=c<2?t:l)||!d;){i||(c?c<3?(c>1&&(f.n=-1),h(c,l)):f.n=l:f.v=l);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(e){i=t,c=1,l=e}finally{s=1}}return{value:e,done:d}}}(n,o,i),!0),s}var a={};function c(){}function l(){}function s(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(D(e={},r,function(){return this}),e),d=s.prototype=c.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,D(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=s,D(d,"constructor",s),D(s,"constructor",l),l.displayName="GeneratorFunction",D(s,o,"GeneratorFunction"),D(d),D(d,o,"Generator"),D(d,r,function(){return this}),D(d,"toString",function(){return"[object Generator]"}),(j=function(){return{w:i,m:f}})()}function D(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}D=function(t,e,n,r){function i(e,n){D(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},D(t,e,n,r)}function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach(function(e){_(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _(t,e,n){return(e=function(t){var e=function(t){if("object"!=O(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return V(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}S(M,"DEFAULT_OPTIONS",{minDelay:1e3,maxDelay:6e4,handshakeTimeout:5e3}),S(M,"LIVERELOAD_PROTOCOLS",["http://livereload.com/protocols/official-9","http://livereload.com/protocols/2.x-remote-control"]);var z=(0,o.lazy)(function(){return Promise.resolve().then(n.bind(n,922)).then(function(t){return{default:t.Root}})}),G=function(){var t=N((0,o.useState)({data:null,error:null,loading:!0}),2),e=t[0],n=t[1],r=function(){var t,e=(t=j().m(function t(){var e,r,o,i,a,c,l,s,u;return j().w(function(t){for(;;)switch(t.p=t.n){case 0:return n(function(t){return P(P({},t),{},{loading:!0,error:null})}),t.p=1,t.n=2,Promise.all([fetch("data/model.json"),fetch("data/layout.json")]);case 2:if(e=t.v,r=N(e,2),o=r[0],i=r[1],o.ok){t.n=3;break}throw new Error("Failed to fetch model: ".concat(o.statusText));case 3:if(i.ok){t.n=4;break}throw new Error("Failed to fetch layout: ".concat(i.statusText));case 4:return t.n=5,Promise.all([o.json(),i.json()]);case 5:a=t.v,c=N(a,2),l=c[0],s=c[1],n({data:{model:l,layout:s},error:null,loading:!1}),t.n=7;break;case 6:t.p=6,u=t.v,console.error("Failed to load data:",u),n({data:null,error:u instanceof Error?u.message:"Unknown error occurred",loading:!1});case 7:return t.a(2)}},t,null,[[1,6]])}),function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){L(i,r,o,a,c,"next",t)}function c(t){L(i,r,o,a,c,"throw",t)}a(void 0)})});return function(){return e.apply(this,arguments)}}(),a=function(t){t.endsWith(".svg")||(console.log("File changed:",t),(0,i.S)(),r())};return(0,o.useEffect)(function(){return new M(a).connect(),r(),function(){}},[]),e.loading?o.createElement(F,null):e.error?o.createElement(q,{error:e.error,onRetry:r}):e.data?o.createElement(o.Suspense,{fallback:o.createElement(F,null)},o.createElement(z,{model:e.data.model,layout:e.data.layout})):o.createElement(q,{error:"No data available",onRetry:r})},F=function(){return o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontFamily:"Arial, sans-serif"}},o.createElement("div",null,"Loading..."))},q=function(t){var e=t.error,n=t.onRetry;return o.createElement("div",{style:{padding:"20px",color:"red",fontFamily:"monospace",whiteSpace:"pre-wrap",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh"}},o.createElement("h2",null,"Error loading application"),o.createElement("p",null,e),o.createElement("button",{onClick:n,style:{padding:"10px 20px",fontSize:"16px",cursor:"pointer",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px"}},"Retry"))},R=document.getElementById("root");if(!R)throw new Error("Root container not found");(0,r.createRoot)(R).render(o.createElement(G,null))},922:(t,e,n)=>{n.d(e,{Root:()=>H,S:()=>Z});var r=n(378),o=n(872),i=n(21);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function s(t,e,n){return(e=function(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){var n=void 0;return Object.keys(t.views).filter(function(t){return t.endsWith("Views")}).some(function(r){return t.views[r].some(function(t){if(t.softwareSystemId==e)return n=t.key,!0})}),n}var d=function(t){var e=[];return Object.keys(t.views).filter(function(t){return t.endsWith("Views")}).forEach(function(n){t.views[n].forEach(function(t){e.push({key:t.key,title:t.title||t.key,section:n})})}),e},f=n(447);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function p(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return g(s,"_invoke",function(n,r,o){var i,c,l,s=0,u=o||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,l=t,f.n=n,a}};function h(n,r){for(c=n,l=r,e=0;!d&&s&&!o&&e<u.length;e++){var o,i=u[e],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,c=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,p){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),c=u,l=p;(e=c<2?t:l)||!d;){i||(c?c<3?(c>1&&(f.n=-1),h(c,l)):f.n=l:f.v=l);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(e){i=t,c=1,l=e}finally{s=1}}return{value:e,done:d}}}(n,o,i),!0),s}var a={};function c(){}function l(){}function s(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(g(e={},r,function(){return this}),e),d=s.prototype=c.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,g(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=s,g(d,"constructor",s),g(s,"constructor",l),l.displayName="GeneratorFunction",g(s,o,"GeneratorFunction"),g(d),g(d,o,"Generator"),g(d,r,function(){return this}),g(d,"toString",function(){return"[object Generator]"}),(p=function(){return{w:i,m:f}})()}function g(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}g=function(t,e,n,r){function i(e,n){g(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},g(t,e,n,r)}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach(function(e){A(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function A(t,e,n){return(e=function(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function b(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){v(i,r,o,a,c,"next",t)}function c(t){v(i,r,o,a,c,"throw",t)}a(void 0)})}}function x(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return w(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var k={};function C(t){var e=t.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}var E=n(17);function S(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return I(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var B=function(t){var e=t.model,n=t.currentID,o=t.onViewChange,i=t.graph,a=t.onAutoLayout,c=t.onSave,l=t.onToggleHelp,s=t.saving,u=t.layouting,f=t.dragMode,h=t.setDragMode,p=d(e);return r.createElement("div",{className:"toolbar"},r.createElement(M,{views:p,currentID:n,onViewChange:o}),r.createElement(O,{graph:i,onAutoLayout:a,onSave:c,onToggleHelp:l,saving:s,layouting:u,dragMode:f,setDragMode:h}))},M=function(t){var e=t.views,n=t.currentID,o=t.onViewChange;return r.createElement("div",null,"View:",e.length>1?r.createElement("select",{onChange:function(t){return o(t.target.value)},value:n},r.createElement("option",{disabled:!0,value:"",hidden:!0},"..."),e.map(function(t){return r.createElement("option",{key:t.key,value:t.key},C(t.section)+": "+t.title)})):r.createElement("span",{style:{marginLeft:"8px",fontWeight:"bold"}},e[0]?C(e[0].section)+": "+e[0].title:"No views available"))},O=function(t){var e=t.graph,n=t.onAutoLayout,o=t.onSave,i=t.onToggleHelp,a=t.saving,c=t.layouting,l=t.dragMode,s=t.setDragMode;return r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement("div",{className:"toolbar-group"},r.createElement(j,{dragMode:l,setDragMode:s})),r.createElement("div",{className:"toolbar-group"},r.createElement(D,{graph:e})),r.createElement("div",{className:"toolbar-group"},r.createElement(T,{graph:e})),r.createElement("div",{className:"toolbar-group"},r.createElement(P,{onAutoLayout:n,layouting:c})),r.createElement("div",{className:"toolbar-group"},r.createElement(_,{graph:e})),r.createElement("div",{className:"toolbar-group"},r.createElement(N,{graph:e})),r.createElement("div",{className:"toolbar-group"},r.createElement(V,{onSave:o,saving:a,graph:e})),r.createElement("div",{className:"toolbar-group"},r.createElement(z,{onToggleHelp:i})))},j=function(t){var e=t.dragMode,n=t.setDragMode;return r.createElement("button",{className:"mode-toggle ".concat("select"===e?"select-mode":"pan-mode"),onClick:function(){return n("pan"===e?"select":"pan")},"data-tooltip":"pan"===e?"Pan Mode: Drag to pan the view (T)":"Select Mode: Drag to select elements, Shift+click to add/remove selection (T)"},"pan"===e?r.createElement("i",{className:"fas fa-hand-paper"}):r.createElement("i",{className:"fas fa-mouse-pointer"}))},D=function(t){var e=t.graph,n=(0,E.sy)();return r.createElement(r.Fragment,null,r.createElement("button",{onClick:function(){return e.undo()},"data-tooltip":"Undo the last change made to the diagram (".concat(n,"+Z)")},r.createElement("i",{className:"fas fa-undo"})),r.createElement("button",{onClick:function(){return e.redo()},"data-tooltip":"Redo the last undone action (".concat(n,"+Shift+Z / ").concat(n,"+Y)")},r.createElement("i",{className:"fas fa-redo"})))},T=function(t){var e=t.graph,n=(0,E.sy)();return r.createElement(r.Fragment,null,r.createElement("button",{onClick:function(){return e.alignSelectionH()},"data-tooltip":"Align all selected elements horizontally (left edges) (".concat(n,"+Shift+H)")},r.createElement("i",{className:"fas fa-align-left"})),r.createElement("button",{onClick:function(){return e.alignSelectionV()},"data-tooltip":"Align all selected elements vertically (top edges) (".concat(n,"+Shift+A)")},r.createElement("i",{className:"fas fa-align-left",style:{transform:"rotate(90deg)"}})),r.createElement("button",{onClick:function(){return e.distributeSelectionH()},"data-tooltip":"Distribute selected elements evenly horizontally (equal spacing) (".concat(n,"+Alt+H)")},r.createElement("i",{className:"fas fa-ellipsis-h"})),r.createElement("button",{onClick:function(){return e.distributeSelectionV()},"data-tooltip":"Distribute selected elements evenly vertically (equal spacing) (".concat(n,"+Alt+V)")},r.createElement("i",{className:"fas fa-ellipsis-v"})))},P=function(t){var e=t.onAutoLayout,n=t.layouting,o=(0,E.sy)();return r.createElement("button",{className:"auto-arrange",onClick:e,disabled:n,"data-tooltip":"Automatically arrange all elements using the Layered algorithm (".concat(o,"+L)")},n?r.createElement("i",{className:"fas fa-spinner fa-spin"}):r.createElement("i",{className:"fas fa-magic"}))},_=function(t){var e=t.graph,n=S((0,r.useState)(e.isGridVisible()),2),o=n[0],i=n[1],a=S((0,r.useState)(e.isSnapToGrid()),2),c=a[0],l=a[1],s=(0,E.sy)();return r.useEffect(function(){var t=function(){i(e.isGridVisible()),l(e.isSnapToGrid())};return t(),window.addEventListener("gridStateChanged",t),function(){window.removeEventListener("gridStateChanged",t)}},[e]),r.createElement(r.Fragment,null,r.createElement("button",{className:o?"active-toggle":"inactive-toggle",onClick:function(){e.toggleGrid(),i(e.isGridVisible())},"data-tooltip":"Toggle grid visibility (".concat(s,"+G)")},r.createElement("i",{className:"fas fa-th"})),r.createElement("button",{className:c?"active-toggle":"inactive-toggle",onClick:function(){e.toggleSnapToGrid(),l(e.isSnapToGrid())},"data-tooltip":"Toggle snap to grid (".concat(s,"+Shift+G)")},r.createElement("i",{className:"fas fa-magnet"})),r.createElement("button",{onClick:function(){e.snapAllToGrid()},disabled:!c,"data-tooltip":"Snap all elements to grid (".concat(s,"+Alt+G)")},r.createElement("i",{className:"fas fa-border-all"})))},L=function(){var t=S((0,r.useState)(100),2),e=t[0],n=t[1];return(0,r.useEffect)(function(){var t=function(){var t=Math.round(100*(0,i.IX)());n(t)};t();var e=setInterval(t,100);return function(){return clearInterval(e)}},[]),r.createElement("button",{onClick:function(){return(0,i.a_)(1)},className:"zoom-display","data-tooltip":"Click to reset zoom to 100%"},e,"%")},N=function(t){var e=t.graph,n=(0,E.sy)();return r.createElement(r.Fragment,null,r.createElement("button",{onClick:function(){(0,i.a_)(Math.max(.1,(0,i.IX)()/1.2))},"data-tooltip":"Zoom out to see more of the diagram (".concat(n,"+-)")},r.createElement("i",{className:"fas fa-search-minus"})),r.createElement(L,null),r.createElement("button",{onClick:function(){(0,i.a_)(Math.min(5,1.2*(0,i.IX)()))},"data-tooltip":"Zoom in to see details more clearly (".concat(n,"+=)")},r.createElement("i",{className:"fas fa-search-plus"})),r.createElement("button",{onClick:function(){e.fitToView()},"data-tooltip":"Fit diagram to view (".concat(n,"+9)")},r.createElement("i",{className:"fas fa-expand"})))},V=function(t){var e=t.onSave,n=t.saving,o=t.graph,i=S((0,r.useState)(!1),2),a=i[0],c=i[1],l=(0,E.sy)();return(0,r.useEffect)(function(){var t=function(){c(o.changed())};t();var e=setInterval(t,100);return function(){return clearInterval(e)}},[o]),r.createElement("button",{className:a?"grp":"action",disabled:n,onClick:e,"data-tooltip":"Save the current diagram layout (".concat(l,"+S)")},n?r.createElement("i",{className:"fas fa-spinner fa-spin"}):r.createElement("i",{className:"fas fa-save"}))},z=function(t){var e=t.onToggleHelp;return r.createElement("button",{onClick:e,"data-tooltip":"Show keyboard shortcuts and help information (Shift+? / Shift+F1)"},r.createElement("i",{className:"fas fa-question-circle"}))};function G(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return F(s,"_invoke",function(n,r,o){var i,c,l,s=0,u=o||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,l=t,f.n=n,a}};function h(n,r){for(c=n,l=r,e=0;!d&&s&&!o&&e<u.length;e++){var o,i=u[e],h=f.p,p=i[2];n>3?(o=p===r)&&(l=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,c=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,p){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),c=u,l=p;(e=c<2?t:l)||!d;){i||(c?c<3?(c>1&&(f.n=-1),h(c,l)):f.n=l:f.v=l);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(d=f.n<0)?l:n.call(r,f))!==a)break}catch(e){i=t,c=1,l=e}finally{s=1}}return{value:e,done:d}}}(n,o,i),!0),s}var a={};function c(){}function l(){}function s(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(F(e={},r,function(){return this}),e),d=s.prototype=c.prototype=Object.create(u);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,F(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=s,F(d,"constructor",s),F(s,"constructor",l),l.displayName="GeneratorFunction",F(s,o,"GeneratorFunction"),F(d),F(d,o,"Generator"),F(d,r,function(){return this}),F(d,"toString",function(){return"[object Generator]"}),(G=function(){return{w:i,m:f}})()}function F(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}F=function(t,e,n,r){function i(e,n){F(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},F(t,e,n,r)}function q(t,e,n,r,o,i,a){try{var c=t[i](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function R(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return W(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var U=(0,r.lazy)(function(){return Promise.resolve().then(n.bind(n,447)).then(function(t){return{default:t.Help}})}),Y=(0,r.lazy)(function(){return n.e(33).then(n.bind(n,33)).then(function(t){return{default:t.Graph}})}),H=function(t){var e=t.model,n=t.layout;return r.createElement(o.Kd,null,r.createElement(o.BV,null,r.createElement(o.qh,{path:"/",element:r.createElement(X,{model:e,layouts:n})})))},Z=function(){var t;(t=new URLSearchParams(document.location.search).get("id")||"")?delete k[t]:Object.keys(k).forEach(function(t){return delete k[t]})},X=function(t){var e=t.model,n=t.layouts,a=R((0,o.ok)(),2),c=a[0],s=a[1],d=decodeURI(c.get("id")||""),h=R((0,r.useState)(!1),2),g=h[0],y=h[1],A=R((0,r.useState)("pan"),2),v=A[0],w=A[1],C=function(t,e,n){if(k[n])return k[n];var r=function(t,e,n){var r=new Map,o=new Map,a=function(t){Array.isArray(t.relationships)&&t.relationships.forEach(function(t){o.set(t.id,t)})};if(t.model.people&&t.model.people.forEach(function(t){r.set(t.id,t),Array.isArray(t.relationships)&&t.relationships.forEach(function(t){o.set(t.id,t)})}),t.model.softwareSystems&&t.model.softwareSystems.forEach(function(t){r.set(t.id,t),a(t),Array.isArray(t.containers)&&t.containers.forEach(function(e){e.parent=t,r.set(e.id,e),a(e),Array.isArray(e.components)&&e.components.forEach(function(t){t.parent=e,r.set(t.id,t),a(t)})})}),t.model.deploymentNodes){var c=function(t,e){t.parent=e,r.set(t.id,t),a(t),function(t){t.containerInstances&&t.containerInstances.forEach(function(e){var n=l(l({},r.get(e.containerId)),{},{id:e.id});r.set(n.id,n),n.parent=t,a(e)})}(t),t.children&&t.children.forEach(function(e){return c(e,t)}),t.infrastructureNodes&&t.infrastructureNodes.forEach(function(e){return c(e,t)})};t.model.deploymentNodes.forEach(function(t){return c(t,null)})}var s=function(t,e){var n=null,r="";return Object.keys(t.views).filter(function(t){return t.endsWith("Views")}).some(function(o){return t.views[o].some(function(t){if(t.key==e)return n=t,r=o,!0})}),{view:n,section:r}}(t,n),d=s.view,f=s.section;if(!d)return null;var h=new i.jg(d.key,d.title||d.key),p={name:h.name,description:d.description,version:t.version,elements:[]};if(h.metadata=p,!d.elements)return h;var g={};if("deploymentViews"==f||"containerViews"==f)d.elements.forEach(function(t){var e=r.get(t.id);null!=e&&e.parent&&(g[e.parent.id]=!0)});else if(d.softwareSystemId)d.elements.find(function(t){return t.id==d.softwareSystemId})||(g[d.softwareSystemId]=!0);else if("systemLandscapeViews"==f){var y=l({id:"__enterprise__"},t.model.enterprise);r.set(y.id,y),t.model.people&&t.model.people.filter(function(t){return"External"!=t.location}).forEach(function(t){return t.parent=y}),t.model.softwareSystems&&t.model.softwareSystems.filter(function(t){return"External"!=t.location}).forEach(function(t){return t.parent=y}),g[y.id]=!0}var m=t.views.styles,A=function(t){return t.toLowerCase().replace(/[^a-z0-9-]/g,"-")};null!=m&&m.elements&&m.elements.forEach(function(t){if(t.tag){var e="--mdl-".concat(A(t.tag));t.background&&h.colorToVarMap.set(t.background,"".concat(e,"-bg")),t.color&&h.colorToVarMap.set(t.color,"".concat(e,"-color")),t.stroke&&h.colorToVarMap.set(t.stroke,"".concat(e,"-stroke"))}}),null!=m&&m.relationships&&m.relationships.forEach(function(t){if(t.tag){var e="--mdl-rel-".concat(A(t.tag));t.color&&h.colorToVarMap.set(t.color,"".concat(e,"-color"))}}),d.elements.forEach(function(e){if(!g[e.id]){var n=r.get(e.id),o="",i={};if(n){var a=n.tags.split(",");o=a[a.length-1],n.technology&&(o+=": "+n.technology),a.forEach(function(t){var e=m&&m.elements&&m.elements.find(function(e){return e.tag==t});e&&(i=l(l({},i),e))})}h.addNode(e.id,n&&n.name||e.id,o,n&&n.description?n.description:"",i),n&&p.elements.push({id:n.id,tags:n.tags,location:n.location,properties:n.properties,elementViewKey:u(t,n.id),technology:n.technology})}}),Array.isArray(d.relationships)&&d.relationships.forEach(function(t){var e=o.get(t.id);if(e)if(h.nodesMap.has(e.sourceId))if(h.nodesMap.has(e.destinationId)){var n={};e.tags.split(",").forEach(function(t){var e=m&&m.relationships&&m.relationships.find(function(e){return e.tag==t});e&&(n=l(l({},n),e))}),t.routing&&(n.routing=t.routing),h.addEdge(e.id,e.sourceId,e.destinationId,e.description,t.vertices,n)}else if(r.has(e.destinationId)){var i=r.get(e.destinationId);console.warn("Element not found in this view: ",i.id,i.name)}else console.warn("Element not found: ",e.destinationId);else if(r.has(e.sourceId)){var a=r.get(e.sourceId);console.warn("Element not found in this view: ",a.id,a.name)}else console.warn("Element not found: ",e.sourceId)});var v=function(t){for(var e=0,n=t.parent;n;n=n.parent)e++;return e};return Object.keys(g).map(function(t){return r.get(t)}).sort(function(t,e){return v(t)>v(e)?-1:1}).forEach(function(t){var e={};"deploymentViews"==f&&r.get(t.id).tags.split(",").forEach(function(t){var n=m&&m.elements&&m.elements.find(function(e){return e.tag==t});n&&(e=l(l({},e),n))});var n=d.elements.map(function(t){return r.get(t.id)}).filter(function(e){return!(!e||e.parent!==t||"systemLandscapeViews"===f&&"__enterprise__"===t.id&&"External"===e.location)}).map(function(t){return t.id});n.length>0&&h.addGroup(t.id,t.name,n,e)}),h.init(e[h.id]),h}(t,e,n);return r&&(k[n]=r),r}(e,n,d),E=function(t){var e=x((0,r.useState)(!1),2),n=e[0],o=e[1],i=(0,r.useCallback)(function(){var e=b(p().m(function e(n){var r,i;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return o(!0),e.p=1,r=m({direction:"DOWN"},n||{}),e.n=2,t.autoLayout(r);case 2:e.n=4;break;case 3:e.p=3,i=e.v,console.error("Layout failed:",i),alert("Layout failed. See console for details.");case 4:return e.p=4,o(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(t){return e.apply(this,arguments)}}(),[t]);return{layouting:n,handleAutoLayout:i}}(C||{}),S=E.layouting,I=E.handleAutoLayout,M=function(t,e){var n=x((0,r.useState)(!1),2),o=n[0],i=n[1];return{saving:o,handleSave:(0,r.useCallback)(b(p().m(function n(){var r;return p().w(function(n){for(;;)switch(n.p=n.n){case 0:return i(!0),n.p=1,n.n=2,fetch("data/save?id="+encodeURIComponent(e),{method:"post",body:t.exportSVG()});case 2:202!==n.v.status?alert("Error saving\nSee terminal output."):t.setSaved(),n.n=4;break;case 3:n.p=3,r=n.v,console.error("Save failed:",r),alert("Save failed. See console for details.");case 4:return n.p=4,i(!1),n.f(4);case 5:return n.a(2)}},n,null,[[1,3,4,5]])})),[t,e])}}(C||{},d),O=M.saving,j=M.handleSave;if(!C)return r.createElement(K,{model:e});var D=(0,r.useCallback)(function(){y(!g)},[g]);(0,r.useEffect)(function(){C&&C.name&&(document.title="".concat(C.name," - Model"))},[C]),(0,r.useEffect)(function(){var t,e=Object.fromEntries(c.entries()),n="1"===e.auto||"true"===e.auto,r="1"===e.save||"true"===e.save,o=(e.direction||"").toUpperCase(),i="1"===e.compact||"true"===e.compact,a={};return["UP","DOWN","LEFT","RIGHT"].includes(o)&&(a.direction=o),i&&(a.compactLayout=!0),(t=G().m(function t(){var e;return G().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,!n){t.n=1;break}return t.n=1,I(a);case 1:if(!r){t.n=2;break}return t.n=2,j();case 2:t.n=4;break;case 3:t.p=3,e=t.v,console.error("automation error",e);case 4:return t.a(2)}},t,null,[[0,3]])}),function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){q(i,r,o,a,c,"next",t)}function c(t){q(i,r,o,a,c,"throw",t)}a(void 0)})})(),function(){}},[C,I,j,c]),function(t,e,n,o,i,a){(0,r.useEffect)(function(){var r=function(r){var c=(0,f.Yp)(r);c&&r.preventDefault(),c===f._$?t():c===f.W0?e():c===f.aX&&i&&o?i("pan"===o?"select":"pan"):n&&(c===f.t9?n.alignSelectionH():c===f.Jk?n.alignSelectionV():c===f.DE?n.distributeSelectionH():c===f.Vy?n.distributeSelectionV():c===f.Hd&&a?a():c===f._t?n.resetView():c===f.Op?n.toggleGrid():c===f.hZ?n.toggleSnapToGrid():c===f.OE?n.snapAllToGrid():c===f.Gg?n.moveSelected(-n.getGridSize(),0):c===f.J8?n.moveSelected(-1,0,!0):c===f.b3?n.moveSelected(n.getGridSize(),0):c===f.iD?n.moveSelected(1,0,!0):c===f.uK?n.moveSelected(0,-n.getGridSize()):c===f.l8?n.moveSelected(0,-1,!0):c===f.rB?n.moveSelected(0,n.getGridSize()):c===f.mt&&n.moveSelected(0,1,!0))};return window.addEventListener("keydown",r),function(){return window.removeEventListener("keydown",r)}},[t,e,n,o,i,a])}(D,j,C,v,w,I);var T=(0,r.useCallback)(function(t){s({id:encodeURIComponent(t)})},[s]),P=(0,r.useCallback)(function(t){if(t){var e=C.metadata.elements.find(function(e){return e.id===t});console.log((n=e,JSON.parse(JSON.stringify(n))))}var n},[C]);return r.createElement(r.Fragment,null,r.createElement(B,{model:e,currentID:d,onViewChange:T,graph:C,onAutoLayout:I,onSave:j,onToggleHelp:D,saving:O,layouting:S,dragMode:v,setDragMode:w}),r.createElement(r.Suspense,{fallback:r.createElement("div",null,"Loading graph...")},r.createElement(Y,{key:d,data:C,onSelect:P,dragMode:v})),g&&r.createElement(r.Suspense,{fallback:r.createElement("div",null,"Loading help...")},r.createElement(U,null)))},K=function(t){var e=t.model,n=d(e);return r.useEffect(function(){document.title="Model - Architecture Diagrams as Code",n.length>0&&(document.location.href="?id="+n[0].key)},[n]),n.length>0?r.createElement(r.Fragment,null,"Redirecting to ",n[0].title):r.createElement(r.Fragment,null,"No views available")}}},t=>{t.O(0,[453,96],()=>t(t.s=589)),t.O()}]);
//# sourceMappingURL=main.js.map